import{a as R}from"./chunk-3USFH6CF.js";import{$c as j,Aa as e,Ba as c,F as h,Ha as u,J as E,Ja as _,K as v,Lb as y,Pa as m,Qa as C,Sc as b,Tc as T,Uc as N,Yc as w,Zc as F,_c as B,aa as M,ad as A,bd as D,ea as a,fa as x,gd as k,hd as z,kd as J,ld as O,md as G,na as r,rb as S,ua as g,za as i,zb as I}from"./chunk-XRNJ2UIA.js";function q(t,n){t&1&&c(0,"app-load")}function L(t,n){if(t&1&&(i(0,"span",19),m(1),e()),t&2){let l=_();a(),C(l.errors.name)}}function H(t,n){if(t&1&&(i(0,"span",19),m(1),e()),t&2){let l=_();a(),C(l.errors.phone)}}function K(t,n){if(t&1&&(i(0,"span",19),m(1),e()),t&2){let l=_();a(),C(l.errors.address)}}function P(t,n){if(t&1&&(i(0,"span",19),m(1),e()),t&2){let l=_();a(),C(l.errors.account_one)}}function Q(t,n){if(t&1&&(i(0,"span",19),m(1),e()),t&2){let l=_();a(),C(l.errors.account_two)}}function W(t,n){if(t&1&&(i(0,"span",19),m(1),e()),t&2){let l=_();a(),C(l.errors.account_three)}}var V=(()=>{let n=class n{constructor(d){this.service=d,this.loading=!1,this.item={},this.errors=null,this.getItem()}getItem(){this.loading=!0,this.service.api(`company/getCompany/${this.service.user.company_id}`,"get").subscribe(d=>{this.item=d.data,localStorage.setItem("company",JSON.stringify(this.item));let p=JSON.parse(localStorage.getItem("user")??"");p.company=this.item,localStorage.setItem("user",JSON.stringify(p)),this.loading=!1})}save(){this.loading=!0,this.errors=null,this.service.api(`company/updateCompany/${this.service.user.company_id}`,"put",this.item).subscribe(d=>{this.loading=!1,this.service.toast("success","Mec\xE1nica Actualizada.")},d=>{this.loading=!1,this.errors=d.error.errors,this.service.toast("error","Registro fallido")})}};n.\u0275fac=function(p){return new(p||n)(x(b))},n.\u0275cmp=E({type:n,selectors:[["app-company-edit"]],decls:58,vars:15,consts:[[4,"ngIf"],[1,"rounded-md","w-36","h-36","mx-auto","my-2",3,"src"],[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6","md:grid-cols-2"],[1,"label-form"],[1,"relative"],[1,"input-icon"],[1,"fa-solid","fa-id-card-clip","text-gray-500"],["name","name","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["class","error",4,"ngIf"],["name","phone","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","address","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","account_one","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","account_two","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","account_three","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],[1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center",3,"click"],[1,"fa-solid","fa-pen-to-square"],["model","Company","storage","companies",3,"id","message"],[1,"error"]],template:function(p,o){p&1&&(g(0,q,1,0,"app-load",0),i(1,"app-title"),m(2,"Actualizar Mec\xE1nica"),e(),c(3,"img",1),i(4,"form",2)(5,"div",3)(6,"div",4)(7,"div")(8,"label",5),m(9,"Nombre Mec\xE1nica"),e(),i(10,"div",6)(11,"div",7),c(12,"i",8),e(),i(13,"input",9),u("ngModelChange",function(s){return o.item.name=s}),e()(),g(14,L,2,1,"span",10),e(),i(15,"div")(16,"label",5),m(17,"Tel\xE9fono Mec\xE1nica"),e(),i(18,"div",6)(19,"div",7),c(20,"i",8),e(),i(21,"input",11),u("ngModelChange",function(s){return o.item.phone=s}),e()(),g(22,H,2,1,"span",10),e(),i(23,"div")(24,"label",5),m(25,"Direcci\xF3n Mec\xE1nica"),e(),i(26,"div",6)(27,"div",7),c(28,"i",8),e(),i(29,"input",12),u("ngModelChange",function(s){return o.item.address=s}),e()(),g(30,K,2,1,"span",10),e(),i(31,"div")(32,"label",5),m(33,"Cuenta Bancaria N\xB01"),e(),i(34,"div",6)(35,"div",7),c(36,"i",8),e(),i(37,"input",13),u("ngModelChange",function(s){return o.item.account_one=s}),e()(),g(38,P,2,1,"span",10),e(),i(39,"div")(40,"label",5),m(41,"Cuenta Bancaria N\xB02"),e(),i(42,"div",6)(43,"div",7),c(44,"i",8),e(),i(45,"input",14),u("ngModelChange",function(s){return o.item.account_two=s}),e()(),g(46,Q,2,1,"span",10),e(),i(47,"div")(48,"label",5),m(49,"Cuenta Bancaria N\xB03"),e(),i(50,"div",6)(51,"div",7),c(52,"i",8),e(),i(53,"input",15),u("ngModelChange",function(s){return o.item.account_three=s}),e()(),g(54,W,2,1,"span",10),e()(),i(55,"button",16),u("click",function(){return o.save()}),c(56,"i",17),e(),i(57,"app-file",18),u("message",function(){return o.getItem()}),e()()()),p&2&&(r("ngIf",o.loading),a(3),r("src",o.item.storage?o.service.apiUrl+"/"+o.item.storage:"assets/img/logo.png",M),a(10),r("ngModel",o.item.name),a(),r("ngIf",o.errors),a(7),r("ngModel",o.item.phone),a(),r("ngIf",o.errors),a(7),r("ngModel",o.item.address),a(),r("ngIf",o.errors),a(7),r("ngModel",o.item.account_one),a(),r("ngIf",o.errors),a(7),r("ngModel",o.item.account_two),a(),r("ngIf",o.errors),a(7),r("ngModel",o.item.account_three),a(),r("ngIf",o.errors),a(3),r("id",o.item.id))},dependencies:[S,J,T,N,D,w,F,B,A,j]});let t=n;return t})();var X=[{path:"",redirectTo:"edit",pathMatch:"full"},{path:"edit",component:V,canActivate:[R],data:{access:["company.edit"]}}],$=(()=>{let n=class n{};n.\u0275fac=function(p){return new(p||n)},n.\u0275mod=v({type:n}),n.\u0275inj=h({imports:[y.forChild(X),y]});let t=n;return t})();var _e=(()=>{let n=class n{};n.\u0275fac=function(p){return new(p||n)},n.\u0275mod=v({type:n}),n.\u0275inj=h({imports:[I,$,G,k,O,z]});let t=n;return t})();export{_e as CompanyModule};
