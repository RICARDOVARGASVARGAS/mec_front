import{g as ne,l as ge,m as St,n as vt,o as xt}from"./chunk-F45RQ6PG.js";import"./chunk-HPHDTXNO.js";import"./chunk-PTD2UHZP.js";import{a as J}from"./chunk-3USFH6CF.js";import{$ as Ke,$c as q,A as D,Aa as a,Ac as Ie,Ba as g,Bc as Le,C as He,Ca as M,Da as I,E as se,F,Fa as b,G as Be,Gc as dt,Ha as f,Hb as de,Hc as ct,I as Se,Ic as he,J as N,Ja as p,Jc as ht,K as H,Lb as Me,M as Re,N as $,O as z,Oa as te,P as C,Pa as m,Q as ve,Qa as y,R as xe,Ra as j,Sa as oe,Sc as L,Tc as R,Uc as pe,Va as Je,Vc as me,Wa as B,Wb as k,Wc as pt,Xa as P,Ya as Ee,Yc as G,Za as le,Zc as Q,_c as Z,aa as ae,ab as Xe,ad as W,ba as $e,bc as st,bd as Y,cc as ce,da as je,db as et,dd as mt,ea as c,ed as gt,f as re,fa as v,fb as Ne,fd as ut,g as Fe,gb as tt,gd as ft,ha as ee,hb as nt,ia as S,ib as Te,id as _t,j as x,ja as Ge,jb as be,ka as Qe,kd as O,ld as zt,ma as ke,md as Ct,na as h,oa as ye,p as U,pa as T,pc as at,qa as Ze,qb as we,rb as K,sa as qe,tc as ot,ua as u,uc as lt,va as E,vb as it,wb as De,xa as We,ya as Ye,za as l,zb as rt}from"./chunk-XRNJ2UIA.js";var Qt=(r,i)=>i.id;function Zt(r,i){r&1&&g(0,"app-load")}function qt(r,i){if(r&1){let s=b();l(0,"a",8),f("click",function(){z(s);let n=p();return C(n.service.goPage("user/create"))}),g(1,"i",9),a()}}function Wt(r,i){if(r&1){let s=b();l(0,"a",18),f("click",function(){z(s);let n=p().$implicit,t=p();return C(t.service.goPage("user/permission/"+n.id))}),g(1,"i",19),a()}}function Yt(r,i){if(r&1){let s=b();l(0,"a",20),f("nzOnConfirm",function(){z(s);let n=p().$implicit,t=p();return C(t.resetPassword(n.id))})("nzOnCancel",function(){return""}),g(1,"i",21),a()}}function Jt(r,i){if(r&1){let s=b();l(0,"a",22),f("click",function(){z(s);let n=p().$implicit,t=p();return C(t.service.goPage("user/edit/"+n.id))}),g(1,"i",23),a()}}var Xt=()=>["user.permission"],en=()=>["user.resetPassword"],tn=()=>["user.edit"];function nn(r,i){if(r&1&&(l(0,"tr",10)(1,"td",11),m(2),a(),l(3,"td",11),g(4,"p-image",12),a(),l(5,"td",13),m(6),a(),l(7,"td",13),m(8),a(),l(9,"td",11),m(10),a(),l(11,"td",11)(12,"span"),m(13),a()(),l(14,"td",14),u(15,Wt,2,0,"a",15)(16,Yt,2,0,"a",16)(17,Jt,2,0,"a",17),a()()),r&2){let s=i.$implicit,e=p();c(2),j(" ",s.number," "),c(2),h("src",s.storage?e.service.apiUrl+"/"+s.storage:"assets/img/logo.png")("preview",!0),c(2),oe(" ",s.names," ",s.surnames," "),c(2),j(" ",s.phone," "),c(2),y(s.email),c(2),qe("",s.status=="active"?"bg-green-500":"bg-red-500"," p-1 rounded-lg text-white "),c(),j(" ",s.status=="active"?"ACTIVO":"INACTIVO"," "),c(2),h("setPermission",P(14,Xt)),c(),h("setPermission",P(15,en)),c(),h("setPermission",P(16,tn))}}function rn(r,i){if(r&1){let s=b();l(0,"nav",7)(1,"ul",24)(2,"li")(3,"a",25),f("click",function(){z(s);let n=p();return C(n.changePage(-1))}),ve(),l(4,"svg",26),g(5,"path",27),a(),xe(),l(6,"span"),m(7,"Anterior"),a()()(),l(8,"li")(9,"a",28),m(10),a()(),l(11,"li")(12,"a",29),f("click",function(){z(s);let n=p();return C(n.changePage(1))}),l(13,"span"),m(14,"Siguiente"),a(),ve(),l(15,"svg",26),g(16,"path",30),a()()()(),xe(),l(17,"span"),m(18),a()()}if(r&2){let s=p();c(10),j(" P\xE1gina ",s.meta.current_page,""),c(8),j("Total de Resultados: ",s.meta.total,"")}}var sn=()=>["user.create"],kt=(()=>{let i=class i{constructor(e){this.service=e,this.per_page=null,this.search="",this.loading=!1,this.data=[],this.meta=null,this.actualPage=1,this.getData()}getData(e=[5,""]){this.per_page=e[0],this.search=e[1],this.list()}list(){this.loading=!0,this.service.api("user/getUsers","post",{company:this.service.user.company_id,search:this.search,perPage:this.per_page}).subscribe(e=>{this.loading=!1,this.data=e.data,e.meta?this.meta=e.meta:this.meta=null},e=>{this.loading=!1,this.service.toast("error",e.error.message)})}get page(){return this.meta==null?"":`page=${this.actualPage}`}changePage(e){let n=this.actualPage+e;1<=n&&n<=this.meta.last_page?(this.actualPage+=e,this.list()):this.service.toast("warning","No hay m\xE1s p\xE1ginas")}resetPassword(e){this.service.api(`user/resetPassword/${e}`,"post").subscribe(n=>{this.service.toast("success",n.message)},n=>{this.service.toast("error",n.error.message)})}};i.\u0275fac=function(n){return new(n||i)(v(L))},i.\u0275cmp=N({type:i,selectors:[["app-user-index"]],decls:28,vars:4,consts:[[3,"data"],["class","inline-flex items-center py-2.5 px-3 ml-2 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",3,"click",4,"setPermission"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[1,"sr-only"],["aria-label","Page navigation example"],[1,"inline-flex","items-center","py-2.5","px-3","ml-2","text-sm","font-medium","text-white","bg-blue-700","rounded-lg","border","border-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"fa-solid","fa-circle-plus"],[1,"bg-white","border-b","hover:bg-gray-50","text-gray-700"],[1,"px-6","py-4"],["alt","Perfil","width","30",3,"src","preview"],[1,"px-6","py-4","capitalize"],[1,"px-6","py-4","text-right","flex"],["class","ml-2 bg-cyan-600 text-white px-2 py-1 rounded-full",3,"click",4,"setPermission"],["class","ml-2 bg-yellow-700 text-white px-2 py-1 rounded-full","nz-popconfirm","","nzPopconfirmTitle","Restablecer Contrase\xF1a?","nzPopconfirmPlacement","top","nzOkText","Restablecer","nzCancelText","Cancelar",3,"nzOnConfirm","nzOnCancel",4,"setPermission"],["class","ml-2 bg-blue-700 text-white px-2 py-1 rounded-full",3,"click",4,"setPermission"],[1,"ml-2","bg-cyan-600","text-white","px-2","py-1","rounded-full",3,"click"],[1,"fa-solid","fa-fingerprint"],["nz-popconfirm","","nzPopconfirmTitle","Restablecer Contrase\xF1a?","nzPopconfirmPlacement","top","nzOkText","Restablecer","nzCancelText","Cancelar",1,"ml-2","bg-yellow-700","text-white","px-2","py-1","rounded-full",3,"nzOnConfirm","nzOnCancel"],[1,"fa-solid","fa-key"],[1,"ml-2","bg-blue-700","text-white","px-2","py-1","rounded-full",3,"click"],[1,"fa-solid","fa-marker"],[1,"flex","items-center","-space-x-px","h-10","text-base","mt-3"],["href","#","onclick","return false",1,"flex","items-center","justify-center","px-4","h-10","ml-0","leading-tight","text-gray-500","bg-white","border","border-gray-300","rounded-l-lg","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 6 10",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 1 1 5l4 4"],["href","#",1,"flex","items-center","justify-center","px-4","h-10","leading-tight","text-gray-500","bg-white","border","border-gray-300","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white"],["href","#","onclick","return false",1,"flex","items-center","justify-center","px-4","h-10","leading-tight","text-gray-500","bg-white","border","border-gray-300","rounded-r-lg","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 9 4-4-4-4"],["class","bg-white border-b hover:bg-gray-50 text-gray-700"]],template:function(n,t){n&1&&(u(0,Zt,1,0,"app-load"),l(1,"app-title"),m(2,"Lista Administradores"),a(),l(3,"app-search",0),f("data",function(o){return t.getData(o)}),u(4,qt,2,0,"a",1),a(),l(5,"div",2)(6,"table",3)(7,"thead",4)(8,"tr")(9,"th",5),m(10,"ID"),a(),l(11,"th",5),m(12,"Foto"),a(),l(13,"th",5),m(14,"Nombres Completos"),a(),l(15,"th",5),m(16,"Tel\xE9fono"),a(),l(17,"th",5),m(18,"Correo"),a(),l(19,"th",5),m(20,"Estado"),a(),l(21,"th",5)(22,"span",6),m(23,"Edit"),a()()()(),l(24,"tbody"),We(25,nn,18,17,"tr",31,Qt),a()()(),u(27,rn,19,2,"nav",7)),n&2&&(E(0,t.loading?0:-1),c(4),h("setPermission",P(3,sn)),c(21),Ye(t.data),c(2),E(27,t.meta?27:-1))},dependencies:[O,R,_t,ge,vt,me]});let r=i;return r})();function an(r,i){r&1&&(l(0,"app-load"),m(1,"Cargando ..."),a())}function on(r,i){if(r&1&&(l(0,"span",17),m(1),a()),r&2){let s=p();c(),y(s.errors.names)}}function ln(r,i){if(r&1&&(l(0,"span",17),m(1),a()),r&2){let s=p();c(),y(s.errors.surnames)}}function dn(r,i){if(r&1&&(l(0,"span",17),m(1),a()),r&2){let s=p();c(),y(s.errors.email)}}function cn(r,i){if(r&1&&(l(0,"span",17),m(1),a()),r&2){let s=p();c(),y(s.errors.phone)}}var Et=(()=>{let i=class i{constructor(e){this.service=e,this.loading=!1,this.item={},this.errors=null}save(){this.loading=!0,this.errors=null,this.item.company_id=this.service.user.company_id,this.item.status="active",this.service.api("user/registerUser","post",this.item).subscribe(e=>{this.loading=!1,this.service.toast("success","Administrador Registrado"),this.service.goPage("user/edit/"+e.data.id)},e=>{console.log(e),this.loading=!1,this.errors=e.error.errors,this.service.toast("error","Registro fallido")})}};i.\u0275fac=function(n){return new(n||i)(v(L))},i.\u0275cmp=N({type:i,selectors:[["app-user-create"]],decls:43,vars:9,consts:[[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6","md:grid-cols-2"],[1,"label-form"],[1,"relative"],[1,"input-icon"],[1,"fa-solid","fa-signature","text-gray-500"],["name","names","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["class","error"],["name","surnames","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","email","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","phone","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],[1,"flex"],[1,"btn-save",3,"click"],[1,"fa-solid","fa-floppy-disk"],[1,"btn-list",3,"click"],[1,"fa-solid","fa-table"],[1,"error"]],template:function(n,t){n&1&&(u(0,an,2,0,"app-load"),l(1,"app-title"),m(2,"Registrar Administrador"),a(),l(3,"form",0)(4,"div",1)(5,"div",2)(6,"div")(7,"label",3),m(8,"Nombres"),a(),l(9,"div",4)(10,"div",5),g(11,"i",6),a(),l(12,"input",7),f("ngModelChange",function(o){return t.item.names=o}),a()(),u(13,on,2,1,"span",8),a(),l(14,"div")(15,"label",3),m(16,"Apellidos"),a(),l(17,"div",4)(18,"div",5),g(19,"i",6),a(),l(20,"input",9),f("ngModelChange",function(o){return t.item.surnames=o}),a()(),u(21,ln,2,1,"span",8),a(),l(22,"div")(23,"label",3),m(24,"Correo Electr\xF3nico"),a(),l(25,"div",4)(26,"div",5),g(27,"i",6),a(),l(28,"input",10),f("ngModelChange",function(o){return t.item.email=o}),a()(),u(29,dn,2,1,"span",8),a(),l(30,"div")(31,"label",3),m(32,"Tel\xE9fono"),a(),l(33,"div",4)(34,"div",5),g(35,"i",6),a(),l(36,"input",11),f("ngModelChange",function(o){return t.item.phone=o}),a()(),u(37,cn,2,1,"span",8),a()(),l(38,"div",12)(39,"button",13),f("click",function(){return t.save()}),g(40,"i",14),a(),l(41,"a",15),f("click",function(){return t.service.goPage("user")}),g(42,"i",16),a()()()()),n&2&&(E(0,t.loading?0:-1),c(12),h("ngModel",t.item.names),c(),E(13,t.errors?13:-1),c(7),h("ngModel",t.item.surnames),c(),E(21,t.errors?21:-1),c(7),h("ngModel",t.item.email),c(),E(29,t.errors?29:-1),c(7),h("ngModel",t.item.phone),c(),E(37,t.errors?37:-1))},dependencies:[O,R,Y,G,Q,Z,W,q]});let r=i;return r})();function mn(r,i){r&1&&(l(0,"app-load"),m(1,"Cargando ..."),a())}function gn(r,i){if(r&1&&(l(0,"span",22),m(1),a()),r&2){let s=p();c(),y(s.errors.names)}}function un(r,i){if(r&1&&(l(0,"span",22),m(1),a()),r&2){let s=p();c(),y(s.errors.surnames)}}function fn(r,i){if(r&1&&(l(0,"span",22),m(1),a()),r&2){let s=p();c(),y(s.errors.email)}}function _n(r,i){if(r&1&&(l(0,"span",22),m(1),a()),r&2){let s=p();c(),y(s.errors.phone)}}function zn(r,i){if(r&1&&(l(0,"span",22),m(1),a()),r&2){let s=p();c(),y(s.errors.status)}}function Cn(r,i){if(r&1){let s=b();l(0,"a",23),f("nzOnConfirm",function(){z(s);let n=p();return C(n.delete())})("nzOnCancel",function(){return""}),g(1,"i",24),a()}if(r&2){let s=p();h("nzPopconfirmTitle","Eliminar Administrador: "+s.item.names+" "+s.item.surnames)}}function Sn(r,i){if(r&1){let s=b();l(0,"a",25),f("click",function(){z(s);let n=p();return C(n.service.goPage("user/index"))}),g(1,"i",26),a()}}function vn(r,i){if(r&1){let s=b();l(0,"a",25),f("click",function(){z(s);let n=p();return C(n.service.goPage("user/permission/"+n.item.id))}),g(1,"i",27),a()}}function xn(r,i){if(r&1&&(l(0,"div",28),g(1,"img",29),a()),r&2){let s=p();c(),h("src",s.service.apiUrl+"/"+s.item.storage,ae)}}var kn=()=>["user.destroy"],yn=()=>["user.index"],En=()=>["user.permission"],Nt=(()=>{let i=class i{constructor(e,n){this.service=e,this.route=n,this.id=null,this.loading=!1,this.item={},this.errors=null,n.params.subscribe(t=>{this.id=t.id,this.getData()})}getData(){this.service.api(`user/getUser/${this.id}`,"get").subscribe(e=>{if(this.item=e.data,this.service.user.id==this.id){let n=JSON.parse(localStorage.getItem("user")??"");n.names=this.item.names,n.surnames=this.item.surnames,n.email=this.item.email,n.image=this.item.image,n.storage=this.item.storage,localStorage.setItem("user",JSON.stringify(n))}})}save(){this.loading=!0,this.errors=null,this.service.api(`user/updateUser/${this.id}`,"put",this.item).subscribe(e=>{this.loading=!1,this.service.toast("success","Administrador Actualizado"),this.service.goPage("user/edit/"+e.data.id)},e=>{console.log(e),this.loading=!1,this.errors=e.error.errors,this.service.toast("error","Registro fallido")})}delete(){this.service.api(`user/deleteUser/${this.id}`,"delete").subscribe(e=>{this.service.toast("success","Administrador Eliminado"),this.service.goPage("user")},e=>{console.log(e),this.service.toast("error","No se puede Eliminar")})}};i.\u0275fac=function(n){return new(n||i)(v(L),v(de))},i.\u0275cmp=N({type:i,selectors:[["app-user-edit"]],decls:58,vars:19,consts:[[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6","md:grid-cols-2"],[1,"label-form"],[1,"relative"],[1,"input-icon"],[1,"fa-solid","fa-signature","text-gray-500"],["name","names","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["class","error"],["name","surnames","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","email","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","phone","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","item.status",1,"input",3,"ngModel","ngModelChange"],["value","active"],["value","inactive"],[1,"flex"],[1,"btn-save",3,"click"],[1,"fa-solid","fa-pen-to-square"],["nz-popconfirm","","nzPopconfirmPlacement","top","nzOkText","ELIMINAR","nzCancelText","CANCELAR","class","btn-delete",3,"nzPopconfirmTitle","nzOnConfirm","nzOnCancel",4,"setPermission"],["class","btn-list",3,"click",4,"setPermission"],["model","User","storage","users",3,"id","message"],["class","w-full flex items-center justify-center"],[1,"error"],["nz-popconfirm","","nzPopconfirmPlacement","top","nzOkText","ELIMINAR","nzCancelText","CANCELAR",1,"btn-delete",3,"nzPopconfirmTitle","nzOnConfirm","nzOnCancel"],[1,"fa-solid","fa-trash"],[1,"btn-list",3,"click"],[1,"fa-solid","fa-table"],[1,"fa-solid","fa-key"],[1,"w-full","flex","items-center","justify-center"],["alt","",1,"rounded-md","h-44","md:h-72",3,"src"]],template:function(n,t){n&1&&(u(0,mn,2,0,"app-load"),l(1,"app-title"),m(2,"Actualizar Administrador"),a(),l(3,"form",0)(4,"div",1)(5,"div",2)(6,"div")(7,"label",3),m(8,"Nombres"),a(),l(9,"div",4)(10,"div",5),g(11,"i",6),a(),l(12,"input",7),f("ngModelChange",function(o){return t.item.names=o}),a()(),u(13,gn,2,1,"span",8),a(),l(14,"div")(15,"label",3),m(16,"Apellidos"),a(),l(17,"div",4)(18,"div",5),g(19,"i",6),a(),l(20,"input",9),f("ngModelChange",function(o){return t.item.surnames=o}),a()(),u(21,un,2,1,"span",8),a(),l(22,"div")(23,"label",3),m(24,"Correo Electr\xF3nico"),a(),l(25,"div",4)(26,"div",5),g(27,"i",6),a(),l(28,"input",10),f("ngModelChange",function(o){return t.item.email=o}),a()(),u(29,fn,2,1,"span",8),a(),l(30,"div")(31,"label",3),m(32,"Tel\xE9fono"),a(),l(33,"div",4)(34,"div",5),g(35,"i",6),a(),l(36,"input",11),f("ngModelChange",function(o){return t.item.phone=o}),a()(),u(37,_n,2,1,"span",8),a(),l(38,"div")(39,"label",3),m(40,"Estado"),a(),l(41,"div",4)(42,"div",5),g(43,"i",6),a(),l(44,"select",12),f("ngModelChange",function(o){return t.item.status=o}),l(45,"option",13),m(46,"ACTIVO"),a(),l(47,"option",14),m(48,"INACTIVO"),a()()(),u(49,zn,2,1,"span",8),a()(),l(50,"div",15)(51,"button",16),f("click",function(){return t.save()}),g(52,"i",17),a(),u(53,Cn,2,1,"a",18)(54,Sn,2,0,"a",19)(55,vn,2,0,"a",19),l(56,"app-file",20),f("message",function(){return t.getData()}),a()()()(),u(57,xn,2,1,"div",21)),n&2&&(E(0,t.loading?0:-1),c(12),h("ngModel",t.item.names),c(),E(13,t.errors?13:-1),c(7),h("ngModel",t.item.surnames),c(),E(21,t.errors?21:-1),c(7),h("ngModel",t.item.email),c(),E(29,t.errors?29:-1),c(7),h("ngModel",t.item.phone),c(),E(37,t.errors?37:-1),c(7),h("ngModel",t.item.status),c(5),E(49,t.errors?49:-1),c(4),h("setPermission",P(16,kn)),c(),h("setPermission",P(17,yn)),c(),h("setPermission",P(18,En)),c(),h("id",t.id),c(),E(57,t.item.storage?57:-1))},dependencies:[O,R,pe,Y,gt,ut,G,mt,Q,Z,W,q,ge,me]});let r=i;return r})();var Nn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Tn=/([^\#-~ |!])/g;function bn(r){return r.replace(/&/g,"&amp;").replace(Nn,i=>{let s=i.charCodeAt(0),e=i.charCodeAt(1);return`&#${(s-55296)*1024+(e-56320)+65536};`}).replace(Tn,i=>`&#${i.charCodeAt(0)};`).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Tt=(()=>{let i=class i{constructor(){this.UNIQUE_WRAPPERS=["##==-open_tag-==##","##==-close_tag-==##"]}transform(e,n,t,d){if(!n)return e;let o=new RegExp(n.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$&"),t),_=e.replace(o,`${this.UNIQUE_WRAPPERS[0]}$&${this.UNIQUE_WRAPPERS[1]}`);return bn(_).replace(new RegExp(this.UNIQUE_WRAPPERS[0],"g"),d?`<span class="${d}">`:"<span>").replace(new RegExp(this.UNIQUE_WRAPPERS[1],"g"),"</span>")}};i.\u0275fac=function(n){return new(n||i)},i.\u0275pipe=Re({name:"nzHighlight",type:i,pure:!0,standalone:!0});let r=i;return r})(),bt=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=H({type:i}),i.\u0275inj=F({});let r=i;return r})();var _e=class r{get treeService(){return this.service||this.parentNode&&this.parentNode.treeService}constructor(i,s=null,e=null){if(this._title="",this.level=0,this.parentNode=null,this._icon="",this._children=[],this._isLeaf=!1,this._isChecked=!1,this._isSelectable=!1,this._isDisabled=!1,this._isDisableCheckbox=!1,this._isExpanded=!1,this._isHalfChecked=!1,this._isSelected=!1,this._isLoading=!1,this.canHide=!1,this.isMatched=!1,this.service=null,i instanceof r)return i;this.service=e||null,this.origin=i,this.key=i.key,this.parentNode=s,this._title=i.title||"---",this._icon=i.icon||"",this._isLeaf=i.isLeaf||!1,this._children=[],this._isChecked=i.checked||!1,this._isSelectable=i.disabled||i.selectable!==!1,this._isDisabled=i.disabled||!1,this._isDisableCheckbox=i.disableCheckbox||!1,this._isExpanded=i.isLeaf?!1:i.expanded||!1,this._isHalfChecked=!1,this._isSelected=!i.disabled&&i.selected||!1,this._isLoading=!1,this.isMatched=!1,s?this.level=s.level+1:this.level=0,typeof i.children<"u"&&i.children!==null&&i.children.forEach(n=>{let t=this.treeService;t&&!t.isCheckStrictly&&i.checked&&!i.disabled&&!n.disabled&&!n.disableCheckbox&&(n.checked=i.checked),this._children.push(new r(n,this))})}get title(){return this._title}set title(i){this._title=i,this.update()}get icon(){return this._icon}set icon(i){this._icon=i,this.update()}get children(){return this._children}set children(i){this._children=i,this.update()}get isLeaf(){return this._isLeaf}set isLeaf(i){this._isLeaf=i,this.update()}get isChecked(){return this._isChecked}set isChecked(i){this._isChecked=i,this.origin.checked=i,this.afterValueChange("isChecked")}get isHalfChecked(){return this._isHalfChecked}set isHalfChecked(i){this._isHalfChecked=i,this.afterValueChange("isHalfChecked")}get isSelectable(){return this._isSelectable}set isSelectable(i){this._isSelectable=i,this.update()}get isDisabled(){return this._isDisabled}set isDisabled(i){this._isDisabled=i,this.update()}get isDisableCheckbox(){return this._isDisableCheckbox}set isDisableCheckbox(i){this._isDisableCheckbox=i,this.update()}get isExpanded(){return this._isExpanded}set isExpanded(i){this._isExpanded=i,this.origin.expanded=i,this.afterValueChange("isExpanded"),this.afterValueChange("reRender")}get isSelected(){return this._isSelected}set isSelected(i){this._isSelected=i,this.origin.selected=i,this.afterValueChange("isSelected")}get isLoading(){return this._isLoading}set isLoading(i){this._isLoading=i,this.update()}setSyncChecked(i=!1,s=!1){this.setChecked(i,s),this.treeService&&!this.treeService.isCheckStrictly&&this.treeService.conduct(this)}setChecked(i=!1,s=!1){this.origin.checked=i,this.isChecked=i,this.isHalfChecked=s}setExpanded(i){this._isExpanded=i,this.origin.expanded=i,this.afterValueChange("isExpanded")}getParentNode(){return this.parentNode}getChildren(){return this.children}addChildren(i,s=-1){this.isLeaf||(i.forEach(e=>{let n=d=>{d.getChildren().forEach(o=>{o.level=o.getParentNode().level+1,o.origin.level=o.level,n(o)})},t=e;t instanceof r?t.parentNode=this:t=new r(e,this),t.level=this.level+1,t.origin.level=t.level,n(t);try{s===-1?this.children.push(t):this.children.splice(s,0,t)}catch{}}),this.origin.children=this.getChildren().map(e=>e.origin),this.isLoading=!1),this.afterValueChange("addChildren"),this.afterValueChange("reRender")}clearChildren(){this.afterValueChange("clearChildren"),this.children=[],this.origin.children=[],this.afterValueChange("reRender")}remove(){let i=this.getParentNode();i&&(i.children=i.getChildren().filter(s=>s.key!==this.key),i.origin.children=i.origin.children.filter(s=>s.key!==this.key),this.afterValueChange("remove"),this.afterValueChange("reRender"))}afterValueChange(i){if(this.treeService)switch(i){case"isChecked":this.treeService.setCheckedNodeList(this);break;case"isHalfChecked":this.treeService.setHalfCheckedNodeList(this);break;case"isExpanded":this.treeService.setExpandedNodeList(this);break;case"isSelected":this.treeService.setNodeActive(this);break;case"clearChildren":this.treeService.afterRemove(this.getChildren());break;case"remove":this.treeService.afterRemove([this]);break;case"reRender":this.treeService.flattenTreeData(this.treeService.rootNodes,this.treeService.getExpandedNodeList().map(s=>s.key));break}this.update()}update(){this.component&&this.component.markForCheck()}};function Pe(r){let{isDisabled:i,isDisableCheckbox:s}=r;return!!(i||s)}function wt(r,i){return i.length>0&&i.indexOf(r)>-1}function Dn(r,i){return`${r}-${i}`}function Mn(r,i){return r??i}function Ve(r=[],i=[]){let s=new Set(i===!0?[]:i),e=[];function n(t,d=null){return t.map((o,_)=>{let w=Dn(d?d.pos:"0",_),ie=Mn(o.key,w);o.isStart=[...d?d.isStart:[],_===0],o.isEnd=[...d?d.isEnd:[],_===t.length-1];let A={parent:d,pos:w,children:[],data:o,isStart:[...d?d.isStart:[],_===0],isEnd:[...d?d.isEnd:[],_===t.length-1]};return e.push(A),i===!0||s.has(ie)||o.isExpanded?A.children=n(o.children||[],A):A.children=[],A})}return n(r),e}var X=(()=>{let i=class i{constructor(){this.DRAG_SIDE_RANGE=.25,this.DRAG_MIN_GAP=2,this.isCheckStrictly=!1,this.isMultiple=!1,this.rootNodes=[],this.flattenNodes$=new Fe([]),this.selectedNodeList=[],this.expandedNodeList=[],this.checkedNodeList=[],this.halfCheckedNodeList=[],this.matchedNodeList=[]}initTree(e){this.rootNodes=e,this.expandedNodeList=[],this.selectedNodeList=[],this.halfCheckedNodeList=[],this.checkedNodeList=[],this.matchedNodeList=[]}flattenTreeData(e,n=[]){this.flattenNodes$.next(Ve(e,n).map(t=>t.data))}getSelectedNode(){return this.selectedNode}getSelectedNodeList(){return this.conductNodeState("select")}getCheckedNodeKeys(){let e=[],n=this.getCheckedNodeList(),t=d=>{d.forEach(o=>{e.push(o.key),!(o.children.length<1)&&t(o.children)})};return t(n),e}getCheckedNodeList(){return this.conductNodeState("check")}getHalfCheckedNodeList(){return this.conductNodeState("halfCheck")}getExpandedNodeList(){return this.conductNodeState("expand")}getMatchedNodeList(){return this.conductNodeState("match")}isArrayOfNzTreeNode(e){return e.every(n=>n instanceof _e)}setSelectedNode(e){this.selectedNode=e}setNodeActive(e){!this.isMultiple&&e.isSelected&&(this.selectedNodeList.forEach(n=>{e.key!==n.key&&(n.isSelected=!1)}),this.selectedNodeList=[]),this.setSelectedNodeList(e,this.isMultiple)}setSelectedNodeList(e,n=!1){let t=this.getIndexOfArray(this.selectedNodeList,e.key);n?e.isSelected&&t===-1&&this.selectedNodeList.push(e):e.isSelected&&t===-1&&(this.selectedNodeList=[e]),e.isSelected||(this.selectedNodeList=this.selectedNodeList.filter(d=>d.key!==e.key))}setHalfCheckedNodeList(e){let n=this.getIndexOfArray(this.halfCheckedNodeList,e.key);e.isHalfChecked&&n===-1?this.halfCheckedNodeList.push(e):!e.isHalfChecked&&n>-1&&(this.halfCheckedNodeList=this.halfCheckedNodeList.filter(t=>e.key!==t.key))}setCheckedNodeList(e){let n=this.getIndexOfArray(this.checkedNodeList,e.key);e.isChecked&&n===-1?this.checkedNodeList.push(e):!e.isChecked&&n>-1&&(this.checkedNodeList=this.checkedNodeList.filter(t=>e.key!==t.key))}conductNodeState(e="check"){let n=[];switch(e){case"select":n=this.selectedNodeList;break;case"expand":n=this.expandedNodeList;break;case"match":n=this.matchedNodeList;break;case"check":n=this.checkedNodeList;let t=d=>{let o=d.getParentNode();return o?this.checkedNodeList.findIndex(_=>_.key===o.key)>-1?!0:t(o):!1};this.isCheckStrictly||(n=this.checkedNodeList.filter(d=>!t(d)));break;case"halfCheck":this.isCheckStrictly||(n=this.halfCheckedNodeList);break}return n}setExpandedNodeList(e){if(e.isLeaf)return;let n=this.getIndexOfArray(this.expandedNodeList,e.key);e.isExpanded&&n===-1?this.expandedNodeList.push(e):!e.isExpanded&&n>-1&&this.expandedNodeList.splice(n,1)}setMatchedNodeList(e){let n=this.getIndexOfArray(this.matchedNodeList,e.key);e.isMatched&&n===-1?this.matchedNodeList.push(e):!e.isMatched&&n>-1&&this.matchedNodeList.splice(n,1)}refreshCheckState(e=!1){e||this.checkedNodeList.forEach(n=>{this.conduct(n,e)})}conduct(e,n=!1){let t=e.isChecked;e&&!n&&(this.conductUp(e),this.conductDown(e,t))}conductUp(e){let n=e.getParentNode();n&&(Pe(n)||(n.children.every(t=>Pe(t)||!t.isHalfChecked&&t.isChecked)?(n.isChecked=!0,n.isHalfChecked=!1):n.children.some(t=>t.isHalfChecked||t.isChecked)?(n.isChecked=!1,n.isHalfChecked=!0):(n.isChecked=!1,n.isHalfChecked=!1)),this.setCheckedNodeList(n),this.setHalfCheckedNodeList(n),this.conductUp(n))}conductDown(e,n){Pe(e)||(e.isChecked=n,e.isHalfChecked=!1,this.setCheckedNodeList(e),this.setHalfCheckedNodeList(e),e.children.forEach(t=>{this.conductDown(t,n)}))}afterRemove(e){let n=t=>{this.selectedNodeList=this.selectedNodeList.filter(d=>d.key!==t.key),this.expandedNodeList=this.expandedNodeList.filter(d=>d.key!==t.key),this.checkedNodeList=this.checkedNodeList.filter(d=>d.key!==t.key),t.children&&t.children.forEach(d=>{n(d)})};e.forEach(t=>{n(t)}),this.refreshCheckState(this.isCheckStrictly)}refreshDragNode(e){e.children.length===0?this.conductUp(e):e.children.forEach(n=>{this.refreshDragNode(n)})}resetNodeLevel(e){let n=e.getParentNode();n?e.level=n.level+1:e.level=0;for(let t of e.children)this.resetNodeLevel(t)}calcDropPosition(e){let{clientY:n}=e,{top:t,bottom:d,height:o}=e.target.getBoundingClientRect(),_=Math.max(o*this.DRAG_SIDE_RANGE,this.DRAG_MIN_GAP);return n<=t+_?-1:n>=d-_?1:0}dropAndApply(e,n=-1){if(!e||n>1)return;let t=e.treeService,d=e.getParentNode(),o=this.selectedNode.getParentNode();switch(o?o.children=o.children.filter(_=>_.key!==this.selectedNode.key):this.rootNodes=this.rootNodes.filter(_=>_.key!==this.selectedNode.key),n){case 0:e.addChildren([this.selectedNode]),this.resetNodeLevel(e);break;case-1:case 1:let _=n===1?1:0;if(d){d.addChildren([this.selectedNode],d.children.indexOf(e)+_);let w=this.selectedNode.getParentNode();w&&this.resetNodeLevel(w)}else{let w=this.rootNodes.indexOf(e)+_;this.rootNodes.splice(w,0,this.selectedNode),this.rootNodes[w].parentNode=null,this.resetNodeLevel(this.rootNodes[w])}break}this.rootNodes.forEach(_=>{_.treeService||(_.service=t),this.refreshDragNode(_)})}formatEvent(e,n,t){let d={eventName:e,node:n,event:t};switch(e){case"dragstart":case"dragenter":case"dragover":case"dragleave":case"drop":case"dragend":Object.assign(d,{dragNode:this.getSelectedNode()});break;case"click":case"dblclick":Object.assign(d,{selectedKeys:this.selectedNodeList}),Object.assign(d,{nodes:this.selectedNodeList}),Object.assign(d,{keys:this.selectedNodeList.map(_=>_.key)});break;case"check":let o=this.getCheckedNodeList();Object.assign(d,{checkedKeys:o}),Object.assign(d,{nodes:o}),Object.assign(d,{keys:o.map(_=>_.key)});break;case"search":Object.assign(d,{matchedKeys:this.getMatchedNodeList()}),Object.assign(d,{nodes:this.getMatchedNodeList()}),Object.assign(d,{keys:this.getMatchedNodeList().map(_=>_.key)});break;case"expand":Object.assign(d,{nodes:this.expandedNodeList}),Object.assign(d,{keys:this.expandedNodeList.map(_=>_.key)});break}return d}getIndexOfArray(e,n){return e.findIndex(t=>t.key===n)}conductCheck(e,n){this.checkedNodeList=[],this.halfCheckedNodeList=[];let t=d=>{d.forEach(o=>{e===null?o.isChecked=!!o.origin.checked:wt(o.key,e||[])?(o.isChecked=!0,o.isHalfChecked=!1):(o.isChecked=!1,o.isHalfChecked=!1),o.children.length>0&&t(o.children)})};t(this.rootNodes),this.refreshCheckState(n)}conductExpandedKeys(e=[]){let n=new Set(e===!0?[]:e);this.expandedNodeList=[];let t=d=>{d.forEach(o=>{o.setExpanded(e===!0||n.has(o.key)||o.isExpanded===!0),o.isExpanded&&this.setExpandedNodeList(o),o.children.length>0&&t(o.children)})};t(this.rootNodes)}conductSelectedKeys(e,n){this.selectedNodeList.forEach(d=>d.isSelected=!1),this.selectedNodeList=[];let t=d=>d.every(o=>{if(wt(o.key,e)){if(o.isSelected=!0,this.setSelectedNodeList(o),!n)return!1}else o.isSelected=!1;return o.children.length>0?t(o.children):!0});t(this.rootNodes)}expandNodeAllParentBySearch(e){let n=t=>{if(t&&(t.canHide=!1,t.setExpanded(!0),this.setExpandedNodeList(t),t.getParentNode()))return n(t.getParentNode())};n(e.getParentNode())}};i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=se({token:i,factory:i.\u0275fac});let r=i;return r})(),Dt=new Be("NzTreeHigherOrder"),ze=class{constructor(i){this.nzTreeService=i}coerceTreeNodes(i){let s=[];return this.nzTreeService.isArrayOfNzTreeNode(i)?s=i.map(e=>(e.service=this.nzTreeService,e)):s=i.map(e=>new _e(e,null,this.nzTreeService)),s}getTreeNodes(){return this.nzTreeService.rootNodes}getTreeNodeByKey(i){let s=[],e=n=>{s.push(n),n.getChildren().forEach(t=>{e(t)})};return this.getTreeNodes().forEach(n=>{e(n)}),s.find(n=>n.key===i)||null}getCheckedNodeList(){return this.nzTreeService.getCheckedNodeList()}getSelectedNodeList(){return this.nzTreeService.getSelectedNodeList()}getHalfCheckedNodeList(){return this.nzTreeService.getHalfCheckedNodeList()}getExpandedNodeList(){return this.nzTreeService.getExpandedNodeList()}getMatchedNodeList(){return this.nzTreeService.getMatchedNodeList()}};function Ln(r,i){if(r&1&&g(0,"span"),r&2){let s=i.index,e=p();T("ant-tree-indent-unit",!e.nzSelectMode)("ant-select-tree-indent-unit",e.nzSelectMode)("ant-select-tree-indent-unit-start",e.nzSelectMode&&e.nzIsStart[s])("ant-tree-indent-unit-start",!e.nzSelectMode&&e.nzIsStart[s])("ant-select-tree-indent-unit-end",e.nzSelectMode&&e.nzIsEnd[s])("ant-tree-indent-unit-end",!e.nzSelectMode&&e.nzIsEnd[s])}}var Mt=["builtin",""];function On(r,i){if(r&1&&(M(0),g(1,"span",4),I()),r&2){let s=p(3);c(),T("ant-select-tree-switcher-icon",s.nzSelectMode)("ant-tree-switcher-icon",!s.nzSelectMode)}}var Ae=(r,i)=>({$implicit:r,origin:i});function Pn(r,i){if(r&1&&(M(0),u(1,On,2,4,"ng-container",3),I()),r&2){let s=p(2);c(),h("nzStringTemplateOutlet",s.nzExpandedIcon)("nzStringTemplateOutletContext",le(2,Ae,s.context,s.context.origin))}}function Vn(r,i){if(r&1&&(M(0),u(1,Pn,2,5,"ng-container",2),I()),r&2){let s=p(),e=te(3);c(),h("ngIf",!s.isLoading)("ngIfElse",e)}}function An(r,i){if(r&1&&g(0,"span",7),r&2){let s=p(4);h("nzType",s.isSwitcherOpen?"minus-square":"plus-square")}}function Un(r,i){r&1&&g(0,"span",8)}function Fn(r,i){if(r&1&&(M(0),u(1,An,1,1,"span",5)(2,Un,1,0,"span",6),I()),r&2){let s=p(3);c(),h("ngIf",s.isShowLineIcon),c(),h("ngIf",!s.isShowLineIcon)}}function Hn(r,i){if(r&1&&(M(0),u(1,Fn,3,2,"ng-container",3),I()),r&2){let s=p(2);c(),h("nzStringTemplateOutlet",s.nzExpandedIcon)("nzStringTemplateOutletContext",le(2,Ae,s.context,s.context.origin))}}function Bn(r,i){if(r&1&&(M(0),u(1,Hn,2,5,"ng-container",2),I()),r&2){let s=p(),e=te(3);c(),h("ngIf",!s.isLoading)("ngIfElse",e)}}function Rn(r,i){r&1&&g(0,"span",9),r&2&&h("nzSpin",!0)}function Kn(r,i){}function $n(r,i){if(r&1&&g(0,"span",6),r&2){let s=p(3);h("nzType",s.icon)}}function jn(r,i){if(r&1&&(l(0,"span")(1,"span"),u(2,$n,1,1,"span",5),a()()),r&2){let s=p(2);T("ant-tree-icon__open",s.isSwitcherOpen)("ant-tree-icon__close",s.isSwitcherClose)("ant-tree-icon_loading",s.isLoading)("ant-select-tree-iconEle",s.selectMode)("ant-tree-iconEle",!s.selectMode),c(),T("ant-select-tree-iconEle",s.selectMode)("ant-select-tree-icon__customize",s.selectMode)("ant-tree-iconEle",!s.selectMode)("ant-tree-icon__customize",!s.selectMode),c(),h("ngIf",s.icon)}}function Gn(r,i){if(r&1&&(M(0),u(1,jn,3,19,"span",3),g(2,"span",4),Xe(3,"nzHighlight"),I()),r&2){let s=p();c(),h("ngIf",s.icon&&s.showIcon),c(),h("innerHTML",et(3,2,s.title,s.matchedValue,"i","font-highlight"),Ke)}}function Qn(r,i){if(r&1&&g(0,"nz-tree-drop-indicator",7),r&2){let s=p();h("dropPosition",s.dragPosition)("level",s.context.level)}}function Zn(r,i){if(r&1){let s=b();l(0,"nz-tree-node-switcher",4),f("click",function(n){z(s);let t=p();return C(t.clickExpand(n))}),a()}if(r&2){let s=p();h("nzShowExpand",s.nzShowExpand)("nzShowLine",s.nzShowLine)("nzExpandedIcon",s.nzExpandedIcon)("nzSelectMode",s.nzSelectMode)("context",s.nzTreeNode)("isLeaf",s.isLeaf)("isExpanded",s.isExpanded)("isLoading",s.isLoading)}}function qn(r,i){if(r&1){let s=b();l(0,"nz-tree-node-checkbox",5),f("click",function(n){z(s);let t=p();return C(t.clickCheckBox(n))}),a()}if(r&2){let s=p();h("nzSelectMode",s.nzSelectMode)("isChecked",s.isChecked)("isHalfChecked",s.isHalfChecked)("isDisabled",s.isDisabled)("isDisableCheckbox",s.isDisableCheckbox)}}var Wn=["nzTreeTemplate"];function Yn(r,i){}var It=r=>({$implicit:r});function Jn(r,i){if(r&1&&(M(0),u(1,Yn,0,0,"ng-template",10),I()),r&2){let s=i.$implicit;p(2);let e=te(9);c(),h("ngTemplateOutlet",e)("ngTemplateOutletContext",Ee(2,It,s))}}function Xn(r,i){if(r&1&&(l(0,"cdk-virtual-scroll-viewport",8),u(1,Jn,2,4,"ng-container",9),a()),r&2){let s=p();ye("height",s.nzVirtualHeight),T("ant-select-tree-list-holder-inner",s.nzSelectMode)("ant-tree-list-holder-inner",!s.nzSelectMode),h("itemSize",s.nzVirtualItemSize)("minBufferPx",s.nzVirtualMinBufferPx)("maxBufferPx",s.nzVirtualMaxBufferPx),c(),h("cdkVirtualForOf",s.nzFlattenNodes)("cdkVirtualForTrackBy",s.trackByFlattenNode)}}function ei(r,i){}function ti(r,i){if(r&1&&(M(0),u(1,ei,0,0,"ng-template",10),I()),r&2){let s=i.$implicit;p(2);let e=te(9);c(),h("ngTemplateOutlet",e)("ngTemplateOutletContext",Ee(2,It,s))}}function ni(r,i){if(r&1&&(l(0,"div",11),u(1,ti,2,4,"ng-container",12),a()),r&2){let s=p();T("ant-select-tree-list-holder-inner",s.nzSelectMode)("ant-tree-list-holder-inner",!s.nzSelectMode),h("@.disabled",s.beforeInit||!!(s.noAnimation!=null&&s.noAnimation.nzNoAnimation))("nzNoAnimation",s.noAnimation==null?null:s.noAnimation.nzNoAnimation)("@treeCollapseMotion",s.nzFlattenNodes.length),c(),h("ngForOf",s.nzFlattenNodes)("ngForTrackBy",s.trackByFlattenNode)}}function ii(r,i){if(r&1){let s=b();l(0,"nz-tree-node",13),f("nzExpandChange",function(n){z(s);let t=p();return C(t.eventTriggerChanged(n))})("nzClick",function(n){z(s);let t=p();return C(t.eventTriggerChanged(n))})("nzDblClick",function(n){z(s);let t=p();return C(t.eventTriggerChanged(n))})("nzContextMenu",function(n){z(s);let t=p();return C(t.eventTriggerChanged(n))})("nzCheckBoxChange",function(n){z(s);let t=p();return C(t.eventTriggerChanged(n))})("nzOnDragStart",function(n){z(s);let t=p();return C(t.eventTriggerChanged(n))})("nzOnDragEnter",function(n){z(s);let t=p();return C(t.eventTriggerChanged(n))})("nzOnDragOver",function(n){z(s);let t=p();return C(t.eventTriggerChanged(n))})("nzOnDragLeave",function(n){z(s);let t=p();return C(t.eventTriggerChanged(n))})("nzOnDragEnd",function(n){z(s);let t=p();return C(t.eventTriggerChanged(n))})("nzOnDrop",function(n){z(s);let t=p();return C(t.eventTriggerChanged(n))}),a()}if(r&2){let s=i.$implicit,e=p();h("icon",s.icon)("title",s.title)("isLoading",s.isLoading)("isSelected",s.isSelected)("isDisabled",s.isDisabled)("isMatched",s.isMatched)("isExpanded",s.isExpanded)("isLeaf",s.isLeaf)("isStart",s.isStart)("isEnd",s.isEnd)("isChecked",s.isChecked)("isHalfChecked",s.isHalfChecked)("isDisableCheckbox",s.isDisableCheckbox)("isSelectable",s.isSelectable)("canHide",s.canHide)("nzTreeNode",s)("nzSelectMode",e.nzSelectMode)("nzShowLine",e.nzShowLine)("nzExpandedIcon",e.nzExpandedIcon)("nzDraggable",e.nzDraggable)("nzCheckable",e.nzCheckable)("nzShowExpand",e.nzShowExpand)("nzAsyncData",e.nzAsyncData)("nzSearchValue",e.nzSearchValue)("nzHideUnMatched",e.nzHideUnMatched)("nzBeforeDrop",e.nzBeforeDrop)("nzShowIcon",e.nzShowIcon)("nzTreeTemplate",e.nzTreeTemplate||e.nzTreeTemplateChild)}}var ri=(()=>{let i=class i{constructor(e){this.cdr=e,this.level=1,this.direction="ltr",this.style={}}ngOnChanges(e){this.renderIndicator(this.dropPosition,this.direction)}renderIndicator(e,n="ltr"){let d=n==="ltr"?"left":"right",o=n==="ltr"?"right":"left",_={[d]:"4px",[o]:"0px"};switch(e){case-1:_.top="-3px";break;case 1:_.bottom="-3px";break;case 0:_.bottom="-3px",_[d]=`${4+24}px`;break;default:_.display="none";break}this.style=_,this.cdr.markForCheck()}};i.\u0275fac=function(n){return new(n||i)(v(ee))},i.\u0275cmp=N({type:i,selectors:[["nz-tree-drop-indicator"]],hostVars:4,hostBindings:function(n,t){n&2&&(Ze(t.style),T("ant-tree-drop-indicator",!0))},inputs:{dropPosition:"dropPosition",level:"level",direction:"direction"},exportAs:["NzTreeDropIndicator"],standalone:!0,features:[$,B],decls:0,vars:0,template:function(n,t){},encapsulation:2,changeDetection:0});let r=i;return r})(),si=(()=>{let i=class i{constructor(){this.nzTreeLevel=0,this.nzIsStart=[],this.nzIsEnd=[],this.nzSelectMode=!1,this.listOfUnit=[]}ngOnChanges(e){let{nzTreeLevel:n}=e;n&&(this.listOfUnit=[...new Array(n.currentValue||0)])}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=N({type:i,selectors:[["nz-tree-indent"]],hostVars:5,hostBindings:function(n,t){n&2&&(ke("aria-hidden",!0),T("ant-tree-indent",!t.nzSelectMode)("ant-select-tree-indent",t.nzSelectMode))},inputs:{nzTreeLevel:"nzTreeLevel",nzIsStart:"nzIsStart",nzIsEnd:"nzIsEnd",nzSelectMode:"nzSelectMode"},exportAs:["nzTreeIndent"],standalone:!0,features:[$,B],decls:1,vars:1,consts:[[3,"ant-tree-indent-unit","ant-select-tree-indent-unit","ant-select-tree-indent-unit-start","ant-tree-indent-unit-start","ant-select-tree-indent-unit-end","ant-tree-indent-unit-end",4,"ngFor","ngForOf"]],template:function(n,t){n&1&&u(0,Ln,1,12,"span",0),n&2&&h("ngForOf",t.listOfUnit)},dependencies:[we],encapsulation:2,changeDetection:0});let r=i;return r})(),ai=(()=>{let i=class i{constructor(){this.nzSelectMode=!1}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=N({type:i,selectors:[["nz-tree-node-checkbox","builtin",""]],hostVars:16,hostBindings:function(n,t){n&2&&T("ant-select-tree-checkbox",t.nzSelectMode)("ant-select-tree-checkbox-checked",t.nzSelectMode&&t.isChecked)("ant-select-tree-checkbox-indeterminate",t.nzSelectMode&&t.isHalfChecked)("ant-select-tree-checkbox-disabled",t.nzSelectMode&&(t.isDisabled||t.isDisableCheckbox))("ant-tree-checkbox",!t.nzSelectMode)("ant-tree-checkbox-checked",!t.nzSelectMode&&t.isChecked)("ant-tree-checkbox-indeterminate",!t.nzSelectMode&&t.isHalfChecked)("ant-tree-checkbox-disabled",!t.nzSelectMode&&(t.isDisabled||t.isDisableCheckbox))},inputs:{nzSelectMode:"nzSelectMode",isChecked:"isChecked",isHalfChecked:"isHalfChecked",isDisabled:"isDisabled",isDisableCheckbox:"isDisableCheckbox"},standalone:!0,features:[B],attrs:Mt,decls:1,vars:4,template:function(n,t){n&1&&g(0,"span"),n&2&&T("ant-tree-checkbox-inner",!t.nzSelectMode)("ant-select-tree-checkbox-inner",t.nzSelectMode)},encapsulation:2,changeDetection:0});let r=i;return r})(),Lt=(()=>{let i=class i{constructor(){this.nzSelectMode=!1}get isShowLineIcon(){return!this.isLeaf&&!!this.nzShowLine}get isShowSwitchIcon(){return!this.isLeaf&&!this.nzShowLine}get isSwitcherOpen(){return!!this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=N({type:i,selectors:[["nz-tree-node-switcher"]],hostVars:16,hostBindings:function(n,t){n&2&&T("ant-select-tree-switcher",t.nzSelectMode)("ant-select-tree-switcher-noop",t.nzSelectMode&&t.isLeaf)("ant-select-tree-switcher_open",t.nzSelectMode&&t.isSwitcherOpen)("ant-select-tree-switcher_close",t.nzSelectMode&&t.isSwitcherClose)("ant-tree-switcher",!t.nzSelectMode)("ant-tree-switcher-noop",!t.nzSelectMode&&t.isLeaf)("ant-tree-switcher_open",!t.nzSelectMode&&t.isSwitcherOpen)("ant-tree-switcher_close",!t.nzSelectMode&&t.isSwitcherClose)},inputs:{nzShowExpand:"nzShowExpand",nzShowLine:"nzShowLine",nzExpandedIcon:"nzExpandedIcon",nzSelectMode:"nzSelectMode",context:"context",isLeaf:"isLeaf",isLoading:"isLoading",isExpanded:"isExpanded"},standalone:!0,features:[B],decls:4,vars:2,consts:[[4,"ngIf"],["loadingTemplate",""],[4,"ngIf","ngIfElse"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["nz-icon","","nzType","caret-down"],["nz-icon","","class","ant-tree-switcher-line-icon",3,"nzType",4,"ngIf"],["nz-icon","","nzType","file","class","ant-tree-switcher-line-icon",4,"ngIf"],["nz-icon","",1,"ant-tree-switcher-line-icon",3,"nzType"],["nz-icon","","nzType","file",1,"ant-tree-switcher-line-icon"],["nz-icon","","nzType","loading",1,"ant-tree-switcher-loading-icon",3,"nzSpin"]],template:function(n,t){n&1&&u(0,Vn,2,2,"ng-container",0)(1,Bn,2,2,"ng-container",0)(2,Rn,1,1,"ng-template",null,1,be),n&2&&(h("ngIf",t.isShowSwitchIcon),c(),h("ngIf",t.nzShowLine))},dependencies:[Le,Ie,K,lt,ot],encapsulation:2,changeDetection:0});let r=i;return r})(),Ot=(()=>{let i=class i{get canDraggable(){return this.draggable&&!this.isDisabled?!0:null}get matchedValue(){return this.isMatched?this.searchValue:""}get isSwitcherOpen(){return this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}constructor(e){this.cdr=e,this.treeTemplate=null,this.selectMode=!1,this.showIndicator=!0}ngOnChanges(e){let{showIndicator:n,dragPosition:t}=e;(n||t)&&this.cdr.markForCheck()}};i.\u0275fac=function(n){return new(n||i)(v(ee))},i.\u0275cmp=N({type:i,selectors:[["nz-tree-node-title"]],hostVars:21,hostBindings:function(n,t){n&2&&(ke("title",t.title)("draggable",t.canDraggable)("aria-grabbed",t.canDraggable),T("draggable",t.canDraggable)("ant-select-tree-node-content-wrapper",t.selectMode)("ant-select-tree-node-content-wrapper-open",t.selectMode&&t.isSwitcherOpen)("ant-select-tree-node-content-wrapper-close",t.selectMode&&t.isSwitcherClose)("ant-select-tree-node-selected",t.selectMode&&t.isSelected)("ant-tree-node-content-wrapper",!t.selectMode)("ant-tree-node-content-wrapper-open",!t.selectMode&&t.isSwitcherOpen)("ant-tree-node-content-wrapper-close",!t.selectMode&&t.isSwitcherClose)("ant-tree-node-selected",!t.selectMode&&t.isSelected))},inputs:{searchValue:"searchValue",treeTemplate:"treeTemplate",draggable:"draggable",showIcon:"showIcon",selectMode:"selectMode",context:"context",icon:"icon",title:"title",isLoading:"isLoading",isSelected:"isSelected",isDisabled:"isDisabled",isMatched:"isMatched",isExpanded:"isExpanded",isLeaf:"isLeaf",showIndicator:"showIndicator",dragPosition:"dragPosition"},standalone:!0,features:[$,B],decls:3,vars:7,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[3,"dropPosition","level",4,"ngIf"],[3,"ant-tree-icon__open","ant-tree-icon__close","ant-tree-icon_loading","ant-select-tree-iconEle","ant-tree-iconEle",4,"ngIf"],[1,"ant-tree-title",3,"innerHTML"],["nz-icon","",3,"nzType",4,"ngIf"],["nz-icon","",3,"nzType"],[3,"dropPosition","level"]],template:function(n,t){n&1&&u(0,Kn,0,0,"ng-template",0)(1,Gn,4,7,"ng-container",1)(2,Qn,1,2,"nz-tree-drop-indicator",2),n&2&&(h("ngTemplateOutlet",t.treeTemplate)("ngTemplateOutletContext",le(4,Ae,t.context,t.context.origin)),c(),h("ngIf",!t.treeTemplate),c(),h("ngIf",t.showIndicator))},dependencies:[De,K,Le,Ie,bt,Tt,ri],encapsulation:2,changeDetection:0});let r=i;return r})(),Pt=(()=>{let i=class i{get displayStyle(){return this.nzSearchValue&&this.nzHideUnMatched&&!this.isMatched&&!this.isExpanded&&this.canHide?"none":""}get isSwitcherOpen(){return this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}clickExpand(e){e.preventDefault(),!this.isLoading&&!this.isLeaf&&(this.nzAsyncData&&this.nzTreeNode.children.length===0&&!this.isExpanded&&(this.nzTreeNode.isLoading=!0),this.nzTreeNode.setExpanded(!this.isExpanded)),this.nzTreeService.setExpandedNodeList(this.nzTreeNode);let n=this.nzTreeService.formatEvent("expand",this.nzTreeNode,e);this.nzExpandChange.emit(n)}clickSelect(e){e.preventDefault(),this.isSelectable&&!this.isDisabled&&(this.nzTreeNode.isSelected=!this.nzTreeNode.isSelected),this.nzTreeService.setSelectedNodeList(this.nzTreeNode);let n=this.nzTreeService.formatEvent("click",this.nzTreeNode,e);this.nzClick.emit(n)}dblClick(e){e.preventDefault();let n=this.nzTreeService.formatEvent("dblclick",this.nzTreeNode,e);this.nzDblClick.emit(n)}contextMenu(e){e.preventDefault();let n=this.nzTreeService.formatEvent("contextmenu",this.nzTreeNode,e);this.nzContextMenu.emit(n)}clickCheckBox(e){if(e.preventDefault(),this.isDisabled||this.isDisableCheckbox)return;this.nzTreeNode.isChecked=!this.nzTreeNode.isChecked,this.nzTreeNode.isHalfChecked=!1,this.nzTreeService.setCheckedNodeList(this.nzTreeNode);let n=this.nzTreeService.formatEvent("check",this.nzTreeNode,e);this.nzCheckBoxChange.emit(n)}clearDragClass(){["drag-over-gap-top","drag-over-gap-bottom","drag-over","drop-target"].forEach(n=>{this.renderer.removeClass(this.elementRef.nativeElement,n)})}handleDragStart(e){try{e.dataTransfer.setData("text/plain",this.nzTreeNode.key)}catch{}this.nzTreeService.setSelectedNode(this.nzTreeNode),this.draggingKey=this.nzTreeNode.key;let n=this.nzTreeService.formatEvent("dragstart",this.nzTreeNode,e);this.nzOnDragStart.emit(n)}handleDragEnter(e){e.preventDefault(),this.showIndicator=this.nzTreeNode.key!==this.nzTreeService.getSelectedNode()?.key,this.renderIndicator(2),this.ngZone.run(()=>{let n=this.nzTreeService.formatEvent("dragenter",this.nzTreeNode,e);this.nzOnDragEnter.emit(n)})}handleDragOver(e){e.preventDefault();let n=this.nzTreeService.calcDropPosition(e);this.dragPos!==n&&(this.clearDragClass(),this.renderIndicator(n),this.dragPos===0&&this.isLeaf||(this.renderer.addClass(this.elementRef.nativeElement,this.dragPosClass[this.dragPos]),this.renderer.addClass(this.elementRef.nativeElement,"drop-target")));let t=this.nzTreeService.formatEvent("dragover",this.nzTreeNode,e);this.nzOnDragOver.emit(t)}handleDragLeave(e){e.preventDefault(),this.renderIndicator(2),this.clearDragClass();let n=this.nzTreeService.formatEvent("dragleave",this.nzTreeNode,e);this.nzOnDragLeave.emit(n)}handleDragDrop(e){e.preventDefault(),e.stopPropagation(),this.ngZone.run(()=>{this.showIndicator=!1,this.clearDragClass();let n=this.nzTreeService.getSelectedNode();if(!n||n&&n.key===this.nzTreeNode.key||this.dragPos===0&&this.isLeaf)return;let t=this.nzTreeService.formatEvent("drop",this.nzTreeNode,e),d=this.nzTreeService.formatEvent("dragend",this.nzTreeNode,e);this.nzBeforeDrop?this.nzBeforeDrop({dragNode:this.nzTreeService.getSelectedNode(),node:this.nzTreeNode,pos:this.dragPos}).subscribe(o=>{o&&this.nzTreeService.dropAndApply(this.nzTreeNode,this.dragPos),this.nzOnDrop.emit(t),this.nzOnDragEnd.emit(d)}):this.nzTreeNode&&(this.nzTreeService.dropAndApply(this.nzTreeNode,this.dragPos),this.nzOnDrop.emit(t))})}handleDragEnd(e){e.preventDefault(),this.ngZone.run(()=>{if(this.nzBeforeDrop)this.draggingKey=null,this.markForCheck();else{this.draggingKey=null;let n=this.nzTreeService.formatEvent("dragend",this.nzTreeNode,e);this.nzOnDragEnd.emit(n)}})}handDragEvent(){this.ngZone.runOutsideAngular(()=>{if(this.nzDraggable){let e=this.elementRef.nativeElement;this.destroy$=new re,U(e,"dragstart").pipe(D(this.destroy$)).subscribe(n=>this.handleDragStart(n)),U(e,"dragenter").pipe(D(this.destroy$)).subscribe(n=>this.handleDragEnter(n)),U(e,"dragover").pipe(D(this.destroy$)).subscribe(n=>this.handleDragOver(n)),U(e,"dragleave").pipe(D(this.destroy$)).subscribe(n=>this.handleDragLeave(n)),U(e,"drop").pipe(D(this.destroy$)).subscribe(n=>this.handleDragDrop(n)),U(e,"dragend").pipe(D(this.destroy$)).subscribe(n=>this.handleDragEnd(n))}else this.destroy$.next(!0),this.destroy$.complete()})}markForCheck(){this.cdr.markForCheck()}constructor(e,n,t,d,o,_){this.nzTreeService=e,this.ngZone=n,this.renderer=t,this.elementRef=d,this.cdr=o,this.noAnimation=_,this.icon="",this.title="",this.isLoading=!1,this.isSelected=!1,this.isDisabled=!1,this.isMatched=!1,this.isStart=[],this.isEnd=[],this.nzHideUnMatched=!1,this.nzNoAnimation=!1,this.nzSelectMode=!1,this.nzShowIcon=!1,this.nzTreeTemplate=null,this.nzSearchValue="",this.nzDraggable=!1,this.nzClick=new S,this.nzDblClick=new S,this.nzContextMenu=new S,this.nzCheckBoxChange=new S,this.nzExpandChange=new S,this.nzOnDragStart=new S,this.nzOnDragEnter=new S,this.nzOnDragOver=new S,this.nzOnDragLeave=new S,this.nzOnDrop=new S,this.nzOnDragEnd=new S,this.destroy$=new re,this.dragPos=2,this.dragPosClass={0:"drag-over",1:"drag-over-gap-bottom","-1":"drag-over-gap-top"},this.draggingKey=null,this.showIndicator=!1}ngOnInit(){this.nzTreeNode.component=this,this.ngZone.runOutsideAngular(()=>{U(this.elementRef.nativeElement,"mousedown").pipe(D(this.destroy$)).subscribe(e=>{this.nzSelectMode&&e.preventDefault()})})}ngOnChanges(e){let{nzDraggable:n}=e;n&&this.handDragEvent()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}renderIndicator(e){this.ngZone.run(()=>{this.showIndicator=e!==2,!(this.nzTreeNode.key===this.nzTreeService.getSelectedNode()?.key||e===0&&this.isLeaf)&&(this.dragPos=e,this.cdr.markForCheck())})}};i.\u0275fac=function(n){return new(n||i)(v(X),v(Ge),v(je),v($e),v(ee),v(ne,9))},i.\u0275cmp=N({type:i,selectors:[["nz-tree-node","builtin",""]],hostVars:36,hostBindings:function(n,t){n&2&&(ye("display",t.displayStyle),T("ant-select-tree-treenode",t.nzSelectMode)("ant-select-tree-treenode-disabled",t.nzSelectMode&&t.isDisabled)("ant-select-tree-treenode-switcher-open",t.nzSelectMode&&t.isSwitcherOpen)("ant-select-tree-treenode-switcher-close",t.nzSelectMode&&t.isSwitcherClose)("ant-select-tree-treenode-checkbox-checked",t.nzSelectMode&&t.isChecked)("ant-select-tree-treenode-checkbox-indeterminate",t.nzSelectMode&&t.isHalfChecked)("ant-select-tree-treenode-selected",t.nzSelectMode&&t.isSelected)("ant-select-tree-treenode-loading",t.nzSelectMode&&t.isLoading)("ant-tree-treenode",!t.nzSelectMode)("ant-tree-treenode-disabled",!t.nzSelectMode&&t.isDisabled)("ant-tree-treenode-switcher-open",!t.nzSelectMode&&t.isSwitcherOpen)("ant-tree-treenode-switcher-close",!t.nzSelectMode&&t.isSwitcherClose)("ant-tree-treenode-checkbox-checked",!t.nzSelectMode&&t.isChecked)("ant-tree-treenode-checkbox-indeterminate",!t.nzSelectMode&&t.isHalfChecked)("ant-tree-treenode-selected",!t.nzSelectMode&&t.isSelected)("ant-tree-treenode-loading",!t.nzSelectMode&&t.isLoading)("dragging",t.draggingKey===t.nzTreeNode.key))},inputs:{icon:"icon",title:"title",isLoading:"isLoading",isSelected:"isSelected",isDisabled:"isDisabled",isMatched:"isMatched",isExpanded:"isExpanded",isLeaf:"isLeaf",isChecked:"isChecked",isHalfChecked:"isHalfChecked",isDisableCheckbox:"isDisableCheckbox",isSelectable:"isSelectable",canHide:"canHide",isStart:"isStart",isEnd:"isEnd",nzTreeNode:"nzTreeNode",nzShowLine:"nzShowLine",nzShowExpand:"nzShowExpand",nzCheckable:"nzCheckable",nzAsyncData:"nzAsyncData",nzHideUnMatched:"nzHideUnMatched",nzNoAnimation:"nzNoAnimation",nzSelectMode:"nzSelectMode",nzShowIcon:"nzShowIcon",nzExpandedIcon:"nzExpandedIcon",nzTreeTemplate:"nzTreeTemplate",nzBeforeDrop:"nzBeforeDrop",nzSearchValue:"nzSearchValue",nzDraggable:"nzDraggable"},outputs:{nzClick:"nzClick",nzDblClick:"nzDblClick",nzContextMenu:"nzContextMenu",nzCheckBoxChange:"nzCheckBoxChange",nzExpandChange:"nzExpandChange",nzOnDragStart:"nzOnDragStart",nzOnDragEnter:"nzOnDragEnter",nzOnDragOver:"nzOnDragOver",nzOnDragLeave:"nzOnDragLeave",nzOnDrop:"nzOnDrop",nzOnDragEnd:"nzOnDragEnd"},exportAs:["nzTreeBuiltinNode"],standalone:!0,features:[$,B],attrs:Mt,decls:4,vars:22,consts:[[3,"nzTreeLevel","nzSelectMode","nzIsStart","nzIsEnd"],[3,"nzShowExpand","nzShowLine","nzExpandedIcon","nzSelectMode","context","isLeaf","isExpanded","isLoading","click",4,"ngIf"],["builtin","",3,"nzSelectMode","isChecked","isHalfChecked","isDisabled","isDisableCheckbox","click",4,"ngIf"],[3,"icon","title","isLoading","isSelected","isDisabled","isMatched","isExpanded","isLeaf","searchValue","treeTemplate","draggable","showIcon","selectMode","context","showIndicator","dragPosition","dblclick","click","contextmenu"],[3,"nzShowExpand","nzShowLine","nzExpandedIcon","nzSelectMode","context","isLeaf","isExpanded","isLoading","click"],["builtin","",3,"nzSelectMode","isChecked","isHalfChecked","isDisabled","isDisableCheckbox","click"]],template:function(n,t){n&1&&(g(0,"nz-tree-indent",0),u(1,Zn,1,8,"nz-tree-node-switcher",1)(2,qn,1,5,"nz-tree-node-checkbox",2),l(3,"nz-tree-node-title",3),f("dblclick",function(o){return t.dblClick(o)})("click",function(o){return t.clickSelect(o)})("contextmenu",function(o){return t.contextMenu(o)}),a()),n&2&&(h("nzTreeLevel",t.nzTreeNode.level)("nzSelectMode",t.nzSelectMode)("nzIsStart",t.isStart)("nzIsEnd",t.isEnd),c(),h("ngIf",t.nzShowExpand),c(),h("ngIf",t.nzCheckable),c(),h("icon",t.icon)("title",t.title)("isLoading",t.isLoading)("isSelected",t.isSelected)("isDisabled",t.isDisabled)("isMatched",t.isMatched)("isExpanded",t.isExpanded)("isLeaf",t.isLeaf)("searchValue",t.nzSearchValue)("treeTemplate",t.nzTreeTemplate)("draggable",t.nzDraggable)("showIcon",t.nzShowIcon)("selectMode",t.nzSelectMode)("context",t.nzTreeNode)("showIndicator",t.showIndicator)("dragPosition",t.dragPos))},dependencies:[si,Lt,K,ai,Ot],encapsulation:2,changeDetection:0});let r=i;return x([k()],r.prototype,"nzShowLine",void 0),x([k()],r.prototype,"nzShowExpand",void 0),x([k()],r.prototype,"nzCheckable",void 0),x([k()],r.prototype,"nzAsyncData",void 0),x([k()],r.prototype,"nzHideUnMatched",void 0),x([k()],r.prototype,"nzNoAnimation",void 0),x([k()],r.prototype,"nzSelectMode",void 0),x([k()],r.prototype,"nzShowIcon",void 0),r})(),Vt=(()=>{let i=class i extends X{constructor(){super()}};i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=se({token:i,factory:i.\u0275fac});let r=i;return r})();function oi(){let r=Se(Dt,{skipSelf:!0,optional:!0}),i=Se(Vt);return r??i}var li="tree",Ue=(()=>{let i=class i extends ze{writeValue(e){this.handleNzData(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}renderTreeProperties(e){let n=!1,t=!1,{nzData:d,nzExpandedKeys:o,nzSelectedKeys:_,nzCheckedKeys:w,nzCheckStrictly:ie,nzExpandAll:A,nzMultiple:Bt,nzSearchValue:Ce}=e;A&&(n=!0,t=this.nzExpandAll),Bt&&(this.nzTreeService.isMultiple=this.nzMultiple),ie&&(this.nzTreeService.isCheckStrictly=this.nzCheckStrictly),d&&this.handleNzData(this.nzData),w&&this.handleCheckedKeys(this.nzCheckedKeys),ie&&this.handleCheckedKeys(null),(o||A)&&(n=!0,this.handleExpandedKeys(t||this.nzExpandedKeys)),_&&this.handleSelectedKeys(this.nzSelectedKeys,this.nzMultiple),Ce&&(Ce.firstChange&&!this.nzSearchValue||(n=!1,this.handleSearchValue(Ce.currentValue,this.nzSearchFunc),this.nzSearchValueChange.emit(this.nzTreeService.formatEvent("search",null,null))));let Rt=this.getExpandedNodeList().map($t=>$t.key),Kt=n?t||this.nzExpandedKeys:Rt;this.handleFlattenNodes(this.nzTreeService.rootNodes,Kt)}trackByFlattenNode(e,n){return n.key}handleNzData(e){if(Array.isArray(e)){let n=this.coerceTreeNodes(e);this.nzTreeService.initTree(n)}}handleFlattenNodes(e,n=[]){this.nzTreeService.flattenTreeData(e,n)}handleCheckedKeys(e){this.nzTreeService.conductCheck(e,this.nzCheckStrictly)}handleExpandedKeys(e=[]){this.nzTreeService.conductExpandedKeys(e)}handleSelectedKeys(e,n){this.nzTreeService.conductSelectedKeys(e,n)}handleSearchValue(e,n){let t=Ve(this.nzTreeService.rootNodes,!0).map(o=>o.data),d=o=>n?n(o.origin):!(!e||!o.title.toLowerCase().includes(e.toLowerCase()));t.forEach(o=>{o.isMatched=d(o),o.canHide=!o.isMatched,o.isMatched?this.nzTreeService.expandNodeAllParentBySearch(o):(o.setExpanded(!1),this.nzTreeService.setExpandedNodeList(o)),this.nzTreeService.setMatchedNodeList(o)})}eventTriggerChanged(e){let n=e.node;switch(e.eventName){case"expand":this.renderTree(),this.nzExpandChange.emit(e);break;case"click":this.nzClick.emit(e);break;case"dblclick":this.nzDblClick.emit(e);break;case"contextmenu":this.nzContextMenu.emit(e);break;case"check":this.nzTreeService.setCheckedNodeList(n),this.nzCheckStrictly||this.nzTreeService.conduct(n);let t=this.nzTreeService.formatEvent("check",n,e.event);this.nzCheckBoxChange.emit(t);let d=this.nzTreeService.getCheckedNodeKeys();this.nzCheckedKeysChange.emit(d);break;case"dragstart":n.isExpanded&&(n.setExpanded(!n.isExpanded),this.renderTree()),this.nzOnDragStart.emit(e);break;case"dragenter":let o=this.nzTreeService.getSelectedNode();o&&o.key!==n.key&&!n.isExpanded&&!n.isLeaf&&(n.setExpanded(!0),this.renderTree()),this.nzOnDragEnter.emit(e);break;case"dragover":this.nzOnDragOver.emit(e);break;case"dragleave":this.nzOnDragLeave.emit(e);break;case"dragend":this.nzOnDragEnd.emit(e);break;case"drop":this.renderTree(),this.nzOnDrop.emit(e);break}}renderTree(){this.handleFlattenNodes(this.nzTreeService.rootNodes,this.getExpandedNodeList().map(e=>e.key)),this.cdr.markForCheck()}constructor(e,n,t,d,o){super(e),this.nzConfigService=n,this.cdr=t,this.directionality=d,this.noAnimation=o,this._nzModuleName=li,this.nzShowIcon=!1,this.nzHideUnMatched=!1,this.nzBlockNode=!1,this.nzExpandAll=!1,this.nzSelectMode=!1,this.nzCheckStrictly=!1,this.nzShowExpand=!0,this.nzShowLine=!1,this.nzCheckable=!1,this.nzAsyncData=!1,this.nzDraggable=!1,this.nzMultiple=!1,this.nzVirtualItemSize=28,this.nzVirtualMaxBufferPx=500,this.nzVirtualMinBufferPx=28,this.nzVirtualHeight=null,this.nzData=[],this.nzExpandedKeys=[],this.nzSelectedKeys=[],this.nzCheckedKeys=[],this.nzSearchValue="",this.nzFlattenNodes=[],this.beforeInit=!0,this.dir="ltr",this.nzExpandedKeysChange=new S,this.nzSelectedKeysChange=new S,this.nzCheckedKeysChange=new S,this.nzSearchValueChange=new S,this.nzClick=new S,this.nzDblClick=new S,this.nzContextMenu=new S,this.nzCheckBoxChange=new S,this.nzExpandChange=new S,this.nzOnDragStart=new S,this.nzOnDragEnter=new S,this.nzOnDragOver=new S,this.nzOnDragLeave=new S,this.nzOnDrop=new S,this.nzOnDragEnd=new S,this.HIDDEN_STYLE={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},this.HIDDEN_NODE_STYLE={position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"},this.destroy$=new re,this.onChange=()=>null,this.onTouched=()=>null}ngOnInit(){this.nzTreeService.flattenNodes$.pipe(D(this.destroy$)).subscribe(e=>{this.nzFlattenNodes=this.nzVirtualHeight&&this.nzHideUnMatched&&this.nzSearchValue?.length>0?e.filter(n=>!n.canHide):e,this.cdr.markForCheck()}),this.dir=this.directionality.value,this.directionality.change?.pipe(D(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()})}ngOnChanges(e){this.renderTreeProperties(e)}ngAfterViewInit(){this.beforeInit=!1}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}};i.\u0275fac=function(n){return new(n||i)(v(X),v(st),v(ee),v(dt,8),v(ne,9))},i.\u0275cmp=N({type:i,selectors:[["nz-tree"]],contentQueries:function(n,t,d){if(n&1&&nt(d,Wn,7),n&2){let o;Ne(o=Te())&&(t.nzTreeTemplateChild=o.first)}},viewQuery:function(n,t){if(n&1&&tt(he,5,he),n&2){let d;Ne(d=Te())&&(t.cdkVirtualScrollViewport=d.first)}},hostVars:20,hostBindings:function(n,t){n&2&&T("ant-select-tree",t.nzSelectMode)("ant-select-tree-show-line",t.nzSelectMode&&t.nzShowLine)("ant-select-tree-icon-hide",t.nzSelectMode&&!t.nzShowIcon)("ant-select-tree-block-node",t.nzSelectMode&&t.nzBlockNode)("ant-tree",!t.nzSelectMode)("ant-tree-rtl",t.dir==="rtl")("ant-tree-show-line",!t.nzSelectMode&&t.nzShowLine)("ant-tree-icon-hide",!t.nzSelectMode&&!t.nzShowIcon)("ant-tree-block-node",!t.nzSelectMode&&t.nzBlockNode)("draggable-tree",t.nzDraggable)},inputs:{nzShowIcon:"nzShowIcon",nzHideUnMatched:"nzHideUnMatched",nzBlockNode:"nzBlockNode",nzExpandAll:"nzExpandAll",nzSelectMode:"nzSelectMode",nzCheckStrictly:"nzCheckStrictly",nzShowExpand:"nzShowExpand",nzShowLine:"nzShowLine",nzCheckable:"nzCheckable",nzAsyncData:"nzAsyncData",nzDraggable:"nzDraggable",nzMultiple:"nzMultiple",nzExpandedIcon:"nzExpandedIcon",nzVirtualItemSize:"nzVirtualItemSize",nzVirtualMaxBufferPx:"nzVirtualMaxBufferPx",nzVirtualMinBufferPx:"nzVirtualMinBufferPx",nzVirtualHeight:"nzVirtualHeight",nzTreeTemplate:"nzTreeTemplate",nzBeforeDrop:"nzBeforeDrop",nzData:"nzData",nzExpandedKeys:"nzExpandedKeys",nzSelectedKeys:"nzSelectedKeys",nzCheckedKeys:"nzCheckedKeys",nzSearchValue:"nzSearchValue",nzSearchFunc:"nzSearchFunc"},outputs:{nzExpandedKeysChange:"nzExpandedKeysChange",nzSelectedKeysChange:"nzSelectedKeysChange",nzCheckedKeysChange:"nzCheckedKeysChange",nzSearchValueChange:"nzSearchValueChange",nzClick:"nzClick",nzDblClick:"nzDblClick",nzContextMenu:"nzContextMenu",nzCheckBoxChange:"nzCheckBoxChange",nzExpandChange:"nzExpandChange",nzOnDragStart:"nzOnDragStart",nzOnDragEnter:"nzOnDragEnter",nzOnDragOver:"nzOnDragOver",nzOnDragLeave:"nzOnDragLeave",nzOnDrop:"nzOnDrop",nzOnDragEnd:"nzOnDragEnd"},exportAs:["nzTree"],standalone:!0,features:[Je([Vt,{provide:X,useFactory:oi},{provide:pt,useExisting:He(()=>i),multi:!0}]),Qe,$,B],decls:10,vars:6,consts:[[3,"ngStyle"],[1,"ant-tree-treenode",3,"ngStyle"],[1,"ant-tree-indent"],[1,"ant-tree-indent-unit"],[1,"ant-tree-list",2,"position","relative"],[3,"ant-select-tree-list-holder-inner","ant-tree-list-holder-inner","itemSize","minBufferPx","maxBufferPx","height",4,"ngIf"],[3,"ant-select-tree-list-holder-inner","ant-tree-list-holder-inner","nzNoAnimation",4,"ngIf"],["nodeTemplate",""],[3,"itemSize","minBufferPx","maxBufferPx"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"nzNoAnimation"],[4,"ngFor","ngForOf","ngForTrackBy"],["builtin","",3,"icon","title","isLoading","isSelected","isDisabled","isMatched","isExpanded","isLeaf","isStart","isEnd","isChecked","isHalfChecked","isDisableCheckbox","isSelectable","canHide","nzTreeNode","nzSelectMode","nzShowLine","nzExpandedIcon","nzDraggable","nzCheckable","nzShowExpand","nzAsyncData","nzSearchValue","nzHideUnMatched","nzBeforeDrop","nzShowIcon","nzTreeTemplate","nzExpandChange","nzClick","nzDblClick","nzContextMenu","nzCheckBoxChange","nzOnDragStart","nzOnDragEnter","nzOnDragOver","nzOnDragLeave","nzOnDragEnd","nzOnDrop"]],template:function(n,t){n&1&&(l(0,"div"),g(1,"input",0),a(),l(2,"div",1)(3,"div",2),g(4,"div",3),a()(),l(5,"div",4),u(6,Xn,2,11,"cdk-virtual-scroll-viewport",5)(7,ni,2,9,"div",6),a(),u(8,ii,1,28,"ng-template",null,7,be)),n&2&&(c(),h("ngStyle",t.HIDDEN_STYLE),c(),h("ngStyle",t.HIDDEN_NODE_STYLE),c(3),T("ant-select-tree-list",t.nzSelectMode),c(),h("ngIf",t.nzVirtualHeight),c(),h("ngIf",!t.nzVirtualHeight))},dependencies:[it,he,ct,K,ht,De,ne,we,Pt],encapsulation:2,data:{animation:[at]},changeDetection:0});let r=i;return x([k(),ce()],r.prototype,"nzShowIcon",void 0),x([k(),ce()],r.prototype,"nzHideUnMatched",void 0),x([k(),ce()],r.prototype,"nzBlockNode",void 0),x([k()],r.prototype,"nzExpandAll",void 0),x([k()],r.prototype,"nzSelectMode",void 0),x([k()],r.prototype,"nzCheckStrictly",void 0),x([k()],r.prototype,"nzShowExpand",void 0),x([k()],r.prototype,"nzShowLine",void 0),x([k()],r.prototype,"nzCheckable",void 0),x([k()],r.prototype,"nzAsyncData",void 0),x([k()],r.prototype,"nzDraggable",void 0),x([k()],r.prototype,"nzMultiple",void 0),r})(),At=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=H({type:i}),i.\u0275inj=F({imports:[Ue,Pt,Lt,Ot]});let r=i;return r})();function ci(r,i){if(r&1){let s=b();l(0,"nz-tree",7),f("nzClick",function(n){z(s);let t=p();return C(t.nzEvent(n))})("nzExpandChange",function(n){z(s);let t=p();return C(t.nzEvent(n))})("nzCheckBoxChange",function(n){z(s);let t=p();return C(t.nzEvent(n))}),a()}if(r&2){let s=p();h("nzData",s.node)("nzCheckedKeys",s.defaultCheckedKeys)("nzExpandedKeys",s.defaultExpandedKeys)("nzSelectedKeys",s.defaultSelectedKeys)}}var Ut=(()=>{let i=class i{constructor(e,n){this.service=e,this.route=n,this.id=null,this.item=[],this.modules=null,this.permissions=[],this.defaultCheckedKeys=[],this.defaultSelectedKeys=[],this.defaultExpandedKeys=[],this.node=null,n.params.subscribe(t=>{this.id=t.id})}ngOnInit(){this.service.api(`user/getUser/${this.id}?included=permissions`,"get").subscribe(e=>{console.log(e),this.item=e.data,this.checkPermission()}),this.service.api("user/getModules","get").subscribe(e=>{this.modules=e.data,console.log(e),this.makeNode()})}checkPermission(){this.defaultCheckedKeys=[],this.item.permissions.forEach(e=>{let n=""+e.module_id,t=""+e.id,d=n+"-"+t;this.defaultCheckedKeys.push(d),this.permissions.push(e.id)})}makeNode(){let e=[];this.modules.forEach(n=>{let t={};t.title=n.show.toUpperCase(),t.key=""+n.id,t.expanded=!0,t.children=[],n.permissions.forEach(d=>{let o={};o.title=d.show.toUpperCase(),o.key=n.id+"-"+d.id,o.isLeaf=!0,t.children.push(o)}),e.push(t)}),this.node=e}nzEvent(e){if(e.eventName=="check"){let n=[];e.nodes.forEach(t=>{if(t._children.length>0)t._children.forEach(d=>{let o=+d.key.split("-").pop();n.push(o)});else{let d=+t.key.split("-").pop();n.push(d)}}),this.permissions=n}}updatePermissions(){this.service.api("user/updatePermission","post",{user_id:this.id,permissions:this.permissions.join(",")}).subscribe(e=>{this.service.toast("success","Actualizaci\xF3n exitosa")},e=>{this.service.toast("error","Actualizaci\xF3n fallida")})}};i.\u0275fac=function(n){return new(n||i)(v(L),v(de))},i.\u0275cmp=N({type:i,selectors:[["app-user-permission"]],decls:10,vars:3,consts:[[1,"flex","my-2","ml-1"],[1,"btn-save",3,"click"],[1,"fa-solid","fa-key"],[1,"btn-list",3,"click"],[1,"fa-solid","fa-table"],[1,"fa-solid","fa-pen-to-square"],["nzCheckable","",3,"nzData","nzCheckedKeys","nzExpandedKeys","nzSelectedKeys"],["nzCheckable","",3,"nzData","nzCheckedKeys","nzExpandedKeys","nzSelectedKeys","nzClick","nzExpandChange","nzCheckBoxChange"]],template:function(n,t){n&1&&(l(0,"app-title"),m(1),a(),l(2,"div",0)(3,"button",1),f("click",function(){return t.updatePermissions()}),g(4,"i",2),a(),l(5,"a",3),f("click",function(){return t.service.goPage("user/index")}),g(6,"i",4),a(),l(7,"a",3),f("click",function(){return t.service.goPage("user/edit/"+t.item.id)}),g(8,"i",5),a()(),u(9,ci,1,4,"nz-tree",6)),n&2&&(c(),oe("ADMINISTRADOR: ",t.item.name," ",t.item.last_name,""),c(8),E(9,t.node?9:-1))},dependencies:[O,Ue]});let r=i;return r})();function hi(r,i){r&1&&g(0,"app-load")}function pi(r,i){if(r&1&&(l(0,"span",19),m(1),a()),r&2){let s=p();c(),y(s.errors.names)}}function mi(r,i){if(r&1&&(l(0,"span",19),m(1),a()),r&2){let s=p();c(),y(s.errors.surnames)}}function gi(r,i){if(r&1&&(l(0,"span",19),m(1),a()),r&2){let s=p();c(),y(s.errors.phone)}}function ui(r,i){if(r&1&&(l(0,"span",19),m(1),a()),r&2){let s=p();c(),y(s.errors.email)}}function fi(r,i){if(r&1&&(l(0,"span",19),m(1),a()),r&2){let s=p();c(),y(s.errors.password)}}function _i(r,i){if(r&1&&(l(0,"span",19),m(1),a()),r&2){let s=p();c(),y(s.errors.confirm)}}var Ft=(()=>{let i=class i{constructor(e){this.service=e,this.loading=!1,this.item={},this.errors=null,this.change={},this.getData()}getData(){this.service.api(`user/getUser/${this.service.user.id}`,"get").subscribe(e=>{this.item=e.data,console.log(e);let n=JSON.parse(localStorage.getItem("user")??"");n.names=this.item.names,n.surnames=this.item.surnames,n.email=this.item.email,n.image=this.item.image,n.storage=this.item.storage,localStorage.setItem("user",JSON.stringify(n))})}save(){this.loading=!0,this.errors=null,this.service.api(`user/updateUser/${this.service.user.id}`,"put",this.item).subscribe(e=>{this.loading=!1,this.getData(),this.service.toast("success","Datos Actualizados")},e=>{console.log(e),this.loading=!1,this.errors=e.error.errors,this.service.toast("error","Registro fallido")})}changePassword(){this.loading=!0,this.change.password===this.change.confirm?this.change.password.length<6?(this.service.toast("error","La contrasen\u0303a debe ser mayor a 6 caracteres"),this.loading=!1):this.service.api(`user/changePassword/${this.service.user.id}`,"post",this.change).subscribe(e=>{this.loading=!1,this.service.toast("success","Datos Actualizados")},e=>{this.loading=!1,this.service.toast("error","Registro fallido")}):(this.loading=!1,this.service.toast("error","Las contrasen\u0303as no coinciden"))}};i.\u0275fac=function(n){return new(n||i)(v(L))},i.\u0275cmp=N({type:i,selectors:[["app-user-profile"]],decls:64,vars:15,consts:[[4,"ngIf"],[1,"rounded-md","w-36","h-36","mx-auto",3,"src"],[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6","md:grid-cols-2"],[1,"label-form"],[1,"relative"],[1,"input-icon"],[1,"fa-solid","fa-signature","text-gray-500"],["name","names","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["class","error",4,"ngIf"],["name","surnames","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","phone","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","email","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],[1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center",3,"click"],[1,"fa-solid","fa-pen-to-square"],["model","User","storage","users",3,"id","message"],["name","password","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","confirm","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],[1,"error"]],template:function(n,t){n&1&&(u(0,hi,1,0,"app-load",0),l(1,"app-title"),m(2,"Actualizar Datos"),a(),g(3,"img",1),l(4,"form",2)(5,"div",3)(6,"div",4)(7,"div")(8,"label",5),m(9,"Nombres"),a(),l(10,"div",6)(11,"div",7),g(12,"i",8),a(),l(13,"input",9),f("ngModelChange",function(o){return t.item.names=o}),a()(),u(14,pi,2,1,"span",10),a(),l(15,"div")(16,"label",5),m(17,"Apellidos"),a(),l(18,"div",6)(19,"div",7),g(20,"i",8),a(),l(21,"input",11),f("ngModelChange",function(o){return t.item.surnames=o}),a()(),u(22,mi,2,1,"span",10),a(),l(23,"div")(24,"label",5),m(25,"Tel\xE9fono"),a(),l(26,"div",6)(27,"div",7),g(28,"i",8),a(),l(29,"input",12),f("ngModelChange",function(o){return t.item.phone=o}),a()(),u(30,gi,2,1,"span",10),a(),l(31,"div")(32,"label",5),m(33,"Correo Electr\xF3nico"),a(),l(34,"div",6)(35,"div",7),g(36,"i",8),a(),l(37,"input",13),f("ngModelChange",function(o){return t.item.email=o}),a()(),u(38,ui,2,1,"span",10),a()(),l(39,"button",14),f("click",function(){return t.save()}),g(40,"i",15),a(),l(41,"app-file",16),f("message",function(){return t.getData()}),a()()(),l(42,"form",2)(43,"div",3)(44,"div",4)(45,"div")(46,"label",5),m(47,"Contrase\xF1a Nueva"),a(),l(48,"div",6)(49,"div",7),g(50,"i",8),a(),l(51,"input",17),f("ngModelChange",function(o){return t.change.password=o}),a()(),u(52,fi,2,1,"span",10),a(),l(53,"div")(54,"label",5),m(55,"Confirmar Contrase\xF1a"),a(),l(56,"div",6)(57,"div",7),g(58,"i",8),a(),l(59,"input",18),f("ngModelChange",function(o){return t.change.confirm=o}),a()(),u(60,_i,2,1,"span",10),a()(),l(61,"button",14),f("click",function(){return t.changePassword()}),g(62,"i",15),m(63," CAMBIAR CONTRASE\xD1A "),a()()()),n&2&&(h("ngIf",t.loading),c(3),h("src",t.item.storage?t.service.apiUrl+"/"+t.item.storage:"assets/img/logo.png",ae),c(10),h("ngModel",t.item.names),c(),h("ngIf",t.errors),c(7),h("ngModel",t.item.surnames),c(),h("ngIf",t.errors),c(7),h("ngModel",t.item.phone),c(),h("ngIf",t.errors),c(7),h("ngModel",t.item.email),c(),h("ngIf",t.errors),c(3),h("id",t.item.id),c(10),h("ngModel",t.change.password),c(),h("ngIf",t.errors),c(7),h("ngModel",t.change.confirm),c(),h("ngIf",t.errors))},dependencies:[K,O,R,pe,Y,G,Q,Z,W,q]});let r=i;return r})();var zi=[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:kt,canActivate:[J],data:{access:["user.index"]}},{path:"create",component:Et,canActivate:[J],data:{access:["user.create"]}},{path:"edit/:id",component:Nt,canActivate:[J],data:{access:["user.edit"]}},{path:"permission/:id",component:Ut,canActivate:[J],data:{access:["user.permission"]}},{path:"profile",component:Ft,canActivate:[J],data:{access:["user.profile"]}}],Ht=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=H({type:i}),i.\u0275inj=F({imports:[Me.forChild(zi),Me]});let r=i;return r})();var Ir=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=H({type:i}),i.\u0275inj=F({imports:[rt,Ht,Ct,ft,St,At,xt,zt]});let r=i;return r})();export{Ir as UserModule};
