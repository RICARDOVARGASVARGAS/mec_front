import{l as ee,m as te,n as ie,o as ne}from"./chunk-F45RQ6PG.js";import"./chunk-HPHDTXNO.js";import"./chunk-PTD2UHZP.js";import{a as L}from"./chunk-3USFH6CF.js";import{$c as D,Aa as e,Ba as c,F as w,Fa as E,Ha as m,Hb as K,J as P,Ja as p,K as I,Lb as B,O as v,P as C,Pa as d,Q as $,Qa as h,R as G,Ra as b,Sc as k,Tc as M,Uc as Q,Vc as V,Xa as S,Yc as N,Zc as z,_c as A,aa as U,ad as F,bd as j,cd as O,ea as o,fa as y,gd as W,id as X,kd as T,ld as Y,md as Z,na as u,ua as g,va as _,xa as H,ya as q,za as t,zb as J}from"./chunk-XRNJ2UIA.js";var pe=(i,n)=>n.id;function ue(i,n){i&1&&c(0,"app-load")}function ge(i,n){if(i&1){let a=E();t(0,"a",8),m("click",function(){v(a);let s=p();return C(s.service.goPage("product/create"))}),c(1,"i",9),e()}}function fe(i,n){if(i&1){let a=E();t(0,"a",16),m("click",function(){v(a);let s=p().$implicit,l=p();return C(l.service.goPage("product/edit/"+s.id))}),c(1,"i",17),e()}}var _e=()=>["product.edit"];function xe(i,n){if(i&1&&(t(0,"tr",10)(1,"td",11),d(2),e(),t(3,"td",11),c(4,"p-image",12),e(),t(5,"td",13),d(6),e(),t(7,"td",13),d(8),e(),t(9,"td",13),d(10),e(),t(11,"td",13),d(12),e(),t(13,"td",14),g(14,fe,2,0,"a",15),e()()),i&2){let a=n.$implicit,r=p();o(2),b(" ",a.number," "),o(2),u("src",a.storage?r.service.apiUrl+"/"+a.storage:"assets/img/logo.png")("preview",!0),o(2),b(" ",a.name," "),o(2),b(" ",a.ticket," "),o(2),b(" ",a.price_buy," "),o(2),b(" ",a.price_sell," "),o(2),u("setPermission",S(8,_e))}}function he(i,n){if(i&1){let a=E();t(0,"nav",7)(1,"ul",18)(2,"li")(3,"a",19),m("click",function(){v(a);let s=p();return C(s.changePage(-1))}),$(),t(4,"svg",20),c(5,"path",21),e(),G(),t(6,"span"),d(7,"Anterior"),e()()(),t(8,"li")(9,"a",22),d(10),e()(),t(11,"li")(12,"a",23),m("click",function(){v(a);let s=p();return C(s.changePage(1))}),t(13,"span"),d(14,"Siguiente"),e(),$(),t(15,"svg",20),c(16,"path",24),e()()()(),G(),t(17,"span"),d(18),e()()}if(i&2){let a=p();o(10),b(" P\xE1gina ",a.meta.current_page,""),o(8),b("Total de Resultados: ",a.meta.total,"")}}var ve=()=>["product.create"],le=(()=>{let n=class n{constructor(r){this.service=r,this.per_page=null,this.search="",this.loading=!1,this.data=[],this.meta=null,this.actualPage=1,this.getData()}getData(r=[5,""]){this.per_page=r[0],this.search=r[1],this.list()}list(){this.loading=!0,this.service.api("mec/getProducts","post",{company_id:this.service.user.company_id,search:this.search,perPage:this.per_page}).subscribe(r=>{this.loading=!1,this.data=r.data,r.meta?this.meta=r.meta:this.meta=null},r=>{this.loading=!1,this.service.toast("error",r.error.message)})}get page(){return this.meta==null?"":`page=${this.actualPage}`}changePage(r){let s=this.actualPage+r;1<=s&&s<=this.meta.last_page?(this.actualPage+=r,this.list()):this.service.toast("warning","No hay m\xE1s p\xE1ginas")}};n.\u0275fac=function(s){return new(s||n)(y(k))},n.\u0275cmp=P({type:n,selectors:[["app-product-index"]],decls:28,vars:4,consts:[[3,"data"],["class","inline-flex items-center py-2.5 px-3 ml-2 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",3,"click",4,"setPermission"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[1,"sr-only"],["aria-label","Page navigation example"],[1,"inline-flex","items-center","py-2.5","px-3","ml-2","text-sm","font-medium","text-white","bg-blue-700","rounded-lg","border","border-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"fa-solid","fa-circle-plus"],[1,"bg-white","border-b","hover:bg-gray-50","text-gray-700"],[1,"px-6","py-4"],["alt","Perfil","width","30",3,"src","preview"],[1,"px-6","py-4","capitalize"],[1,"px-6","py-4","text-right","flex"],["class","ml-2 bg-blue-700 text-white px-2 py-1 rounded-full",3,"click",4,"setPermission"],[1,"ml-2","bg-blue-700","text-white","px-2","py-1","rounded-full",3,"click"],[1,"fa-solid","fa-marker"],[1,"flex","items-center","-space-x-px","h-10","text-base","mt-3"],["href","#","onclick","return false",1,"flex","items-center","justify-center","px-4","h-10","ml-0","leading-tight","text-gray-500","bg-white","border","border-gray-300","rounded-l-lg","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 6 10",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 1 1 5l4 4"],["href","#",1,"flex","items-center","justify-center","px-4","h-10","leading-tight","text-gray-500","bg-white","border","border-gray-300","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white"],["href","#","onclick","return false",1,"flex","items-center","justify-center","px-4","h-10","leading-tight","text-gray-500","bg-white","border","border-gray-300","rounded-r-lg","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 9 4-4-4-4"],["class","bg-white border-b hover:bg-gray-50 text-gray-700"]],template:function(s,l){s&1&&(g(0,ue,1,0,"app-load"),t(1,"app-title"),d(2,"Lista de Productos"),e(),t(3,"app-search",0),m("data",function(f){return l.getData(f)}),g(4,ge,2,0,"a",1),e(),t(5,"div",2)(6,"table",3)(7,"thead",4)(8,"tr")(9,"th",5),d(10,"ID"),e(),t(11,"th",5),d(12,"Foto"),e(),t(13,"th",5),d(14,"Producto"),e(),t(15,"th",5),d(16,"Boleta"),e(),t(17,"th",5),d(18,"P.Compra"),e(),t(19,"th",5),d(20,"P.Venta"),e(),t(21,"th",5)(22,"span",6),d(23,"Edit"),e()()()(),t(24,"tbody"),H(25,xe,15,9,"tr",25,pe),e()()(),g(27,he,19,2,"nav",7)),s&2&&(_(0,l.loading?0:-1),o(4),u("setPermission",S(3,ve)),o(21),q(l.data),o(2),_(27,l.meta?27:-1))},dependencies:[T,M,X,ie,V]});let i=n;return i})();function be(i,n){i&1&&(t(0,"app-load"),d(1,"Cargando ..."),e())}function ye(i,n){if(i&1&&(t(0,"span",17),d(1),e()),i&2){let a=p();o(),h(a.errors.name)}}function Ee(i,n){if(i&1&&(t(0,"span",17),d(1),e()),i&2){let a=p();o(),h(a.errors.ticket)}}function Pe(i,n){if(i&1&&(t(0,"span",17),d(1),e()),i&2){let a=p();o(),h(a.errors.price_buy)}}function Se(i,n){if(i&1&&(t(0,"span",17),d(1),e()),i&2){let a=p();o(),h(a.errors.price_sell)}}var de=(()=>{let n=class n{constructor(r){this.service=r,this.loading=!1,this.item={},this.errors=null}save(){this.loading=!0,this.errors=null,this.item.company_id=this.service.user.company_id,this.service.api("mec/registerProduct","post",this.item).subscribe(r=>{this.loading=!1,this.service.toast("success","Producto RegistradO"),this.service.goPage("product/edit/"+r.data.id)},r=>{console.log(r),this.loading=!1,this.errors=r.error.errors,this.service.toast("error","Registro fallido")})}};n.\u0275fac=function(s){return new(s||n)(y(k))},n.\u0275cmp=P({type:n,selectors:[["app-product-create"]],decls:43,vars:9,consts:[[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6","md:grid-cols-2"],[1,"label-form"],[1,"relative"],[1,"input-icon"],[1,"fa-solid","fa-signature","text-gray-500"],["name","name","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["class","error"],["name","ticket","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","price_buy","type","number","step","0.01","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","price_sell","type","number","step","0.01","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],[1,"flex"],[1,"btn-save",3,"click"],[1,"fa-solid","fa-floppy-disk"],[1,"btn-list",3,"click"],[1,"fa-solid","fa-table"],[1,"error"]],template:function(s,l){s&1&&(g(0,be,2,0,"app-load"),t(1,"app-title"),d(2,"Registrar Producto"),e(),t(3,"form",0)(4,"div",1)(5,"div",2)(6,"div")(7,"label",3),d(8,"Producto"),e(),t(9,"div",4)(10,"div",5),c(11,"i",6),e(),t(12,"input",7),m("ngModelChange",function(f){return l.item.name=f}),e()(),g(13,ye,2,1,"span",8),e(),t(14,"div")(15,"label",3),d(16,"Boleta"),e(),t(17,"div",4)(18,"div",5),c(19,"i",6),e(),t(20,"input",9),m("ngModelChange",function(f){return l.item.ticket=f}),e()(),g(21,Ee,2,1,"span",8),e(),t(22,"div")(23,"label",3),d(24,"P.Compra"),e(),t(25,"div",4)(26,"div",5),c(27,"i",6),e(),t(28,"input",10),m("ngModelChange",function(f){return l.item.price_buy=f}),e()(),g(29,Pe,2,1,"span",8),e(),t(30,"div")(31,"label",3),d(32,"P.Venta"),e(),t(33,"div",4)(34,"div",5),c(35,"i",6),e(),t(36,"input",11),m("ngModelChange",function(f){return l.item.price_sell=f}),e()(),g(37,Se,2,1,"span",8),e()(),t(38,"div",12)(39,"button",13),m("click",function(){return l.save()}),c(40,"i",14),e(),t(41,"a",15),m("click",function(){return l.service.goPage("product/index")}),c(42,"i",16),e()()()()),s&2&&(_(0,l.loading?0:-1),o(12),u("ngModel",l.item.name),o(),_(13,l.errors?13:-1),o(7),u("ngModel",l.item.ticket),o(),_(21,l.errors?21:-1),o(7),u("ngModel",l.item.price_buy),o(),_(29,l.errors?29:-1),o(7),u("ngModel",l.item.price_sell),o(),_(37,l.errors?37:-1))},dependencies:[T,M,j,N,O,z,A,F,D]});let i=n;return i})();function ke(i,n){i&1&&(t(0,"app-load"),d(1,"Cargando ..."),e())}function Me(i,n){if(i&1&&(t(0,"span",19),d(1),e()),i&2){let a=p();o(),h(a.errors.name)}}function Te(i,n){if(i&1&&(t(0,"span",19),d(1),e()),i&2){let a=p();o(),h(a.errors.ticket)}}function we(i,n){if(i&1&&(t(0,"span",19),d(1),e()),i&2){let a=p();o(),h(a.errors.price_buy)}}function Ie(i,n){if(i&1&&(t(0,"span",19),d(1),e()),i&2){let a=p();o(),h(a.errors.price_sell)}}function Ve(i,n){if(i&1){let a=E();t(0,"a",20),m("nzOnConfirm",function(){v(a);let s=p();return C(s.delete())})("nzOnCancel",function(){return""}),c(1,"i",21),e()}if(i&2){let a=p();u("nzPopconfirmTitle","Eliminar el Producto: "+a.item.name)}}function Ne(i,n){if(i&1){let a=E();t(0,"a",22),m("click",function(){v(a);let s=p();return C(s.service.goPage("product/index"))}),c(1,"i",23),e()}}function ze(i,n){if(i&1&&(t(0,"div",24),c(1,"img",25),e()),i&2){let a=p();o(),u("src",a.service.apiUrl+"/"+a.item.storage,U)}}var Ae=()=>["product.destroy"],De=()=>["product.index"],se=(()=>{let n=class n{constructor(r,s){this.service=r,this.route=s,this.id=null,this.loading=!1,this.item={},this.errors=null,s.params.subscribe(l=>{this.id=l.id,this.getData()})}getData(){this.service.api(`mec/getProduct/${this.id}`,"post").subscribe(r=>{this.item=r.data})}save(){this.loading=!0,this.errors=null,this.service.api(`mec/updateProduct/${this.id}`,"post",this.item).subscribe(r=>{this.loading=!1,this.service.toast("success","Producto Actualizado"),this.service.goPage("product/edit/"+r.data.id)},r=>{console.log(r),this.loading=!1,this.errors=r.error.errors,this.service.toast("error","Registro fallido")})}delete(){this.service.api(`mec/deleteProduct/${this.id}`,"delete").subscribe(r=>{this.service.toast("success","Producto Eliminado"),this.service.goPage("product/index")},r=>{console.log(r),this.service.toast("error","No se puede Eliminar")})}};n.\u0275fac=function(s){return new(s||n)(y(k),y(K))},n.\u0275cmp=P({type:n,selectors:[["app-product-edit"]],decls:45,vars:15,consts:[[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6","md:grid-cols-2"],[1,"label-form"],[1,"relative"],[1,"input-icon"],[1,"fa-solid","fa-signature","text-gray-500"],["name","name","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["class","error"],["name","ticket","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","price_buy","type","number","step","0.01","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","price_sell","type","number","step","0.01","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],[1,"flex"],[1,"btn-save",3,"click"],[1,"fa-solid","fa-pen-to-square"],["nz-popconfirm","","nzPopconfirmPlacement","top","nzOkText","ELIMINAR","nzCancelText","CANCELAR","class","btn-delete",3,"nzPopconfirmTitle","nzOnConfirm","nzOnCancel",4,"setPermission"],["class","btn-list",3,"click",4,"setPermission"],["model","Product","storage","products",3,"id","message"],["class","w-full flex items-center justify-center"],[1,"error"],["nz-popconfirm","","nzPopconfirmPlacement","top","nzOkText","ELIMINAR","nzCancelText","CANCELAR",1,"btn-delete",3,"nzPopconfirmTitle","nzOnConfirm","nzOnCancel"],[1,"fa-solid","fa-trash"],[1,"btn-list",3,"click"],[1,"fa-solid","fa-table"],[1,"w-full","flex","items-center","justify-center"],["alt","",1,"rounded-md","h-44","md:h-72",3,"src"]],template:function(s,l){s&1&&(g(0,ke,2,0,"app-load"),t(1,"app-title"),d(2,"Actualizar Marca"),e(),t(3,"form",0)(4,"div",1)(5,"div",2)(6,"div")(7,"label",3),d(8,"Producto"),e(),t(9,"div",4)(10,"div",5),c(11,"i",6),e(),t(12,"input",7),m("ngModelChange",function(f){return l.item.name=f}),e()(),g(13,Me,2,1,"span",8),e(),t(14,"div")(15,"label",3),d(16,"Boleta"),e(),t(17,"div",4)(18,"div",5),c(19,"i",6),e(),t(20,"input",9),m("ngModelChange",function(f){return l.item.ticket=f}),e()(),g(21,Te,2,1,"span",8),e(),t(22,"div")(23,"label",3),d(24,"P.Compra"),e(),t(25,"div",4)(26,"div",5),c(27,"i",6),e(),t(28,"input",10),m("ngModelChange",function(f){return l.item.price_buy=f}),e()(),g(29,we,2,1,"span",8),e(),t(30,"div")(31,"label",3),d(32,"P.Venta"),e(),t(33,"div",4)(34,"div",5),c(35,"i",6),e(),t(36,"input",11),m("ngModelChange",function(f){return l.item.price_sell=f}),e()(),g(37,Ie,2,1,"span",8),e()(),t(38,"div",12)(39,"button",13),m("click",function(){return l.save()}),c(40,"i",14),e(),g(41,Ve,2,1,"a",15)(42,Ne,2,0,"a",16),t(43,"app-file",17),m("message",function(){return l.getData()}),e()()()(),g(44,ze,2,1,"div",18)),s&2&&(_(0,l.loading?0:-1),o(12),u("ngModel",l.item.name),o(),_(13,l.errors?13:-1),o(7),u("ngModel",l.item.ticket),o(),_(21,l.errors?21:-1),o(7),u("ngModel",l.item.price_buy),o(),_(29,l.errors?29:-1),o(7),u("ngModel",l.item.price_sell),o(),_(37,l.errors?37:-1),o(4),u("setPermission",S(13,Ae)),o(),u("setPermission",S(14,De)),o(),u("id",l.id),o(),_(44,l.item.storage?44:-1))},dependencies:[T,M,Q,j,N,O,z,A,F,D,ee,V]});let i=n;return i})();var Fe=[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:le,canActivate:[L],data:{access:["product.index"]}},{path:"create",component:de,canActivate:[L],data:{access:["product.create"]}},{path:"edit/:id",component:se,canActivate:[L],data:{access:["product.edit"]}}],ce=(()=>{let n=class n{};n.\u0275fac=function(s){return new(s||n)},n.\u0275mod=I({type:n}),n.\u0275inj=w({imports:[B.forChild(Fe),B]});let i=n;return i})();var ct=(()=>{let n=class n{};n.\u0275fac=function(s){return new(s||n)},n.\u0275mod=I({type:n}),n.\u0275inj=w({imports:[J,ce,Z,W,te,ne,Y]});let i=n;return i})();export{ct as ProductModule};
