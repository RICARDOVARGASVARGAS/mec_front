import{l as ee,m as te,n as ie,o as ne}from"./chunk-F45RQ6PG.js";import"./chunk-HPHDTXNO.js";import"./chunk-PTD2UHZP.js";import{a as R}from"./chunk-3USFH6CF.js";import{$c as A,Aa as e,Ba as p,F as I,Fa as b,Ha as c,Hb as K,J as y,Ja as u,K as P,Lb as G,O as x,P as v,Pa as m,Q as O,Qa as h,R as $,Ra as S,Sc as T,Ta as B,Tc as k,Uc as Q,Vc as N,Xa as M,Yc as D,Zc as z,_c as V,aa as U,ad as F,bd as j,ea as o,fa as E,gd as W,id as X,kd as w,ld as Y,md as Z,na as g,ua as C,va as f,xa as H,ya as q,za as t,zb as J}from"./chunk-XRNJ2UIA.js";var ce=(i,n)=>n.id;function ue(i,n){i&1&&p(0,"app-load")}function ge(i,n){if(i&1){let r=b();t(0,"a",8),c("click",function(){x(r);let d=u();return v(d.service.goPage("client/create"))}),p(1,"i",9),e()}}function Ce(i,n){if(i&1){let r=b();t(0,"a",17),c("click",function(){x(r);let d=u().$implicit,a=u();return v(a.service.goPage("client/edit/"+d.id))}),p(1,"i",18),e()}}var fe=()=>["client.edit"];function _e(i,n){if(i&1&&(t(0,"tr",10)(1,"td",11),m(2),e(),t(3,"td",11),p(4,"p-image",12),e(),t(5,"td",13),m(6),e(),t(7,"td",14),m(8),e(),t(9,"td",14),m(10),e(),t(11,"td",15),C(12,Ce,2,0,"a",16),e()()),i&2){let r=n.$implicit,l=u();o(2),S(" ",r.number," "),o(2),g("src",r.storage?l.service.apiUrl+"/"+r.storage:"assets/img/logo.png")("preview",!0),o(2),S(" ",r.document," "),o(2),B(" ",r.name," ",r.surname," ",r.last_name," "),o(2),S(" ",r.phone," "),o(2),g("setPermission",M(9,fe))}}function he(i,n){if(i&1){let r=b();t(0,"nav",7)(1,"ul",19)(2,"li")(3,"a",20),c("click",function(){x(r);let d=u();return v(d.changePage(-1))}),O(),t(4,"svg",21),p(5,"path",22),e(),$(),t(6,"span"),m(7,"Anterior"),e()()(),t(8,"li")(9,"a",23),m(10),e()(),t(11,"li")(12,"a",24),c("click",function(){x(r);let d=u();return v(d.changePage(1))}),t(13,"span"),m(14,"Siguiente"),e(),O(),t(15,"svg",21),p(16,"path",25),e()()()(),$(),t(17,"span"),m(18),e()()}if(i&2){let r=u();o(10),S(" P\xE1gina ",r.meta.current_page,""),o(8),S("Total de Resultados: ",r.meta.total,"")}}var xe=()=>["client.create"],le=(()=>{let n=class n{constructor(l){this.service=l,this.per_page=null,this.search="",this.loading=!1,this.data=[],this.meta=null,this.actualPage=1,this.getData()}getData(l=[5,""]){this.per_page=l[0],this.search=l[1],this.list()}list(){this.loading=!0,this.service.api("mec/getClients","post",{company_id:this.service.user.company_id,search:this.search,perPage:this.per_page}).subscribe(l=>{this.loading=!1,this.data=l.data,l.meta?this.meta=l.meta:this.meta=null},l=>{this.loading=!1,this.service.toast("error",l.error.message)})}get page(){return this.meta==null?"":`page=${this.actualPage}`}changePage(l){let d=this.actualPage+l;1<=d&&d<=this.meta.last_page?(this.actualPage+=l,this.list()):this.service.toast("warning","No hay m\xE1s p\xE1ginas")}};n.\u0275fac=function(d){return new(d||n)(E(T))},n.\u0275cmp=y({type:n,selectors:[["app-client-index"]],decls:26,vars:4,consts:[[3,"data"],["class","inline-flex items-center py-2.5 px-3 ml-2 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",3,"click",4,"setPermission"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[1,"sr-only"],["aria-label","Page navigation example"],[1,"inline-flex","items-center","py-2.5","px-3","ml-2","text-sm","font-medium","text-white","bg-blue-700","rounded-lg","border","border-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"fa-solid","fa-circle-plus"],[1,"bg-white","border-b","hover:bg-gray-50","text-gray-700"],[1,"px-6","py-4"],["alt","Perfil","width","30",3,"src","preview"],[1,"px-6","py-4","uppercase"],[1,"px-6","py-4","capitalize"],[1,"px-6","py-4","text-right","flex"],["class","ml-2 bg-blue-700 text-white px-2 py-1 rounded-full",3,"click",4,"setPermission"],[1,"ml-2","bg-blue-700","text-white","px-2","py-1","rounded-full",3,"click"],[1,"fa-solid","fa-marker"],[1,"flex","items-center","-space-x-px","h-10","text-base","mt-3"],["href","#","onclick","return false",1,"flex","items-center","justify-center","px-4","h-10","ml-0","leading-tight","text-gray-500","bg-white","border","border-gray-300","rounded-l-lg","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewclient","0 0 6 10",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 1 1 5l4 4"],["href","#",1,"flex","items-center","justify-center","px-4","h-10","leading-tight","text-gray-500","bg-white","border","border-gray-300","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white"],["href","#","onclick","return false",1,"flex","items-center","justify-center","px-4","h-10","leading-tight","text-gray-500","bg-white","border","border-gray-300","rounded-r-lg","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 9 4-4-4-4"],["class","bg-white border-b hover:bg-gray-50 text-gray-700"]],template:function(d,a){d&1&&(C(0,ue,1,0,"app-load"),t(1,"app-title"),m(2,"Lista de Clientes"),e(),t(3,"app-search",0),c("data",function(s){return a.getData(s)}),C(4,ge,2,0,"a",1),e(),t(5,"div",2)(6,"table",3)(7,"thead",4)(8,"tr")(9,"th",5),m(10,"ID"),e(),t(11,"th",5),m(12,"Foto"),e(),t(13,"th",5),m(14,"Documento"),e(),t(15,"th",5),m(16,"Nombres Completos"),e(),t(17,"th",5),m(18,"Tel\xE9fono"),e(),t(19,"th",5)(20,"span",6),m(21,"Edit"),e()()()(),t(22,"tbody"),H(23,_e,13,10,"tr",26,ce),e()()(),C(25,he,19,2,"nav",7)),d&2&&(f(0,a.loading?0:-1),o(4),g("setPermission",M(3,xe)),o(19),q(a.data),o(2),f(25,a.meta?25:-1))},dependencies:[w,k,X,ie,N]});let i=n;return i})();function Ee(i,n){i&1&&(t(0,"app-load"),m(1,"Cargando ..."),e())}function be(i,n){if(i&1&&(t(0,"span",21),m(1),e()),i&2){let r=u();o(),h(r.errors.document)}}function ye(i,n){if(i&1&&(t(0,"span",21),m(1),e()),i&2){let r=u();o(),h(r.errors.name)}}function Se(i,n){if(i&1&&(t(0,"span",21),m(1),e()),i&2){let r=u();o(),h(r.errors.surname)}}function Me(i,n){if(i&1&&(t(0,"span",21),m(1),e()),i&2){let r=u();o(),h(r.errors.last_name)}}function Te(i,n){if(i&1&&(t(0,"span",21),m(1),e()),i&2){let r=u();o(),h(r.errors.phone)}}function ke(i,n){if(i&1&&(t(0,"span",21),m(1),e()),i&2){let r=u();o(),h(r.errors.email)}}function we(i,n){if(i&1&&(t(0,"span",21),m(1),e()),i&2){let r=u();o(),h(r.errors.address)}}var me=(()=>{let n=class n{constructor(l){this.service=l,this.loading=!1,this.item={},this.errors=null}save(){this.loading=!0,this.errors=null,this.item.company_id=this.service.user.company_id,this.service.api("mec/registerClient","post",this.item).subscribe(l=>{this.loading=!1,this.service.toast("success","Cliente Registrado"),this.service.goPage("client/edit/"+l.data.id)},l=>{console.log(l),this.loading=!1,this.errors=l.error.errors,this.service.toast("error","Registro fallido")})}generateRandomDocument(){this.item.document=Math.floor(1e14+Math.random()*9e14),this.item.document=this.item.document.toString()}};n.\u0275fac=function(d){return new(d||n)(E(T))},n.\u0275cmp=y({type:n,selectors:[["app-client-create"]],decls:68,vars:15,consts:[[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6","md:grid-cols-2"],[1,"hover:bg-blue-500","hover:cursor-pointer","rounded-md","hover:p-2",3,"click"],[1,"label-form"],[1,"relative"],[1,"input-icon"],[1,"fa-solid","fa-signature","text-gray-500"],["name","document","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["class","error"],["name","name","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","surname","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","last_name","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","phone","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","email","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","address","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],[1,"flex"],[1,"btn-save",3,"click"],[1,"fa-solid","fa-floppy-disk"],[1,"btn-list",3,"click"],[1,"fa-solid","fa-table"],[1,"error"]],template:function(d,a){d&1&&(C(0,Ee,2,0,"app-load"),t(1,"app-title"),m(2,"Registrar Cliente"),e(),t(3,"form",0)(4,"div",1)(5,"div",2)(6,"div")(7,"button",3),c("click",function(){return a.generateRandomDocument()}),t(8,"span",4),m(9,"Documento"),e()(),t(10,"div",5)(11,"div",6),p(12,"i",7),e(),t(13,"input",8),c("ngModelChange",function(s){return a.item.document=s}),e()(),C(14,be,2,1,"span",9),e(),t(15,"div")(16,"label",4),m(17,"Nombre"),e(),t(18,"div",5)(19,"div",6),p(20,"i",7),e(),t(21,"input",10),c("ngModelChange",function(s){return a.item.name=s}),e()(),C(22,ye,2,1,"span",9),e(),t(23,"div")(24,"label",4),m(25,"Apellido Paterno"),e(),t(26,"div",5)(27,"div",6),p(28,"i",7),e(),t(29,"input",11),c("ngModelChange",function(s){return a.item.surname=s}),e()(),C(30,Se,2,1,"span",9),e(),t(31,"div")(32,"label",4),m(33,"Apellido Materno"),e(),t(34,"div",5)(35,"div",6),p(36,"i",7),e(),t(37,"input",12),c("ngModelChange",function(s){return a.item.last_name=s}),e()(),C(38,Me,2,1,"span",9),e(),t(39,"div")(40,"label",4),m(41,"Tel\xE9fono"),e(),t(42,"div",5)(43,"div",6),p(44,"i",7),e(),t(45,"input",13),c("ngModelChange",function(s){return a.item.phone=s}),e()(),C(46,Te,2,1,"span",9),e(),t(47,"div")(48,"label",4),m(49,"Correo Electr\xF3nico"),e(),t(50,"div",5)(51,"div",6),p(52,"i",7),e(),t(53,"input",14),c("ngModelChange",function(s){return a.item.email=s}),e()(),C(54,ke,2,1,"span",9),e(),t(55,"div")(56,"label",4),m(57,"Direcci\xF3n"),e(),t(58,"div",5)(59,"div",6),p(60,"i",7),e(),t(61,"input",15),c("ngModelChange",function(s){return a.item.address=s}),e()(),C(62,we,2,1,"span",9),e()(),t(63,"div",16)(64,"button",17),c("click",function(){return a.save()}),p(65,"i",18),e(),t(66,"a",19),c("click",function(){return a.service.goPage("client/index")}),p(67,"i",20),e()()()()),d&2&&(f(0,a.loading?0:-1),o(13),g("ngModel",a.item.document),o(),f(14,a.errors?14:-1),o(7),g("ngModel",a.item.name),o(),f(22,a.errors?22:-1),o(7),g("ngModel",a.item.surname),o(),f(30,a.errors?30:-1),o(7),g("ngModel",a.item.last_name),o(),f(38,a.errors?38:-1),o(7),g("ngModel",a.item.phone),o(),f(46,a.errors?46:-1),o(7),g("ngModel",a.item.email),o(),f(54,a.errors?54:-1),o(7),g("ngModel",a.item.address),o(),f(62,a.errors?62:-1))},dependencies:[w,k,j,D,z,V,F,A]});let i=n;return i})();function Ie(i,n){i&1&&(t(0,"app-load"),m(1,"Cargando ..."),e())}function Pe(i,n){if(i&1&&(t(0,"span",22),m(1),e()),i&2){let r=u();o(),h(r.errors.document)}}function Ne(i,n){if(i&1&&(t(0,"span",22),m(1),e()),i&2){let r=u();o(),h(r.errors.name)}}function De(i,n){if(i&1&&(t(0,"span",22),m(1),e()),i&2){let r=u();o(),h(r.errors.surname)}}function ze(i,n){if(i&1&&(t(0,"span",22),m(1),e()),i&2){let r=u();o(),h(r.errors.last_name)}}function Ve(i,n){if(i&1&&(t(0,"span",22),m(1),e()),i&2){let r=u();o(),h(r.errors.phone)}}function Ae(i,n){if(i&1&&(t(0,"span",22),m(1),e()),i&2){let r=u();o(),h(r.errors.email)}}function Fe(i,n){if(i&1&&(t(0,"span",22),m(1),e()),i&2){let r=u();o(),h(r.errors.address)}}function je(i,n){if(i&1){let r=b();t(0,"a",23),c("nzOnConfirm",function(){x(r);let d=u();return v(d.delete())})("nzOnCancel",function(){return""}),p(1,"i",24),e()}if(i&2){let r=u();g("nzPopconfirmTitle","Eliminar Cliente: "+r.item.document+" "+r.item.name+" "+r.item.surname+" "+r.item.last_name+" ?")}}function Re(i,n){if(i&1){let r=b();t(0,"a",25),c("click",function(){x(r);let d=u();return v(d.service.goPage("client/index"))}),p(1,"i",26),e()}}function Le(i,n){if(i&1&&(t(0,"div",27),p(1,"img",28),e()),i&2){let r=u();o(),g("src",r.service.apiUrl+"/"+r.item.storage,U)}}var Oe=()=>["client.destroy"],$e=()=>["client.index"],de=(()=>{let n=class n{constructor(l,d){this.service=l,this.route=d,this.id=null,this.loading=!1,this.item={},this.errors=null,d.params.subscribe(a=>{this.id=a.id,this.getData()})}getData(){this.service.api(`mec/getClient/${this.id}`,"post").subscribe(l=>{this.item=l.data})}save(){this.loading=!0,this.errors=null,this.service.api(`mec/updateClient/${this.id}`,"post",this.item).subscribe(l=>{this.loading=!1,this.service.toast("success","Cliente Actualizado"),this.service.goPage("client/edit/"+l.data.id)},l=>{console.log(l),this.loading=!1,this.errors=l.error.errors,this.service.toast("error","Registro fallido")})}delete(){this.service.api(`mec/deleteClient/${this.id}`,"delete").subscribe(l=>{this.service.toast("success","Cliente Eliminado"),this.service.goPage("client/index")},l=>{console.log(l),this.service.toast("error","No se puede Eliminar")})}};n.\u0275fac=function(d){return new(d||n)(E(T),E(K))},n.\u0275cmp=y({type:n,selectors:[["app-client-edit"]],decls:69,vars:21,consts:[[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6","md:grid-cols-2"],[1,"label-form"],[1,"relative"],[1,"input-icon"],[1,"fa-solid","fa-signature","text-gray-500"],["name","document","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["class","error"],["name","name","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","surname","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","last_name","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","phone","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","email","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","address","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],[1,"flex"],[1,"btn-save",3,"click"],[1,"fa-solid","fa-pen-to-square"],["nz-popconfirm","","nzPopconfirmPlacement","top","nzOkText","ELIMINAR","nzCancelText","CANCELAR","class","btn-delete",3,"nzPopconfirmTitle","nzOnConfirm","nzOnCancel",4,"setPermission"],["class","btn-list",3,"click",4,"setPermission"],["model","Client","storage","clients",3,"id","message"],["class","w-full flex items-center justify-center"],[1,"error"],["nz-popconfirm","","nzPopconfirmPlacement","top","nzOkText","ELIMINAR","nzCancelText","CANCELAR",1,"btn-delete",3,"nzPopconfirmTitle","nzOnConfirm","nzOnCancel"],[1,"fa-solid","fa-trash"],[1,"btn-list",3,"click"],[1,"fa-solid","fa-table"],[1,"w-full","flex","items-center","justify-center"],["alt","",1,"rounded-md","h-44","md:h-72",3,"src"]],template:function(d,a){d&1&&(C(0,Ie,2,0,"app-load"),t(1,"app-title"),m(2,"Actualizar Cliente"),e(),t(3,"form",0)(4,"div",1)(5,"div",2)(6,"div")(7,"label",3),m(8,"Documento"),e(),t(9,"div",4)(10,"div",5),p(11,"i",6),e(),t(12,"input",7),c("ngModelChange",function(s){return a.item.document=s}),e()(),C(13,Pe,2,1,"span",8),e(),t(14,"div")(15,"label",3),m(16,"Nombre"),e(),t(17,"div",4)(18,"div",5),p(19,"i",6),e(),t(20,"input",9),c("ngModelChange",function(s){return a.item.name=s}),e()(),C(21,Ne,2,1,"span",8),e(),t(22,"div")(23,"label",3),m(24,"Apellido Paterno"),e(),t(25,"div",4)(26,"div",5),p(27,"i",6),e(),t(28,"input",10),c("ngModelChange",function(s){return a.item.surname=s}),e()(),C(29,De,2,1,"span",8),e(),t(30,"div")(31,"label",3),m(32,"Apellido Materno"),e(),t(33,"div",4)(34,"div",5),p(35,"i",6),e(),t(36,"input",11),c("ngModelChange",function(s){return a.item.last_name=s}),e()(),C(37,ze,2,1,"span",8),e(),t(38,"div")(39,"label",3),m(40,"Tel\xE9fono"),e(),t(41,"div",4)(42,"div",5),p(43,"i",6),e(),t(44,"input",12),c("ngModelChange",function(s){return a.item.phone=s}),e()(),C(45,Ve,2,1,"span",8),e(),t(46,"div")(47,"label",3),m(48,"Correo Electr\xF3nico"),e(),t(49,"div",4)(50,"div",5),p(51,"i",6),e(),t(52,"input",13),c("ngModelChange",function(s){return a.item.email=s}),e()(),C(53,Ae,2,1,"span",8),e(),t(54,"div")(55,"label",3),m(56,"Direcci\xF3n"),e(),t(57,"div",4)(58,"div",5),p(59,"i",6),e(),t(60,"input",14),c("ngModelChange",function(s){return a.item.address=s}),e()(),C(61,Fe,2,1,"span",8),e()(),t(62,"div",15)(63,"button",16),c("click",function(){return a.save()}),p(64,"i",17),e(),C(65,je,2,1,"a",18)(66,Re,2,0,"a",19),t(67,"app-file",20),c("message",function(){return a.getData()}),e()()()(),C(68,Le,2,1,"div",21)),d&2&&(f(0,a.loading?0:-1),o(12),g("ngModel",a.item.document),o(),f(13,a.errors?13:-1),o(7),g("ngModel",a.item.name),o(),f(21,a.errors?21:-1),o(7),g("ngModel",a.item.surname),o(),f(29,a.errors?29:-1),o(7),g("ngModel",a.item.last_name),o(),f(37,a.errors?37:-1),o(7),g("ngModel",a.item.phone),o(),f(45,a.errors?45:-1),o(7),g("ngModel",a.item.email),o(),f(53,a.errors?53:-1),o(7),g("ngModel",a.item.address),o(),f(61,a.errors?61:-1),o(4),g("setPermission",M(19,Oe)),o(),g("setPermission",M(20,$e)),o(),g("id",a.id),o(),f(68,a.item.storage?68:-1))},dependencies:[w,k,Q,j,D,z,V,F,A,ee,N]});let i=n;return i})();var Ge=[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:le,canActivate:[R],data:{access:["client.index"]}},{path:"create",component:me,canActivate:[R],data:{access:["client.create"]}},{path:"edit/:id",component:de,canActivate:[R],data:{access:["client.edit"]}}],se=(()=>{let n=class n{};n.\u0275fac=function(d){return new(d||n)},n.\u0275mod=P({type:n}),n.\u0275inj=I({imports:[G.forChild(Ge),G]});let i=n;return i})();var ft=(()=>{let n=class n{};n.\u0275fac=function(d){return new(d||n)},n.\u0275mod=P({type:n}),n.\u0275inj=I({imports:[J,se,Z,W,te,ne,Y]});let i=n;return i})();export{ft as ClientModule};
