import{a as be,b as ye,c as ze}from"./chunk-RFHNYTRN.js";import{a as F,b as L,c as Se}from"./chunk-PKP3HEYI.js";import{l as Y,m as xe,n as he,o as ve}from"./chunk-F45RQ6PG.js";import"./chunk-HPHDTXNO.js";import"./chunk-PTD2UHZP.js";import{a as G}from"./chunk-3USFH6CF.js";import{$c as O,Aa as i,Ba as d,Ca as ie,Da as ne,F as B,Fa as h,Ha as _,Hb as Q,J as S,Ja as p,Jb as j,K as J,Lb as le,O as C,P as x,Pa as s,Q as ee,Qa as v,R as te,Ra as y,Sa as ae,Sc as k,Tc as w,Ua as oe,Vc as $,Xa as z,Ya as R,Yc as W,Zc as I,_c as P,ad as M,bd as D,cd as X,ea as r,fa as b,gd as _e,ia as K,id as ge,kd as N,ld as fe,md as Ce,n as U,na as m,qa as me,qb as T,rb as V,ua as u,va as E,xa as de,ya as pe,za as a,zb as ue}from"./chunk-XRNJ2UIA.js";var De=(e,o)=>o.id;function Ne(e,o){e&1&&d(0,"app-load")}function Fe(e,o){if(e&1){let t=h();a(0,"a",8),_("click",function(){C(t);let l=p();return x(l.service.goPage("calculate/create"))}),d(1,"i",9),i()}}function Le(e,o){if(e&1&&s(0),e&2){let t=p().$implicit;oe(" ",t.client.document," - ",t.client.name," ",t.client.surname," ",t.client.last_name," ")}}function Ae(e,o){if(e&1&&s(0),e&2){let t=p().$implicit;oe(" ",t.car.client.document," - ",t.car.client.name," ",t.car.client.surname," ",t.car.client.last_name," ")}}function Re(e,o){if(e&1&&(d(0,"i",17)(1,"br"),a(2,"div"),s(3),d(4,"br"),s(5),d(6,"br"),i()),e&2){let t=p().$implicit;me("color:"+t.car.color.hex),r(3),ae(" ",t.car.plate," - ",t.car.example.name," "),r(2),ae(" ",t.car.brand.name," - ",t.car.year.name," ")}}var je=e=>["/report-calculate",e];function $e(e,o){if(e&1&&(a(0,"a",18),d(1,"i",19),i()),e&2){let t=p().$implicit;m("routerLink",R(1,je,t.id))}}function Ge(e,o){if(e&1){let t=h();a(0,"a",20),_("click",function(){C(t);let l=p().$implicit,c=p();return x(c.service.goPage("calculate/detail/"+l.id))}),d(1,"i",21),i()}}function qe(e,o){if(e&1){let t=h();a(0,"a",22),_("click",function(){C(t);let l=p().$implicit,c=p();return x(c.service.goPage("calculate/edit/"+l.id))}),d(1,"i",23),i()}}var He=()=>["calculate.print"],Ue=()=>["calculate.detail"],Be=()=>["calculate.edit"];function Je(e,o){if(e&1&&(a(0,"tr",10)(1,"td",11),s(2),i(),a(3,"td",12),u(4,Le,1,4),i(),a(5,"td",12),u(6,Ae,1,4),i(),a(7,"td",11),u(8,Re,7,6),i(),a(9,"td",13),u(10,$e,2,3,"a",14)(11,Ge,2,0,"a",15)(12,qe,2,0,"a",16),i()()),e&2){let t=o.$implicit;r(2),y("N\xB0 ",t.number,""),r(2),E(4,t.client?4:-1),r(2),E(6,t.car?6:-1),r(2),E(8,t.car?8:-1),r(2),m("setPermission",z(7,He)),r(),m("setPermission",z(8,Ue)),r(),m("setPermission",z(9,Be))}}function Ke(e,o){if(e&1){let t=h();a(0,"nav",7)(1,"ul",24)(2,"li")(3,"a",25),_("click",function(){C(t);let l=p();return x(l.changePage(-1))}),ee(),a(4,"svg",26),d(5,"path",27),i(),te(),a(6,"span"),s(7,"Anterior"),i()()(),a(8,"li")(9,"a",28),s(10),i()(),a(11,"li")(12,"a",29),_("click",function(){C(t);let l=p();return x(l.changePage(1))}),a(13,"span"),s(14,"Siguiente"),i(),ee(),a(15,"svg",26),d(16,"path",30),i()()()(),te(),a(17,"span"),s(18),i()()}if(e&2){let t=p();r(10),y(" P\xE1gina ",t.meta.current_page,""),r(8),y("Total de Resultados: ",t.meta.total,"")}}var Qe=()=>["calculate.create"],we=(()=>{let o=class o{constructor(n){this.service=n,this.per_page=null,this.search="",this.loading=!1,this.data=[],this.meta=null,this.actualPage=1,this.getData()}getData(n=[5,""]){this.per_page=n[0],this.search=n[1],this.list()}list(){this.loading=!0,this.service.api("calculate/getCalculates?included=client,car.client,car.brand,car.color,car.year,car.example","post",{company_id:this.service.user.company_id,search:this.search,perPage:this.per_page}).subscribe(n=>{this.loading=!1,this.data=n.data,n.meta?this.meta=n.meta:this.meta=null},n=>{this.loading=!1,this.service.toast("error",n.error.message)})}get page(){return this.meta==null?"":`page=${this.actualPage}`}changePage(n){let l=this.actualPage+n;1<=l&&l<=this.meta.last_page?(this.actualPage+=n,this.list()):this.service.toast("warning","No hay m\xE1s p\xE1ginas")}};o.\u0275fac=function(l){return new(l||o)(b(k))},o.\u0275cmp=S({type:o,selectors:[["app-calculate-index"]],decls:24,vars:4,consts:[[3,"data"],["class","inline-flex items-center py-2.5 px-3 ml-2 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",3,"click",4,"setPermission"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[1,"sr-only"],["aria-label","Page navigation example"],[1,"inline-flex","items-center","py-2.5","px-3","ml-2","text-sm","font-medium","text-white","bg-blue-700","rounded-lg","border","border-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"fa-solid","fa-circle-plus"],[1,"bg-white","border-b","hover:bg-gray-50","text-gray-700"],[1,"px-6","py-4"],[1,"px-6","py-4","capitalize"],[1,"px-6","py-4","flex","justify-center","items-center"],["target","_blank","class","ml-2 bg-sky-600 text-white px-2 py-1 rounded-full",3,"routerLink",4,"setPermission"],["class","ml-2 bg-green-700 text-white px-2 py-1 rounded-full",3,"click",4,"setPermission"],["class","ml-2 bg-blue-700 text-white px-2 py-1 rounded-full",3,"click",4,"setPermission"],[1,"fa-solid","fa-car-on","text-2xl"],["target","_blank",1,"ml-2","bg-sky-600","text-white","px-2","py-1","rounded-full",3,"routerLink"],[1,"fa-solid","fa-print"],[1,"ml-2","bg-green-700","text-white","px-2","py-1","rounded-full",3,"click"],[1,"fa-solid","fa-book"],[1,"ml-2","bg-blue-700","text-white","px-2","py-1","rounded-full",3,"click"],[1,"fa-solid","fa-marker"],[1,"flex","items-center","-space-x-px","h-10","text-base","mt-3"],["href","#","onclick","return false",1,"flex","items-center","justify-center","px-4","h-10","ml-0","leading-tight","text-gray-500","bg-white","border","border-gray-300","rounded-l-lg","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 6 10",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 1 1 5l4 4"],["href","#",1,"flex","items-center","justify-center","px-4","h-10","leading-tight","text-gray-500","bg-white","border","border-gray-300","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white"],["href","#","onclick","return false",1,"flex","items-center","justify-center","px-4","h-10","leading-tight","text-gray-500","bg-white","border","border-gray-300","rounded-r-lg","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 9 4-4-4-4"],["class","bg-white border-b hover:bg-gray-50 text-gray-700"]],template:function(l,c){l&1&&(u(0,Ne,1,0,"app-load"),a(1,"app-title"),s(2,"Lista de Cotizaciones"),i(),a(3,"app-search",0),_("data",function(g){return c.getData(g)}),u(4,Fe,2,0,"a",1),i(),a(5,"div",2)(6,"table",3)(7,"thead",4)(8,"tr")(9,"th",5),s(10,"N\xB0"),i(),a(11,"th",5),s(12,"Conductor"),i(),a(13,"th",5),s(14,"Propietario"),i(),a(15,"th",5),s(16,"Veh\xEDculo"),i(),a(17,"th",5)(18,"span",6),s(19,"Edit"),i()()()(),a(20,"tbody"),de(21,Je,13,10,"tr",31,De),i()()(),u(23,Ke,19,2,"nav",7)),l&2&&(E(0,c.loading?0:-1),r(4),m("setPermission",z(3,Qe)),r(17),pe(c.data),r(2),E(23,c.meta?23:-1))},dependencies:[j,N,w,ge,$]});let e=o;return e})();function We(e,o){e&1&&(a(0,"app-load"),s(1,"Cargando ..."),i())}function Xe(e,o){if(e&1&&d(0,"nz-option",16),e&2){let t=o.$implicit;m("nzLabel",t.plate+" - "+t.example.name+" - "+t.color.name+" - "+t.year.name+" / "+t.client.document+" - "+t.client.name+" "+t.client.surname+" "+t.client.last_name)("nzValue",t.id)}}function Ye(e,o){if(e&1&&(a(0,"span",17),s(1),i()),e&2){let t=p();r(),v(t.errors.car_id)}}function Ze(e,o){if(e&1&&d(0,"nz-option",6),e&2){let t=o.$implicit;m("nzLabel",t.document+" - "+t.name+" "+t.surname+" "+t.last_name)("nzValue",t.id)}}function et(e,o){if(e&1&&(a(0,"span",17),s(1),i()),e&2){let t=p();r(),v(t.errors.client_id)}}var Te=(()=>{let o=class o{constructor(n){this.service=n,this.loading=!1,this.item={},this.data=[],this.errors=null}ngOnInit(){this.getData()}getData(){this.loading=!0;let n=this.service.api("mec/getClients","post",{company_id:this.service.user.company_id,per_page:"all"}),l=this.service.api("mec/getCars?included=client,brand,color,year,example","post",{company_id:this.service.user.company_id,per_page:"all"}),c=U(n,l),f=[];c.subscribe(g=>{f.push(g.data)},g=>{console.log(g)},()=>{this.data.clients=f[0],this.data.cars=f[1],this.loading=!1})}save(){this.loading=!0,this.errors=null,this.item.company_id=this.service.user.company_id,this.service.api("calculate/registerCalculate","post",this.item).subscribe(n=>{this.loading=!1,this.service.toast("success","Venta Registrada"),this.service.goPage("calculate/edit/"+n.data.id)},n=>{console.log(n),this.loading=!1,this.errors=n.error.errors,this.service.toast("error","Registro fallido")})}};o.\u0275fac=function(l){return new(l||o)(b(k))},o.\u0275cmp=S({type:o,selectors:[["app-calculate-create"]],decls:27,vars:11,consts:[[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6","md:grid-cols-2"],[1,"label-form"],[1,"fa-brands","fa-medapps","text-red-600","font-bold"],["name","item.car_id","nzShowSearch","","nzAllowClear","","nzPlaceHolder","Selecciona un Veh\xEDculo",1,"w-full","p-1","bg-gray-200","rounded-lg","border-gray-300","border",3,"ngModel","ngModelChange"],["nzValue","jack",3,"nzLabel","nzValue"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],["name","item.client_id","nzShowSearch","","nzAllowClear","","nzPlaceHolder","Selecciona un Conductor",1,"w-full","p-1","bg-gray-200","rounded-lg","border-gray-300","border",3,"ngModel","ngModelChange"],["nzValue","jack",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[1,"flex"],[1,"btn-save",3,"click"],[1,"fa-solid","fa-floppy-disk"],[1,"btn-list",3,"click"],[1,"fa-solid","fa-table"],[3,"nzLabel","nzValue"],[1,"error"]],template:function(l,c){l&1&&(u(0,We,2,0,"app-load"),a(1,"app-title"),s(2,"Registrar Cotizacio\u0301n"),i(),a(3,"form",0)(4,"div",1)(5,"div",2)(6,"div")(7,"label",3),s(8,"Veh\xEDculo"),d(9,"i",4),i(),a(10,"nz-select",5),_("ngModelChange",function(g){return c.item.car_id=g}),d(11,"nz-option",6),u(12,Xe,1,2,"nz-option",7),i(),u(13,Ye,2,1,"span",8),i(),a(14,"div")(15,"label",3),s(16,"Conductor "),d(17,"i",4),i(),a(18,"nz-select",9),_("ngModelChange",function(g){return c.item.client_id=g}),d(19,"nz-option",6),u(20,Ze,1,2,"nz-option",10),i(),u(21,et,2,1,"span",8),i()(),a(22,"div",11)(23,"button",12),_("click",function(){return c.save()}),d(24,"i",13),i(),a(25,"a",14),_("click",function(){return c.service.goPage("calculate/index")}),d(26,"i",15),i()()()()),l&2&&(E(0,c.loading?0:-1),r(10),m("ngModel",c.item.car_id),r(),m("nzLabel","Ninguno")("nzValue",null),r(),m("ngForOf",c.data.cars),r(),m("ngIf",c.errors),r(5),m("ngModel",c.item.client_id),r(),m("nzLabel","Ninguno")("nzValue",null),r(),m("ngForOf",c.data.clients),r(),m("ngIf",c.errors))},dependencies:[T,V,N,w,D,I,P,M,O,F,L]});let e=o;return e})();function it(e,o){e&1&&(a(0,"app-load"),s(1,"Cargando ..."),i())}function nt(e,o){if(e&1&&d(0,"nz-option",6),e&2){let t=o.$implicit;m("nzLabel",t.plate+" - "+t.example.name+" - "+t.color.name+" - "+t.year.name+" / "+t.client.document+" - "+t.client.name+" "+t.client.surname+" "+t.client.last_name)("nzValue",t.id)}}function at(e,o){if(e&1&&(a(0,"span",16),s(1),i()),e&2){let t=p();r(),v(t.errors.car_id)}}function ot(e,o){if(e&1&&d(0,"nz-option",6),e&2){let t=o.$implicit;m("nzLabel",t.document+" - "+t.name+" "+t.surname+" "+t.last_name)("nzValue",t.id)}}function lt(e,o){if(e&1&&(a(0,"span",16),s(1),i()),e&2){let t=p();r(),v(t.errors.client_id)}}function rt(e,o){if(e&1){let t=h();a(0,"a",17),_("nzOnConfirm",function(){C(t);let l=p();return x(l.delete())})("nzOnCancel",function(){return""}),d(1,"i",18),i()}e&2&&m("nzPopconfirmTitle","Eliminar Venta")}function ct(e,o){if(e&1){let t=h();a(0,"a",19),_("click",function(){C(t);let l=p();return x(l.service.goPage("calculate/index"))}),d(1,"i",20),i()}}function st(e,o){if(e&1){let t=h();a(0,"a",19),_("click",function(){C(t);let l=p();return x(l.service.goPage("calculate/detail/"+l.item.id))}),d(1,"i",21),i()}}var mt=e=>["/report-calculate",e];function dt(e,o){if(e&1&&(a(0,"a",22),d(1,"i",23),i()),e&2){let t=p();m("routerLink",R(1,mt,t.item.id))}}var pt=()=>["calculate.destroy"],ut=()=>["calculate.index"],_t=()=>["calculate.detail"],gt=()=>["calculate.print"],Ve=(()=>{let o=class o{constructor(n,l){this.service=n,this.route=l,this.id=null,this.loading=!1,this.item={},this.data=[],this.errors=null,l.params.subscribe(c=>{this.id=c.id,this.getInfo(),this.getData()})}getInfo(){this.service.api(`calculate/getCalculate/${this.id}`,"post").subscribe(n=>{this.item=n.data})}getData(){this.loading=!0;let n=this.service.api("mec/getClients","post",{company_id:this.service.user.company_id,per_page:"all"}),l=this.service.api("mec/getCars?included=client,brand,color,year,example","post",{company_id:this.service.user.company_id,per_page:"all"}),c=U(n,l),f=[];c.subscribe(g=>{f.push(g.data)},g=>{console.log(g)},()=>{this.data.clients=f[0],this.data.cars=f[1],this.loading=!1})}save(){this.loading=!0,this.errors=null,this.item.company_id=this.service.user.company_id,this.service.api(`calculate/updateCalculate/${this.id}`,"post",this.item).subscribe(n=>{this.loading=!1,this.service.toast("success","Cotizaci\xF3n Actualizada"),this.service.goPage("calculate/edit/"+n.data.id)},n=>{console.log(n),this.loading=!1,this.errors=n.error.errors,this.service.toast("error","Registro fallido")})}delete(){this.service.api(`calculate/deleteCalculate/${this.id}`,"delete").subscribe(n=>{this.service.toast("success","Cotizaci\xF3n Eliminada"),this.service.goPage("calculate/index")},n=>{console.log(n),this.service.toast("error","No se puede Eliminar")})}};o.\u0275fac=function(l){return new(l||o)(b(k),b(Q))},o.\u0275cmp=S({type:o,selectors:[["app-calculate-edit"]],decls:29,vars:19,consts:[[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6","md:grid-cols-2"],[1,"label-form"],[1,"fa-brands","fa-medapps","text-red-600","font-bold"],["name","item.car_id","nzShowSearch","","nzAllowClear","","nzPlaceHolder","Selecciona un Veh\xEDculo",1,"w-full","p-1","bg-gray-200","rounded-lg","border-gray-300","border",3,"ngModel","ngModelChange"],["nzValue","jack",3,"nzLabel","nzValue"],["nzValue","jack",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],["name","item.client_id","nzShowSearch","","nzAllowClear","","nzPlaceHolder","Selecciona un Conductor",1,"w-full","p-1","bg-gray-200","rounded-lg","border-gray-300","border",3,"ngModel","ngModelChange"],[1,"flex"],[1,"btn-save",3,"click"],[1,"fa-solid","fa-pen-to-square"],["nz-popconfirm","","nzPopconfirmPlacement","top","nzOkText","ELIMINAR","nzCancelText","CANCELAR","class","btn-delete",3,"nzPopconfirmTitle","nzOnConfirm","nzOnCancel",4,"setPermission"],["class","btn-list",3,"click",4,"setPermission"],["class","btn-list",3,"routerLink",4,"setPermission"],[1,"error"],["nz-popconfirm","","nzPopconfirmPlacement","top","nzOkText","ELIMINAR","nzCancelText","CANCELAR",1,"btn-delete",3,"nzPopconfirmTitle","nzOnConfirm","nzOnCancel"],[1,"fa-solid","fa-trash"],[1,"btn-list",3,"click"],[1,"fa-solid","fa-table"],[1,"fa-solid","fa-book"],[1,"btn-list",3,"routerLink"],[1,"fa-solid","fa-print"]],template:function(l,c){l&1&&(u(0,it,2,0,"app-load"),a(1,"app-title"),s(2,"Actualizar Cotizacio\u0301n"),i(),a(3,"form",0)(4,"div",1)(5,"div",2)(6,"div")(7,"label",3),s(8,"Veh\xEDculo"),d(9,"i",4),i(),a(10,"nz-select",5),_("ngModelChange",function(g){return c.item.car_id=g}),d(11,"nz-option",6),u(12,nt,1,2,"nz-option",7),i(),u(13,at,2,1,"span",8),i(),a(14,"div")(15,"label",3),s(16,"Conductor "),d(17,"i",4),i(),a(18,"nz-select",9),_("ngModelChange",function(g){return c.item.client_id=g}),d(19,"nz-option",6),u(20,ot,1,2,"nz-option",7),i(),u(21,lt,2,1,"span",8),i()(),a(22,"div",10)(23,"button",11),_("click",function(){return c.save()}),d(24,"i",12),i(),u(25,rt,2,1,"a",13)(26,ct,2,0,"a",14)(27,st,2,0,"a",14)(28,dt,2,3,"a",15),i()()()),l&2&&(E(0,c.loading?0:-1),r(10),m("ngModel",c.item.car_id),r(),m("nzLabel","Ninguno")("nzValue",null),r(),m("ngForOf",c.data.cars),r(),m("ngIf",c.errors),r(5),m("ngModel",c.item.client_id),r(),m("nzLabel","Ninguno")("nzValue",null),r(),m("ngForOf",c.data.clients),r(),m("ngIf",c.errors),r(4),m("setPermission",z(15,pt)),r(),m("setPermission",z(16,ut)),r(),m("setPermission",z(17,_t)),r(),m("setPermission",z(18,gt)))},dependencies:[T,V,j,N,w,D,I,P,M,O,Y,$,F,L]});let e=o;return e})();function ft(e,o){e&1&&d(0,"app-load")}function Ct(e,o){if(e&1&&d(0,"nz-option",15),e&2){let t=o.$implicit;m("nzLabel",t.name)("nzValue",t.id)}}function xt(e,o){if(e&1&&(a(0,"span",16),s(1),i()),e&2){let t=p();r(),v(t.errors.product_id)}}function ht(e,o){if(e&1&&(a(0,"span",16),s(1),i()),e&2){let t=p();r(),v(t.errors.price_sell)}}function vt(e,o){if(e&1&&(a(0,"span",16),s(1),i()),e&2){let t=p();r(),v(t.errors.quantity)}}var Ie=(()=>{let o=class o{constructor(n){this.service=n,this.event=new K,this.item={},this.loading=!1,this.products=[],this.errors=null,this.item.quantity=1,this.getList()}getList(){this.loading=!0,this.service.api("mec/getProducts","post",{company_id:this.service.user.company_id}).subscribe(n=>{this.loading=!1,this.products=n.data},n=>{this.loading=!1,this.service.toast("error",n.error.message)})}select(n){let l=this.products.find(c=>c.id===n);this.item.price_buy=l.price_buy,this.item.price_sell=l.price_sell}save(){this.item.calculate_id=this.product.id,this.loading=!0,this.errors=null,this.service.api("calculate/addProduct","post",this.item).subscribe(n=>{this.event.emit(n.data),this.loading=!1,this.service.toast("success","Producto Agregado"),this.clean()},n=>{console.log(n),this.loading=!1,this.errors=n.error.errors,this.service.toast("error","Registro fallido")})}clean(){this.item={},this.item.quantity=1,this.item.date_sale=new Date().toISOString().slice(0,10)}};o.\u0275fac=function(l){return new(l||o)(b(k))},o.\u0275cmp=S({type:o,selectors:[["app-calculate-product"]],inputs:{product:"product"},outputs:{event:"event"},decls:29,vars:8,consts:[[4,"ngIf"],[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6"],[1,"label-form"],["name","item.product_id","nzShowSearch","","nzAllowClear","","nzPlaceHolder","Selecciona un Producto",1,"w-full","p-1","bg-gray-200","rounded-lg","border-gray-300","border",3,"ngModel","ngModelChange"],["nzValue","jack",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],[1,"relative"],[1,"input-icon"],[1,"fa-solid","fa-box","text-gray-500"],["name","price_sell","type","number","step","any","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","quantity","type","number","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],[1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center",3,"click"],[1,"fa-solid","fa-floppy-disk"],["nzValue","jack",3,"nzLabel","nzValue"],[1,"error"]],template:function(l,c){l&1&&(u(0,ft,1,0,"app-load",0),a(1,"form",1)(2,"div",2)(3,"div",3)(4,"div")(5,"label",4),s(6,"Producto"),i(),a(7,"nz-select",5),_("ngModelChange",function(g){return c.item.product_id=g})("ngModelChange",function(g){return c.select(g)}),u(8,Ct,1,2,"nz-option",6),i(),u(9,xt,2,1,"span",7),i(),a(10,"div")(11,"label",4),s(12,"S/. P.Venta Unitario"),i(),a(13,"div",8)(14,"div",9),d(15,"i",10),i(),a(16,"input",11),_("ngModelChange",function(g){return c.item.price_sell=g}),i()(),u(17,ht,2,1,"span",7),i(),a(18,"div")(19,"label",4),s(20,"Cantidad"),i(),a(21,"div",8)(22,"div",9),d(23,"i",10),i(),a(24,"input",12),_("ngModelChange",function(g){return c.item.quantity=g}),i()(),u(25,vt,2,1,"span",7),i()(),a(26,"button",13),_("click",function(){return c.save()}),d(27,"i",14),s(28," REGISTRAR "),i()()()),l&2&&(m("ngIf",c.loading),r(7),m("ngModel",c.item.product_id),r(),m("ngForOf",c.products),r(),m("ngIf",c.errors),r(7),m("ngModel",c.item.price_sell),r(),m("ngIf",c.errors),r(7),m("ngModel",c.item.quantity),r(),m("ngIf",c.errors))},dependencies:[T,V,w,D,W,X,I,P,M,O,F,L]});let e=o;return e})();function yt(e,o){e&1&&d(0,"app-load")}function zt(e,o){if(e&1&&d(0,"nz-option",14),e&2){let t=o.$implicit;m("nzLabel",t.name)("nzValue",t.id)}}function St(e,o){if(e&1&&(a(0,"span",15),s(1),i()),e&2){let t=p();r(),v(t.errors.service_id)}}function Et(e,o){if(e&1&&(a(0,"span",15),s(1),i()),e&2){let t=p();r(),v(t.errors.price_service)}}var Pe=(()=>{let o=class o{constructor(n){this.servicio=n,this.event=new K,this.item={},this.loading=!1,this.services=[],this.errors=null,this.getList()}getList(){this.loading=!0,this.servicio.api("mec/getServices","post",{company_id:this.servicio.user.company_id}).subscribe(n=>{console.log(n),this.services=n.data,this.loading=!1},n=>{this.loading=!1,this.service.toast("error",n.error.message)})}select(n){let l=this.services.find(c=>c.id===n);this.item.price_buy=l.price_buy,this.item.price_sell=l.price_sell}save(){this.item.calculate_id=this.service.id,this.loading=!0,this.errors=null,this.servicio.api("calculate/addService","post",this.item).subscribe(n=>{this.event.emit(n.data),this.loading=!1,this.servicio.toast("success","Servicio Agregado"),this.clean()},n=>{console.log(n),this.loading=!1,this.errors=n.error.errors,this.servicio.toast("error","Registro fallido")})}clean(){this.item={},this.item.date_service=new Date().toISOString().slice(0,10)}};o.\u0275fac=function(l){return new(l||o)(b(k))},o.\u0275cmp=S({type:o,selectors:[["app-calculate-service"]],inputs:{service:"service"},outputs:{event:"event"},decls:21,vars:6,consts:[[4,"ngIf"],[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6"],[1,"label-form"],["name","item.service_id","nzShowSearch","","nzAllowClear","","nzPlaceHolder","Selecciona un Servicio",1,"w-full","p-1","bg-gray-200","rounded-lg","border-gray-300","border",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],[1,"relative"],[1,"input-icon"],[1,"fa-solid","fa-box","text-gray-500"],["name","price_service","type","number","step","any","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],[1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center",3,"click"],[1,"fa-solid","fa-floppy-disk"],[3,"nzLabel","nzValue"],[1,"error"]],template:function(l,c){l&1&&(u(0,yt,1,0,"app-load",0),a(1,"form",1)(2,"div",2)(3,"div",3)(4,"div")(5,"label",4),s(6,"Servicio"),i(),a(7,"nz-select",5),_("ngModelChange",function(g){return c.item.service_id=g})("ngModelChange",function(g){return c.select(g)}),u(8,zt,1,2,"nz-option",6),i(),u(9,St,2,1,"span",7),i(),a(10,"div")(11,"label",4),s(12,"S/. P.Servicio"),i(),a(13,"div",8)(14,"div",9),d(15,"i",10),i(),a(16,"input",11),_("ngModelChange",function(g){return c.item.price_service=g}),i()(),u(17,Et,2,1,"span",7),i()(),a(18,"button",12),_("click",function(){return c.save()}),d(19,"i",13),s(20," REGISTRAR "),i()()()),l&2&&(m("ngIf",c.loading),r(7),m("ngModel",c.item.service_id),r(),m("ngForOf",c.services),r(),m("ngIf",c.errors),r(7),m("ngModel",c.item.price_service),r(),m("ngIf",c.errors))},dependencies:[T,V,w,D,W,X,I,P,M,O,F,L]});let e=o;return e})();function wt(e,o){e&1&&d(0,"app-load")}var Tt=e=>["/report-calculate",e];function Vt(e,o){if(e&1&&(a(0,"a",22),d(1,"i",23),i()),e&2){let t=p(2);m("routerLink",R(1,Tt,t.detail.calculate.id))}}function It(e,o){if(e&1){let t=h();a(0,"a",24),_("click",function(){C(t);let l=p(2);return x(l.service.goPage("calculate/edit/"+l.detail.calculate.id))}),d(1,"i",25),i()}}function Pt(e,o){if(e&1){let t=h();ie(0),a(1,"app-calculate-product",28),_("event",function(){C(t);let l=p(3);return x(l.getData())}),i(),ne()}if(e&2){let t=p(3);r(),m("product",t.detail.calculate)}}function Ot(e,o){if(e&1){let t=h();a(0,"nz-modal",26),_("nzVisibleChange",function(l){C(t);let c=p(2);return x(c.visible=l)})("nzOnCancel",function(){C(t);let l=p(2);return x(l.cancel())})("nzOnOk",function(){C(t);let l=p(2);return x(l.ok())}),u(1,Pt,2,1,"ng-container",27),i()}if(e&2){let t=p(2);m("nzVisible",t.visible)}}function Mt(e,o){if(e&1){let t=h();a(0,"tr",16)(1,"td",29),s(2),i(),a(3,"td",29),d(4,"p-image",30),i(),a(5,"td",31),s(6),i(),a(7,"td",32),s(8),i(),a(9,"td",29),s(10),i(),a(11,"td",29),s(12),i(),a(13,"td",33)(14,"a",34),_("nzOnConfirm",function(){let c=C(t).$implicit,f=p(2);return x(f.deleteProduct(c))})("nzOnCancel",function(){return""}),d(15,"i",35),i()()()}if(e&2){let t=o.$implicit,n=o.index,l=p(2);r(2),y(" ",n+1," "),r(2),m("src",t.storage?l.service.apiUrl+"/"+t.storage:"assets/img/logo.png")("preview",!0),r(2),v(t.name),r(2),v(t.pivot.quantity),r(2),y("S/. ",t.pivot.price_sell,""),r(2),y(" S/. ",t.pivot.price_sell*t.pivot.quantity," "),r(2),m("nzPopconfirmTitle","Eliminar Producto "+t.name+"?")}}function Dt(e,o){if(e&1){let t=h();ie(0),a(1,"app-calculate-service",37),_("event",function(){C(t);let l=p(3);return x(l.getData())}),i(),ne()}if(e&2){let t=p(3);r(),m("service",t.detail.calculate)}}function Nt(e,o){if(e&1){let t=h();a(0,"nz-modal",36),_("nzVisibleChange",function(l){C(t);let c=p(2);return x(c.visible=l)})("nzOnCancel",function(){C(t);let l=p(2);return x(l.cancel())})("nzOnOk",function(){C(t);let l=p(2);return x(l.ok())}),u(1,Dt,2,1,"ng-container",27),i()}if(e&2){let t=p(2);m("nzVisible",t.visible)}}function Ft(e,o){if(e&1){let t=h();a(0,"tr",16)(1,"td",29),s(2),i(),a(3,"td",29),d(4,"p-image",30),i(),a(5,"td",31),s(6),i(),a(7,"td",29),s(8),i(),a(9,"td",33)(10,"a",34),_("nzOnConfirm",function(){let c=C(t).$implicit,f=p(2);return x(f.deleteService(c))})("nzOnCancel",function(){return""}),d(11,"i",35),i()()()}if(e&2){let t=o.$implicit,n=o.index,l=p(2);r(2),y(" ",n+1," "),r(2),m("src",t.storage?l.service.apiUrl+"/"+t.storage:"assets/img/logo.png")("preview",!0),r(2),v(t.name),r(2),y("S/. ",t.pivot.price_service,""),r(2),m("nzPopconfirmTitle","Eliminar Servicio "+t.name+"?")}}var Lt=()=>["calculate.print"],At=()=>["calculate.edit"];function Rt(e,o){if(e&1){let t=h();a(0,"app-title"),s(1),u(2,Vt,2,3,"a",1)(3,It,2,0,"a",2),i(),a(4,"div",3)(5,"table",4)(6,"thead",5)(7,"tr")(8,"th",6),s(9,"TOTAL SERVICIOS"),i()()(),a(10,"tbody")(11,"tr",7)(12,"td",8),s(13),i()()()()(),a(14,"div",9)(15,"p",10),s(16,"PRODUCTOS"),i(),a(17,"button",11),_("click",function(){C(t);let l=p();return x(l.showModal("product"))}),d(18,"i",12),i(),u(19,Ot,2,1,"nz-modal",13),i(),a(20,"div",3)(21,"table",4)(22,"thead",5)(23,"tr")(24,"th",6),s(25,"ID"),i(),a(26,"th",6),s(27,"Foto"),i(),a(28,"th",6),s(29,"Producto"),i(),a(30,"th",6),s(31,"Cantidad"),i(),a(32,"th",6),s(33,"P.Venta"),i(),a(34,"th",6),s(35,"Total"),i(),a(36,"th",6)(37,"span",14),s(38,"Edit"),i()()()(),a(39,"tbody"),u(40,Mt,16,8,"tr",15),a(41,"tr",16),d(42,"td",17),a(43,"td",18),s(44),i()()()()(),a(45,"div",9)(46,"p",10),s(47,"SERVICIOS"),i(),a(48,"button",11),_("click",function(){C(t);let l=p();return x(l.showModal("service"))}),d(49,"i",19),i(),u(50,Nt,2,1,"nz-modal",20),i(),a(51,"div",3)(52,"table",4)(53,"thead",5)(54,"tr")(55,"th",6),s(56,"ID"),i(),a(57,"th",6),s(58,"Foto"),i(),a(59,"th",6),s(60,"Servicio"),i(),a(61,"th",6),s(62,"P.Servicio"),i(),a(63,"th",6)(64,"span",14),s(65,"Edit"),i()()()(),a(66,"tbody"),u(67,Ft,12,6,"tr",15),a(68,"tr",16),d(69,"td",21),a(70,"td",18),s(71),i()()()()()}if(e&2){let t=p();r(),y("Cotizaci\xF3n N\xB0 ",t.detail.calculate.id," "),r(),m("setPermission",z(10,Lt)),r(),m("setPermission",z(11,At)),r(10),y("S/. ",t.detail.total,""),r(6),m("ngIf",t.modal=="product"),r(21),m("ngForOf",t.detail.products),r(4),y(" S/. ",t.detail.totalProducts," "),r(6),m("ngIf",t.modal=="service"),r(17),m("ngForOf",t.detail.services),r(4),y(" S/. ",t.detail.totalServices," ")}}var Oe=(()=>{let o=class o{constructor(n,l){this.service=n,this.route=l,this.id=null,this.loading=!1,this.detail=null,this.modal="product",this.visible=!1,l.params.subscribe(c=>{this.id=c.id,this.getData()})}getData(){this.loading=!0,this.service.api(`calculate/getCalculateDetail/${this.id}`,"get").subscribe(n=>{this.detail=n,this.loading=!1},n=>{console.log(n),this.loading=!1})}showModal(n){this.modal=n,this.visible=!0}ok(){this.modal="",this.visible=!1}cancel(){this.modal="",this.visible=!1}deleteProduct(n){this.loading=!0,this.service.api("calculate/removeProduct","post",n.pivot).subscribe(l=>{this.loading=!1,this.service.toast("success","Producto Eliminado"),this.getData()},l=>{console.log(l),this.loading=!1,this.service.toast("error","Eliminacio\u0301n fallida")})}deleteService(n){this.loading=!0,this.service.api("calculate/removeService","post",n.pivot).subscribe(l=>{this.loading=!1,this.service.toast("success","Servicio Eliminado"),this.getData()},l=>{console.log(l),this.loading=!1,this.service.toast("error","Eliminacio\u0301n fallida")})}};o.\u0275fac=function(l){return new(l||o)(b(k),b(Q))},o.\u0275cmp=S({type:o,selectors:[["app-calculate-detail"]],decls:2,vars:2,consts:[[4,"ngIf"],["target","_blank","class","ml-2 bg-sky-600 text-white px-2 py-1 rounded-full",3,"routerLink",4,"setPermission"],["target","_blank","class","ml-2 bg-sky-600 text-white px-2 py-1 rounded-full",3,"click",4,"setPermission"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[1,"bg-white","border-b","hover:bg-gray-50","text-gray-700","font-bold"],[1,"px-6","py-4","text-green-700"],[1,"flex","items-center","justify-start","mt-2"],[1,"text-lg","font-bold"],["type","button",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-bold","rounded-lg","text-lg","py-2","px-3","m-1","focus:outline-none",3,"click"],[1,"fa-solid","fa-boxes-stacked"],["nzTitle","AGREGAR PRODUCTOS","nzOkDisabled","","nzOkText",".","nzCancelText","CANCELAR",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk",4,"ngIf"],[1,"sr-only"],["class","bg-white border-b hover:bg-gray-50 text-gray-700",4,"ngFor","ngForOf"],[1,"bg-white","border-b","hover:bg-gray-50","text-gray-700"],["colSpan","5",1,"px-6","py-4"],[1,"px-6","py-4","font-bold","text-green-600"],[1,"fa-solid","fa-gear"],["nzTitle","AGREGAR SERVICIOS","nzOkDisabled","","nzOkText",".","nzCancelText","CANCELAR",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk",4,"ngIf"],["colSpan","3",1,"px-6","py-4"],["target","_blank",1,"ml-2","bg-sky-600","text-white","px-2","py-1","rounded-full",3,"routerLink"],[1,"fa-solid","fa-print"],["target","_blank",1,"ml-2","bg-sky-600","text-white","px-2","py-1","rounded-full",3,"click"],[1,"fa-solid","fa-marker"],["nzTitle","AGREGAR PRODUCTOS","nzOkDisabled","","nzOkText",".","nzCancelText","CANCELAR",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],[3,"product","event"],[1,"px-6","py-4"],["alt","Perfil","width","30",3,"src","preview"],[1,"px-6","py-4","capitalize"],[1,"px-6","py-4","text-center"],[1,"px-6","py-4","text-right","flex"],["nz-popconfirm","","nzPopconfirmPlacement","top","nzOkText","ELIMINAR","nzCancelText","CANCELAR",1,"ml-2","text-white","bg-red-700","hover:bg-red-800","focus:ring-4","focus:outline-none","focus:ring-red-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center",3,"nzPopconfirmTitle","nzOnConfirm","nzOnCancel"],[1,"fa-solid","fa-circle-minus"],["nzTitle","AGREGAR SERVICIOS","nzOkDisabled","","nzOkText",".","nzCancelText","CANCELAR",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],[3,"service","event"]],template:function(l,c){l&1&&u(0,wt,1,0,"app-load",0)(1,Rt,72,12),l&2&&(m("ngIf",c.loading),r(),E(1,c.detail?1:-1))},dependencies:[T,V,j,N,w,Y,he,$,ye,be,Ie,Pe]});let e=o;return e})();var jt=[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:we,canActivate:[G],data:{access:["calculate.index"]}},{path:"create",component:Te,canActivate:[G],data:{access:["calculate.create"]}},{path:"edit/:id",component:Ve,canActivate:[G],data:{access:["calculate.edit"]}},{path:"detail/:id",component:Oe,canActivate:[G],data:{access:["calculate.detail"]}}],Me=(()=>{let o=class o{};o.\u0275fac=function(l){return new(l||o)},o.\u0275mod=J({type:o}),o.\u0275inj=B({imports:[le.forChild(jt),le]});let e=o;return e})();var Oi=(()=>{let o=class o{};o.\u0275fac=function(l){return new(l||o)},o.\u0275mod=J({type:o}),o.\u0275inj=B({imports:[ue,Me,Ce,_e,xe,ve,fe,Se,ze]});let e=o;return e})();export{Oi as CalculateModule};
