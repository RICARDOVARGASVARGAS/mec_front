import{a as $e,b as Ge,c as Ue}from"./chunk-RFHNYTRN.js";import{a as He,b as Qe,c as qe}from"./chunk-PKP3HEYI.js";import{l as W,m as je,n as Le,o as Re}from"./chunk-F45RQ6PG.js";import"./chunk-HPHDTXNO.js";import"./chunk-PTD2UHZP.js";import{a as $}from"./chunk-3USFH6CF.js";import{$c as j,A as ae,Aa as n,Ac as Me,Ba as p,Bc as ke,C as re,Ca as B,Da as V,F as k,Fa as b,Gc as Oe,Ha as u,Hb as Q,J as S,Ja as c,K as O,Lb as ee,N as le,O as _,Oa as ge,P as h,Pa as m,Q as K,Qa as w,R as X,Ra as x,Sc as E,Tc as z,Ua as fe,Uc as Be,Va as xe,Vc as q,Wa as _e,Wb as te,Wc as Ve,Xa as T,Yc as P,Za as H,Zc as F,_c as A,aa as se,ad as L,ba as me,bc as Ee,bd as R,cc as ze,cd as Ne,ea as s,f as oe,fa as C,fb as he,gb as ve,gd as De,ha as de,ia as U,ib as Ce,id as Pe,j as G,jb as be,kd as I,ld as Fe,md as Ae,na as d,pa as ce,pb as Se,qb as N,rb as D,sa as Y,sc as we,tc as Te,ua as g,uc as Ie,va as y,xa as pe,ya as ue,za as a,zb as ye}from"./chunk-XRNJ2UIA.js";var at=(e,i)=>i.id;function rt(e,i){e&1&&p(0,"app-load")}function lt(e,i){if(e&1){let o=b();a(0,"a",8),u("click",function(){_(o);let r=c();return h(r.service.goPage("box/create"))}),p(1,"i",9),n()}}function st(e,i){if(e&1){let o=b();a(0,"a",16),u("click",function(){_(o);let r=c().$implicit,l=c();return h(l.service.goPage("box/show/"+r.id))}),p(1,"i",17),n()}}function mt(e,i){if(e&1){let o=b();a(0,"a",16),u("click",function(){_(o);let r=c().$implicit,l=c();return h(l.service.goPage("box/edit/"+r.id))}),p(1,"i",18),n()}}var dt=()=>["box.show"],ct=()=>["box.edit"];function pt(e,i){if(e&1&&(a(0,"tr",10)(1,"td",11),m(2),n(),a(3,"td",11),p(4,"p-image",12),n(),a(5,"td",13),m(6),n(),a(7,"td",14),g(8,st,2,0,"a",15)(9,mt,2,0,"a",15),n()()),e&2){let o=i.$implicit,t=c();s(2),x(" ",o.number," "),s(2),d("src",o.storage?t.service.apiUrl+"/"+o.storage:"assets/img/logo.png")("preview",!0),s(2),x(" ",o.name," "),s(2),d("setPermission",T(6,dt)),s(),d("setPermission",T(7,ct))}}function ut(e,i){if(e&1){let o=b();a(0,"nav",7)(1,"ul",19)(2,"li")(3,"a",20),u("click",function(){_(o);let r=c();return h(r.changePage(-1))}),K(),a(4,"svg",21),p(5,"path",22),n(),X(),a(6,"span"),m(7,"Anterior"),n()()(),a(8,"li")(9,"a",23),m(10),n()(),a(11,"li")(12,"a",24),u("click",function(){_(o);let r=c();return h(r.changePage(1))}),a(13,"span"),m(14,"Siguiente"),n(),K(),a(15,"svg",21),p(16,"path",25),n()()()(),X(),a(17,"span"),m(18),n()()}if(e&2){let o=c();s(10),x(" P\xE1gina ",o.meta.current_page,""),s(8),x("Total de Resultados: ",o.meta.total,"")}}var gt=()=>["box.create"],We=(()=>{let i=class i{constructor(t){this.service=t,this.per_page=null,this.search="",this.loading=!1,this.data=[],this.meta=null,this.actualPage=1,this.getData()}getData(t=[5,""]){this.per_page=t[0],this.search=t[1],this.list()}list(){this.loading=!0,this.service.api("mec/getBoxes","post",{company_id:this.service.user.company_id,search:this.search,perPage:this.per_page}).subscribe(t=>{this.loading=!1,this.data=t.data,t.meta?this.meta=t.meta:this.meta=null},t=>{this.loading=!1,this.service.toast("error",t.error.message)})}get page(){return this.meta==null?"":`page=${this.actualPage}`}changePage(t){let r=this.actualPage+t;1<=r&&r<=this.meta.last_page?(this.actualPage+=t,this.list()):this.service.toast("warning","No hay m\xE1s p\xE1ginas")}};i.\u0275fac=function(r){return new(r||i)(C(E))},i.\u0275cmp=S({type:i,selectors:[["app-box-index"]],decls:22,vars:4,consts:[[3,"data"],["class","inline-flex items-center py-2.5 px-3 ml-2 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",3,"click",4,"setPermission"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[1,"sr-only"],["aria-label","Page navigation example"],[1,"inline-flex","items-center","py-2.5","px-3","ml-2","text-sm","font-medium","text-white","bg-blue-700","rounded-lg","border","border-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"fa-solid","fa-circle-plus"],[1,"bg-white","border-b","hover:bg-gray-50","text-gray-700"],[1,"px-6","py-4"],["alt","Perfil","width","30",3,"src","preview"],[1,"px-6","py-4","capitalize"],[1,"px-6","py-4","text-right","flex"],["class","ml-2 bg-blue-700 text-white px-2 py-1 rounded-full",3,"click",4,"setPermission"],[1,"ml-2","bg-blue-700","text-white","px-2","py-1","rounded-full",3,"click"],[1,"fa-solid","fa-book-open"],[1,"fa-solid","fa-marker"],[1,"flex","items-center","-space-x-px","h-10","text-base","mt-3"],["href","#","onclick","return false",1,"flex","items-center","justify-center","px-4","h-10","ml-0","leading-tight","text-gray-500","bg-white","border","border-gray-300","rounded-l-lg","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 6 10",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 1 1 5l4 4"],["href","#",1,"flex","items-center","justify-center","px-4","h-10","leading-tight","text-gray-500","bg-white","border","border-gray-300","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white"],["href","#","onclick","return false",1,"flex","items-center","justify-center","px-4","h-10","leading-tight","text-gray-500","bg-white","border","border-gray-300","rounded-r-lg","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 9 4-4-4-4"],["class","bg-white border-b hover:bg-gray-50 text-gray-700"]],template:function(r,l){r&1&&(g(0,rt,1,0,"app-load"),a(1,"app-title"),m(2,"Lista de Cajas"),n(),a(3,"app-search",0),u("data",function(v){return l.getData(v)}),g(4,lt,2,0,"a",1),n(),a(5,"div",2)(6,"table",3)(7,"thead",4)(8,"tr")(9,"th",5),m(10,"ID"),n(),a(11,"th",5),m(12,"Foto"),n(),a(13,"th",5),m(14,"Caja"),n(),a(15,"th",5)(16,"span",6),m(17,"Edit"),n()()()(),a(18,"tbody"),pe(19,pt,10,8,"tr",26,at),n()()(),g(21,ut,19,2,"nav",7)),r&2&&(y(0,l.loading?0:-1),s(4),d("setPermission",T(3,gt)),s(15),ue(l.data),s(2),y(21,l.meta?21:-1))},dependencies:[I,z,Pe,Le,q]});let e=i;return e})();function ft(e,i){e&1&&(a(0,"app-load"),m(1,"Cargando ..."),n())}function xt(e,i){if(e&1&&(a(0,"span",14),m(1),n()),e&2){let o=c();s(),w(o.errors.name)}}var Je=(()=>{let i=class i{constructor(t){this.service=t,this.loading=!1,this.item={},this.errors=null}save(){this.loading=!0,this.errors=null,this.item.company_id=this.service.user.company_id,this.service.api("mec/registerBox","post",this.item).subscribe(t=>{this.loading=!1,this.service.toast("success","Caja Registrada"),this.service.goPage("box/edit/"+t.data.id)},t=>{console.log(t),this.loading=!1,this.errors=t.error.errors,this.service.toast("error","Registro fallido")})}};i.\u0275fac=function(r){return new(r||i)(C(E))},i.\u0275cmp=S({type:i,selectors:[["app-box-create"]],decls:19,vars:3,consts:[[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6","md:grid-cols-2"],[1,"label-form"],[1,"relative"],[1,"input-icon"],[1,"fa-solid","fa-signature","text-gray-500"],["name","name","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["class","error"],[1,"flex"],[1,"btn-save",3,"click"],[1,"fa-solid","fa-floppy-disk"],[1,"btn-list",3,"click"],[1,"fa-solid","fa-table"],[1,"error"]],template:function(r,l){r&1&&(g(0,ft,2,0,"app-load"),a(1,"app-title"),m(2,"Registrar Caja"),n(),a(3,"form",0)(4,"div",1)(5,"div",2)(6,"div")(7,"label",3),m(8,"Caja"),n(),a(9,"div",4)(10,"div",5),p(11,"i",6),n(),a(12,"input",7),u("ngModelChange",function(v){return l.item.name=v}),n()(),g(13,xt,2,1,"span",8),n()(),a(14,"div",9)(15,"button",10),u("click",function(){return l.save()}),p(16,"i",11),n(),a(17,"a",12),u("click",function(){return l.service.goPage("box/index")}),p(18,"i",13),n()()()()),r&2&&(y(0,l.loading?0:-1),s(12),d("ngModel",l.item.name),s(),y(13,l.errors?13:-1))},dependencies:[I,z,R,P,F,A,L,j]});let e=i;return e})();function vt(e,i){e&1&&(a(0,"app-load"),m(1,"Cargando ..."),n())}function Ct(e,i){if(e&1&&(a(0,"span",16),m(1),n()),e&2){let o=c();s(),w(o.errors.name)}}function bt(e,i){if(e&1){let o=b();a(0,"a",17),u("nzOnConfirm",function(){_(o);let r=c();return h(r.delete())})("nzOnCancel",function(){return""}),p(1,"i",18),n()}if(e&2){let o=c();d("nzPopconfirmTitle","Eliminar Caja: "+o.item.name)}}function St(e,i){if(e&1){let o=b();a(0,"a",19),u("click",function(){_(o);let r=c();return h(r.service.goPage("box/index"))}),p(1,"i",20),n()}}function yt(e,i){if(e&1&&(a(0,"div",21),p(1,"img",22),n()),e&2){let o=c();s(),d("src",o.service.apiUrl+"/"+o.item.storage,se)}}var Et=()=>["box.destroy"],zt=()=>["box.index"],Ke=(()=>{let i=class i{constructor(t,r){this.service=t,this.route=r,this.id=null,this.loading=!1,this.item={},this.errors=null,r.params.subscribe(l=>{this.id=l.id,this.getData()})}getData(){this.service.api(`mec/getBox/${this.id}`,"post").subscribe(t=>{this.item=t.data})}save(){this.loading=!0,this.errors=null,this.service.api(`mec/updateBox/${this.id}`,"post",this.item).subscribe(t=>{this.loading=!1,this.service.toast("success","Caja Actualizada"),this.service.goPage("box/edit/"+t.data.id)},t=>{console.log(t),this.loading=!1,this.errors=t.error.errors,this.service.toast("error","Registro fallido")})}delete(){this.service.api(`mec/deleteBox/${this.id}`,"delete").subscribe(t=>{this.service.toast("success","Caja Eliminada"),this.service.goPage("box/index")},t=>{console.log(t),this.service.toast("error","No se puede Eliminar")})}};i.\u0275fac=function(r){return new(r||i)(C(E),C(Q))},i.\u0275cmp=S({type:i,selectors:[["app-box-edit"]],decls:21,vars:9,consts:[[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6","md:grid-cols-2"],[1,"label-form"],[1,"relative"],[1,"input-icon"],[1,"fa-solid","fa-signature","text-gray-500"],["name","name","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["class","error"],[1,"flex"],[1,"btn-save",3,"click"],[1,"fa-solid","fa-pen-to-square"],["nz-popconfirm","","nzPopconfirmPlacement","top","nzOkText","ELIMINAR","nzCancelText","CANCELAR","class","btn-delete",3,"nzPopconfirmTitle","nzOnConfirm","nzOnCancel",4,"setPermission"],["class","btn-list",3,"click",4,"setPermission"],["model","Box","storage","boxes",3,"id","message"],["class","w-full flex items-center justify-center"],[1,"error"],["nz-popconfirm","","nzPopconfirmPlacement","top","nzOkText","ELIMINAR","nzCancelText","CANCELAR",1,"btn-delete",3,"nzPopconfirmTitle","nzOnConfirm","nzOnCancel"],[1,"fa-solid","fa-trash"],[1,"btn-list",3,"click"],[1,"fa-solid","fa-table"],[1,"w-full","flex","items-center","justify-center"],["alt","",1,"rounded-md","h-44","md:h-72",3,"src"]],template:function(r,l){r&1&&(g(0,vt,2,0,"app-load"),a(1,"app-title"),m(2,"Actualizar Caja"),n(),a(3,"form",0)(4,"div",1)(5,"div",2)(6,"div")(7,"label",3),m(8,"Caja"),n(),a(9,"div",4)(10,"div",5),p(11,"i",6),n(),a(12,"input",7),u("ngModelChange",function(v){return l.item.name=v}),n()(),g(13,Ct,2,1,"span",8),n()(),a(14,"div",9)(15,"button",10),u("click",function(){return l.save()}),p(16,"i",11),n(),g(17,bt,2,1,"a",12)(18,St,2,0,"a",13),a(19,"app-file",14),u("message",function(){return l.getData()}),n()()()(),g(20,yt,2,1,"div",15)),r&2&&(y(0,l.loading?0:-1),s(12),d("ngModel",l.item.name),s(),y(13,l.errors?13:-1),s(4),d("setPermission",T(7,Et)),s(),d("setPermission",T(8,zt)),s(),d("id",l.id),s(),y(20,l.item.storage?20:-1))},dependencies:[I,z,Be,R,P,F,A,L,j,W,q]});let e=i;return e})();var wt=["itemLabels"],Tt=()=>({"ant-segmented-thumb":!0,"ant-segmented-thumb-motion":!0});function It(e,i){if(e&1){let o=b();a(0,"div",3),u("@thumbMotion.done",function(r){_(o);let l=c();return h(l.handleThumbAnimationDone(r))}),n()}if(e&2){let o=c();d("ngClass",T(2,Tt))("@thumbMotion",o.animationState)}}function Mt(e,i){if(e&1&&(B(0),m(1),V()),e&2){let o=c(2).$implicit;s(),x(" ",o.label," ")}}var Ye=(e,i)=>({$implicit:e,index:i});function kt(e,i){if(e&1&&(B(0),a(1,"span",9),p(2,"span",10),n(),a(3,"span"),g(4,Mt,2,1,"ng-container",11),n(),V()),e&2){let o=c(),t=o.$implicit,r=o.index,l=c();s(2),d("nzType",t.icon),s(2),d("nzStringTemplateOutlet",t.useTemplate&&l.nzLabelTemplate)("nzStringTemplateOutletContext",H(3,Ye,t,r))}}function Ot(e,i){if(e&1&&(B(0),m(1),V()),e&2){let o=c(2).$implicit;s(),x(" ",o.label," ")}}function Bt(e,i){if(e&1&&g(0,Ot,2,1,"ng-container",11),e&2){let o=c(),t=o.$implicit,r=o.index,l=c();d("nzStringTemplateOutlet",t.useTemplate&&l.nzLabelTemplate)("nzStringTemplateOutletContext",H(2,Ye,t,r))}}var Vt=(e,i)=>({"ant-segmented-item":!0,"ant-segmented-item-selected":e,"ant-segmented-item-disabled":i});function Nt(e,i){if(e&1){let o=b();a(0,"label",3,4),p(2,"input",5),a(3,"div",6),u("click",function(){let r=_(o),l=r.$implicit,f=r.index,v=c();return h(!l.disabled&&v.handleOptionClick(f))}),g(4,kt,5,6,"ng-container",7)(5,Bt,1,5,"ng-template",null,8,be),n()()}if(e&2){let o=i.$implicit,t=i.index,r=ge(6),l=c();d("ngClass",H(4,Vt,t===l.selectedIndex,!!l.nzDisabled||o.disabled)),s(2),d("checked",t===l.selectedIndex),s(2),d("ngIf",o.icon)("ngIfElse",r)}}function Dt(e){return e.map(i=>typeof i=="string"||typeof i=="number"?{label:`${i}`,value:i}:i)}var Pt="segmented",ne=(()=>{let i=class i{constructor(t,r,l){this.nzConfigService=t,this.cdr=r,this.directionality=l,this._nzModuleName=Pt,this.nzBlock=!1,this.nzDisabled=!1,this.nzOptions=[],this.nzSize="default",this.nzLabelTemplate=null,this.nzValueChange=new U,this.dir="ltr",this.selectedIndex=0,this.transitionedToIndex=-1,this.animationState=null,this.normalizedOptions=[],this.destroy$=new oe,this.onChange=()=>{},this.onTouched=()=>{},this.directionality.change?.pipe(ae(this.destroy$)).subscribe(f=>{this.dir=f,this.cdr.detectChanges()})}ngOnChanges(t){let{nzOptions:r}=t;r&&(this.normalizedOptions=Dt(r.currentValue))}handleOptionClick(t){this.nzDisabled||(this.changeSelectedIndex(t),this.onChange(t),this.nzValueChange.emit(t))}handleThumbAnimationDone(t){t.fromState==="from"&&(this.selectedIndex=this.transitionedToIndex,this.transitionedToIndex=-1,this.animationState=null,this.cdr.detectChanges())}writeValue(t){typeof t=="number"&&t>-1&&(this.changeSelectedIndex(t),this.cdr.markForCheck())}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}changeSelectedIndex(t){!this.listOfOptions||this.selectedIndex===-1||this.selectedIndex===t||(this.animationState={value:"from",params:Xe(this.listOfOptions.get(this.selectedIndex).nativeElement)},this.selectedIndex=-1,this.cdr.detectChanges(),this.animationState={value:"to",params:Xe(this.listOfOptions.get(t).nativeElement)},this.transitionedToIndex=t,this.cdr.detectChanges())}};i.\u0275fac=function(r){return new(r||i)(C(Ee),C(de),C(Oe,8))},i.\u0275cmp=S({type:i,selectors:[["nz-segmented"]],viewQuery:function(r,l){if(r&1&&ve(wt,5,me),r&2){let f;he(f=Ce())&&(l.listOfOptions=f)}},hostAttrs:[1,"ant-segmented"],hostVars:10,hostBindings:function(r,l){r&2&&ce("ant-segmented-disabled",!!l.nzDisabled)("ant-segmented-rtl",l.dir==="rtl")("ant-segmented-lg",l.nzSize==="large")("ant-segmented-sm",l.nzSize==="small")("ant-segmented-block",!!l.nzBlock)},inputs:{nzBlock:"nzBlock",nzDisabled:"nzDisabled",nzOptions:"nzOptions",nzSize:"nzSize",nzLabelTemplate:"nzLabelTemplate"},outputs:{nzValueChange:"nzValueChange"},exportAs:["nzSegmented"],standalone:!0,features:[xe([{provide:Ve,useExisting:re(()=>i),multi:!0}]),le,_e],decls:3,vars:2,consts:[[1,"ant-segmented-group"],[3,"ngClass",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["itemLabels",""],["type","radio",1,"ant-segmented-item-input",3,"checked"],[1,"ant-segmented-item-label",3,"click"],[4,"ngIf","ngIfElse"],["else_template",""],[1,"ant-segmented-item-icon"],["nz-icon","",3,"nzType"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"]],template:function(r,l){r&1&&(a(0,"div",0),g(1,It,1,3,"div",1)(2,Nt,7,7,"label",2),n()),r&2&&(s(),d("ngIf",l.animationState),s(),d("ngForOf",l.normalizedOptions))},dependencies:[D,Se,N,ke,Me,Ie,Te],encapsulation:2,data:{animation:[we]},changeDetection:0});let e=i;return G([te()],e.prototype,"nzBlock",void 0),G([te()],e.prototype,"nzDisabled",void 0),G([ze()],e.prototype,"nzSize",void 0),e})();function Xe(e){return{transform:e.offsetLeft,width:e.clientWidth}}var et=(()=>{let i=class i{};i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=O({type:i}),i.\u0275inj=k({imports:[ne]});let e=i;return e})();function jt(e,i){e&1&&p(0,"app-load")}function Lt(e,i){if(e&1&&p(0,"nz-option",18),e&2){let o=i.$implicit;d("nzLabel",o.document+" - "+o.name+" "+o.surname+" "+o.last_name)("nzValue",o.id)}}function Rt(e,i){if(e&1&&(a(0,"span",19),m(1),n()),e&2){let o=c();s(),w(o.errors.client_id)}}function $t(e,i){if(e&1&&(a(0,"span",19),m(1),n()),e&2){let o=c();s(),w(o.errors.detail)}}function Gt(e,i){if(e&1&&(a(0,"span",19),m(1),n()),e&2){let o=c();s(),w(o.errors.amount)}}function Ut(e,i){if(e&1&&(a(0,"span",19),m(1),n()),e&2){let o=c();s(),w(o.errors.date_movement)}}var tt=(()=>{let i=class i{constructor(t){this.service=t,this.event=new U,this.item={},this.loading=!1,this.errors=null,this.clients=null,this.item.date_movement=new Date().toISOString().slice(0,10),this.getList()}getList(){this.loading=!0,this.service.api("mec/getClients","post",{company_id:this.service.user.company_id}).subscribe(t=>{this.loading=!1,this.clients=t.data},t=>{this.loading=!1,this.service.toast("error",t.error.message)})}save(){this.item.box_id=this.box.id,this.loading=!0,this.errors=null,this.service.api("mec/addMovement","post",this.item).subscribe(t=>{this.event.emit(t.data),this.loading=!1,this.service.toast("success","Movimiento Agregado"),this.clean()},t=>{console.log(t),this.loading=!1,this.errors=t.error.errors,this.service.toast("error","Registro fallido")})}clean(){this.item={},this.item.date_movement=new Date().toISOString().slice(0,10)}};i.\u0275fac=function(r){return new(r||i)(C(E))},i.\u0275cmp=S({type:i,selectors:[["app-box-movement"]],inputs:{box:"box"},outputs:{event:"event"},decls:38,vars:10,consts:[[4,"ngIf"],[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6"],[1,"label-form"],[1,"fa-brands","fa-medapps","text-red-600","font-bold"],["name","item.client_id","nzShowSearch","","nzAllowClear","","nzPlaceHolder","Selecciona un Producto",1,"w-full","p-1","bg-gray-200","rounded-lg","border-gray-300","border",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],[1,"relative"],[1,"input-icon"],[1,"fa-solid","fa-box","text-gray-500"],["name","detail","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["name","amount","type","number","step","any","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],[1,"fa-solid","fa-calendar-days","text-gray-500"],["name","date_movement","type","date","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],[1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center",3,"click"],[1,"fa-solid","fa-floppy-disk"],[3,"nzLabel","nzValue"],[1,"error"]],template:function(r,l){r&1&&(g(0,jt,1,0,"app-load",0),a(1,"form",1)(2,"div",2)(3,"div",3)(4,"div")(5,"label",4),m(6,"Cliente "),p(7,"i",5),n(),a(8,"nz-select",6),u("ngModelChange",function(v){return l.item.client_id=v}),g(9,Lt,1,2,"nz-option",7),n(),g(10,Rt,2,1,"span",8),n(),a(11,"div")(12,"label",4),m(13,"Detalle"),n(),a(14,"div",9)(15,"div",10),p(16,"i",11),n(),a(17,"input",12),u("ngModelChange",function(v){return l.item.detail=v}),n()(),g(18,$t,2,1,"span",8),n(),a(19,"div")(20,"label",4),m(21,"S/. Monto"),n(),a(22,"div",9)(23,"div",10),p(24,"i",11),n(),a(25,"input",13),u("ngModelChange",function(v){return l.item.amount=v}),n()(),g(26,Gt,2,1,"span",8),n(),a(27,"div")(28,"label",4),m(29,"Fecha Movimiento"),n(),a(30,"div",9)(31,"div",10),p(32,"i",14),n(),a(33,"input",15),u("ngModelChange",function(v){return l.item.date_movement=v}),n()(),g(34,Ut,2,1,"span",8),n()(),a(35,"button",16),u("click",function(){return l.save()}),p(36,"i",17),m(37," REGISTRAR "),n()()()),r&2&&(d("ngIf",l.loading),s(8),d("ngModel",l.item.client_id),s(),d("ngForOf",l.clients),s(),d("ngIf",l.errors),s(7),d("ngModel",l.item.detail),s(),d("ngIf",l.errors),s(7),d("ngModel",l.item.amount),s(),d("ngIf",l.errors),s(7),d("ngModel",l.item.date_movement),s(),d("ngIf",l.errors))},dependencies:[N,D,z,R,P,Ne,F,A,L,j,He,Qe]});let e=i;return e})();function Qt(e,i){e&1&&p(0,"app-load")}function qt(e,i){if(e&1){let o=b();B(0),a(1,"app-box-movement",17),u("event",function(){_(o);let r=c(2);return h(r.getData())}),n(),V()}if(e&2){let o=c(2);s(),d("box",o.item)}}function Wt(e,i){if(e&1&&(a(0,"div"),m(1),n()),e&2){let o=c().$implicit;s(),fe(" ",o.client.document," - ",o.client.name," ",o.client.surname," ",o.client.last_name," ")}}function Zt(e,i){if(e&1){let o=b();a(0,"tr",18)(1,"td",19),m(2),n(),a(3,"td",19),m(4),n(),a(5,"td",20),g(6,Wt,2,4,"div",0),n(),a(7,"td",19),m(8),n(),a(9,"td",19)(10,"span"),m(11),n()(),a(12,"td",21)(13,"span"),m(14),n()(),a(15,"td",19)(16,"a",22),u("nzOnConfirm",function(){let l=_(o).$implicit,f=c(2);return h(f.deleteMovement(l))})("nzOnCancel",function(){return""}),p(17,"i",23),n()()()}if(e&2){let o=i.$implicit;s(2),x(" ",o.number," "),s(2),x(" ",o.detail," "),s(2),d("ngIf",o.client_id),s(2),x(" ",o.date_movement," "),s(2),Y("",o.amount>0?"bg-green-500":"bg-red-500"," p-1 rounded-lg text-white "),s(),x(" ",o.amount>0?"INGRESO":"EGRESO"," "),s(2),Y("",o.amount>0?"text-green-500":"text-red-500"," p-1 rounded-lg text-white "),s(),x(" S/. ",(o.amount>0,o.amount)," "),s(2),d("nzPopconfirmTitle","Eliminar Movimiento"+o.amount+"?")}}function Jt(e,i){if(e&1){let o=b();a(0,"div",5)(1,"div",6)(2,"p",7),m(3,"MOVIMIENTOS"),n(),a(4,"button",8),u("click",function(){_(o);let r=c();return h(r.showModal())}),p(5,"i",9),n(),a(6,"nz-modal",10),u("nzVisibleChange",function(r){_(o);let l=c();return h(l.visible=r)})("nzOnCancel",function(){_(o);let r=c();return h(r.cancel())})("nzOnOk",function(){_(o);let r=c();return h(r.ok())}),g(7,qt,2,1,"ng-container",11),n()(),a(8,"table",12)(9,"thead",13)(10,"tr")(11,"th",14),m(12,"ID"),n(),a(13,"th",14),m(14,"Detalle"),n(),a(15,"th",14),m(16,"Cliente"),n(),a(17,"th",14),m(18,"Fecha"),n(),a(19,"th",14),m(20,"Estado"),n(),a(21,"th",14),m(22,"Monto"),n(),a(23,"th",14)(24,"span",15),m(25,"Edit"),n()()()(),a(26,"tbody"),g(27,Zt,18,13,"tr",16),n()()()}if(e&2){let o=c();s(6),d("nzVisible",o.visible),s(21),d("ngForOf",o.movements)}}function Kt(e,i){if(e&1){let o=b();a(0,"tr",18)(1,"td",19),m(2),n(),a(3,"td",19),m(4),n(),a(5,"td",20)(6,"a",24),u("click",function(){let l=_(o).$implicit,f=c(2);return h(f.service.goPage("sale/detail/"+l.sale.id))}),m(7),n()(),a(8,"td",19),m(9),n(),a(10,"td",25),m(11),n()()}if(e&2){let o=i.$implicit;s(2),x(" ",o.number," "),s(2),x(" ",o.detail," "),s(3),x(" Venta N\xB0 ",o.sale.number," "),s(2),x(" ",o.date_payment," "),s(2),x(" S/. ",o.amount," ")}}function Xt(e,i){if(e&1&&(a(0,"div",5)(1,"table",12)(2,"thead",13)(3,"tr")(4,"th",14),m(5,"ID"),n(),a(6,"th",14),m(7,"Detalle"),n(),a(8,"th",14),m(9,"Venta"),n(),a(10,"th",14),m(11,"Fecha"),n(),a(12,"th",14),m(13,"Monto"),n()()(),a(14,"tbody"),g(15,Kt,12,5,"tr",16),n()()()),e&2){let o=c();s(15),d("ngForOf",o.payments)}}function Yt(e,i){if(e&1&&(a(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29),m(4),n()(),a(5,"div",26)(6,"div",30),m(7),n()(),a(8,"div",26)(9,"div",30),m(10),n()()()()),e&2){let o=c();s(4),x(" TOTAL: S/. ",o.total," "),s(3),x(" MOVIMIENTOS: S/. ",o.totalMovements," "),s(3),x(" PAGOS: S/. ",o.totalPayments," ")}}var it=(()=>{let i=class i{constructor(t,r){this.service=t,this.route=r,this.id=null,this.loading=!1,this.item={},this.errors=null,this.movements=[],this.totalMovements=0,this.payments=[],this.totalPayments=0,this.modal="Movimientos",this.total=0,this.visible=!1,this.options=["Movimientos","Caja","Pagos"],r.params.subscribe(l=>{this.id=l.id,this.getData()})}getData(){this.loading=!0,this.service.api(`mec/getDetailBox/${this.id}`,"get").subscribe(t=>{this.item=t.box,this.movements=t.movements,this.totalMovements=t.totalMovements,this.payments=t.payments,this.totalPayments=t.totalPayments,this.total=t.total,this.loading=!1})}change(t){this.modal=this.options[t]}deleteMovement(t){this.service.api(`mec/removeMovement/${t.id}`,"delete").subscribe(r=>{this.getData(),this.service.toast("success","Movimiento Eliminado")})}showModal(){this.visible=!0}ok(){this.visible=!1}cancel(){this.visible=!1}};i.\u0275fac=function(r){return new(r||i)(C(E),C(Q))},i.\u0275cmp=S({type:i,selectors:[["app-box-show"]],decls:8,vars:6,consts:[[4,"ngIf"],[1,"mt-2","w-full","flex","items-center","justify-center"],[3,"nzOptions","nzValueChange"],["class","relative overflow-x-auto shadow-md sm:rounded-lg mt-3",4,"ngIf"],["class","",4,"ngIf"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg","mt-3"],[1,"flex","items-center","justify-start","mt-2"],[1,"text-lg","font-bold"],["type","button",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-bold","rounded-lg","text-lg","py-2","px-3","m-1","focus:outline-none",3,"click"],[1,"fa-solid","fa-boxes-stacked"],["nzTitle","AGREGAR MOVIMIENTO","nzOkDisabled","","nzOkText",".","nzCancelText","CANCELAR",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[1,"sr-only"],["class","bg-white border-b hover:bg-gray-50 text-gray-700 w-full",4,"ngFor","ngForOf"],[3,"box","event"],[1,"bg-white","border-b","hover:bg-gray-50","text-gray-700","w-full"],[1,"px-6","py-4"],[1,"px-6","py-4","capitalize"],[1,"px-6","py-4","font-bold"],["nz-popconfirm","","nzPopconfirmPlacement","top","nzOkText","ELIMINAR","nzCancelText","CANCELAR",1,"ml-2","text-white","bg-red-700","hover:bg-red-800","focus:ring-4","focus:outline-none","focus:ring-red-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center",3,"nzPopconfirmTitle","nzOnConfirm","nzOnCancel"],[1,"fa-solid","fa-circle-minus"],[3,"click"],[1,"px-6","py-4","font-bold","text-green-700"],[1,""],[1,"grid","grid-cols-2","mt-4"],[1,"col-span-2"],[1,"w-full","flex","items-center","justify-center","font-bold","text-2xl","text-blue-700"],[1,"w-full","flex","items-center","justify-center","font-bold","text-2xl","text-green-700"]],template:function(r,l){r&1&&(g(0,Qt,1,0,"app-load",0),a(1,"app-title"),m(2),n(),a(3,"div",1)(4,"nz-segmented",2),u("nzValueChange",function(v){return l.change(v)}),n()(),g(5,Jt,28,2,"div",3)(6,Xt,16,1,"div",3)(7,Yt,11,3,"div",4)),r&2&&(d("ngIf",l.loading),s(2),x("Detalle de Caja: ",l.item.name,""),s(2),d("nzOptions",l.options),s(),d("ngIf",l.modal=="Movimientos"),s(),d("ngIf",l.modal=="Pagos"),s(),d("ngIf",l.modal=="Caja"))},dependencies:[N,D,I,z,W,ne,Ge,$e,tt]});let e=i;return e})();var ei=[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:We,canActivate:[$],data:{access:["box.index"]}},{path:"create",component:Je,canActivate:[$],data:{access:["box.create"]}},{path:"edit/:id",component:Ke,canActivate:[$],data:{access:["box.edit"]}},{path:"show/:id",component:it,canActivate:[$],data:{access:["box.show"]}}],nt=(()=>{let i=class i{};i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=O({type:i}),i.\u0275inj=k({imports:[ee.forChild(ei),ee]});let e=i;return e})();var cn=(()=>{let i=class i{};i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=O({type:i}),i.\u0275inj=k({imports:[ye,nt,Ae,De,je,Re,Fe,et,Ue,qe]});let e=i;return e})();export{cn as BoxModule};
