import{l as Z,m as ee,n as te,o as ie}from"./chunk-F45RQ6PG.js";import"./chunk-HPHDTXNO.js";import"./chunk-PTD2UHZP.js";import{a as L}from"./chunk-3USFH6CF.js";import{$c as A,Aa as t,Ba as m,F as P,Fa as S,Ha as d,Hb as J,J as b,Ja as p,K as I,Lb as G,O as x,P as _,Pa as c,Q as R,Qa as y,R as $,Ra as k,Sc as w,Tc as T,Uc as K,Vc as z,Xa as E,Yc as N,Zc as V,_c as D,aa as B,ad as F,bd as j,ea as s,fa as C,gd as Q,id as W,kd as M,ld as X,md as Y,na as g,ua as u,va as f,xa as U,ya as H,za as n,zb as q}from"./chunk-XRNJ2UIA.js";var de=(e,i)=>i.id;function pe(e,i){e&1&&m(0,"app-load")}function ge(e,i){if(e&1){let a=S();n(0,"a",8),d("click",function(){x(a);let o=p();return _(o.service.goPage("service/create"))}),m(1,"i",9),t()}}function ue(e,i){if(e&1){let a=S();n(0,"a",16),d("click",function(){x(a);let o=p().$implicit,l=p();return _(l.service.goPage("service/edit/"+o.id))}),m(1,"i",17),t()}}var fe=()=>["service.edit"];function ve(e,i){if(e&1&&(n(0,"tr",10)(1,"td",11),c(2),t(),n(3,"td",11),m(4,"p-image",12),t(),n(5,"td",13),c(6),t(),n(7,"td",13),c(8),t(),n(9,"td",14),u(10,ue,2,0,"a",15),t()()),e&2){let a=i.$implicit,r=p();s(2),k(" ",a.number," "),s(2),g("src",a.storage?r.service.apiUrl+"/"+a.storage:"assets/img/logo.png")("preview",!0),s(2),k(" ",a.name," "),s(2),k(" ",a.ticket," "),s(2),g("setPermission",E(6,fe))}}function he(e,i){if(e&1){let a=S();n(0,"nav",7)(1,"ul",18)(2,"li")(3,"a",19),d("click",function(){x(a);let o=p();return _(o.changePage(-1))}),R(),n(4,"svg",20),m(5,"path",21),t(),$(),n(6,"span"),c(7,"Anterior"),t()()(),n(8,"li")(9,"a",22),c(10),t()(),n(11,"li")(12,"a",23),d("click",function(){x(a);let o=p();return _(o.changePage(1))}),n(13,"span"),c(14,"Siguiente"),t(),R(),n(15,"svg",20),m(16,"path",24),t()()()(),$(),n(17,"span"),c(18),t()()}if(e&2){let a=p();s(10),k(" P\xE1gina ",a.meta.current_page,""),s(8),k("Total de Resultados: ",a.meta.total,"")}}var xe=()=>["service.create"],ae=(()=>{let i=class i{constructor(r){this.service=r,this.per_page=null,this.search="",this.loading=!1,this.data=[],this.meta=null,this.actualPage=1,this.getData()}getData(r=[5,""]){this.per_page=r[0],this.search=r[1],this.list()}list(){this.loading=!0,this.service.api("mec/getServices","post",{company_id:this.service.user.company_id,search:this.search,perPage:this.per_page}).subscribe(r=>{this.loading=!1,this.data=r.data,r.meta?this.meta=r.meta:this.meta=null},r=>{this.loading=!1,this.service.toast("error",r.error.message)})}get page(){return this.meta==null?"":`page=${this.actualPage}`}changePage(r){let o=this.actualPage+r;1<=o&&o<=this.meta.last_page?(this.actualPage+=r,this.list()):this.service.toast("warning","No hay m\xE1s p\xE1ginas")}};i.\u0275fac=function(o){return new(o||i)(C(w))},i.\u0275cmp=b({type:i,selectors:[["app-service-index"]],decls:24,vars:4,consts:[[3,"data"],["class","inline-flex items-center py-2.5 px-3 ml-2 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",3,"click",4,"setPermission"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[1,"sr-only"],["aria-label","Page navigation example"],[1,"inline-flex","items-center","py-2.5","px-3","ml-2","text-sm","font-medium","text-white","bg-blue-700","rounded-lg","border","border-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"fa-solid","fa-circle-plus"],[1,"bg-white","border-b","hover:bg-gray-50","text-gray-700"],[1,"px-6","py-4"],["alt","Perfil","width","30",3,"src","preview"],[1,"px-6","py-4","capitalize"],[1,"px-6","py-4","text-right","flex"],["class","ml-2 bg-blue-700 text-white px-2 py-1 rounded-full",3,"click",4,"setPermission"],[1,"ml-2","bg-blue-700","text-white","px-2","py-1","rounded-full",3,"click"],[1,"fa-solid","fa-marker"],[1,"flex","items-center","-space-x-px","h-10","text-base","mt-3"],["href","#","onclick","return false",1,"flex","items-center","justify-center","px-4","h-10","ml-0","leading-tight","text-gray-500","bg-white","border","border-gray-300","rounded-l-lg","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 6 10",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 1 1 5l4 4"],["href","#",1,"flex","items-center","justify-center","px-4","h-10","leading-tight","text-gray-500","bg-white","border","border-gray-300","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white"],["href","#","onclick","return false",1,"flex","items-center","justify-center","px-4","h-10","leading-tight","text-gray-500","bg-white","border","border-gray-300","rounded-r-lg","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 9 4-4-4-4"],["class","bg-white border-b hover:bg-gray-50 text-gray-700"]],template:function(o,l){o&1&&(u(0,pe,1,0,"app-load"),n(1,"app-title"),c(2,"Lista de Servicios"),t(),n(3,"app-search",0),d("data",function(v){return l.getData(v)}),u(4,ge,2,0,"a",1),t(),n(5,"div",2)(6,"table",3)(7,"thead",4)(8,"tr")(9,"th",5),c(10,"ID"),t(),n(11,"th",5),c(12,"Foto"),t(),n(13,"th",5),c(14,"Servicio"),t(),n(15,"th",5),c(16,"Boleta"),t(),n(17,"th",5)(18,"span",6),c(19,"Edit"),t()()()(),n(20,"tbody"),U(21,ve,11,7,"tr",25,de),t()()(),u(23,he,19,2,"nav",7)),o&2&&(f(0,l.loading?0:-1),s(4),g("setPermission",E(3,xe)),s(17),H(l.data),s(2),f(23,l.meta?23:-1))},dependencies:[M,T,W,te,z]});let e=i;return e})();function Ce(e,i){e&1&&(n(0,"app-load"),c(1,"Cargando ..."),t())}function Se(e,i){if(e&1&&(n(0,"span",15),c(1),t()),e&2){let a=p();s(),y(a.errors.name)}}function be(e,i){if(e&1&&(n(0,"span",15),c(1),t()),e&2){let a=p();s(),y(a.errors.ticket)}}var le=(()=>{let i=class i{constructor(r){this.service=r,this.loading=!1,this.item={},this.errors=null}save(){this.loading=!0,this.errors=null,this.item.company_id=this.service.user.company_id,this.service.api("mec/registerService","post",this.item).subscribe(r=>{this.loading=!1,this.service.toast("success","Servicio Registrado"),this.service.goPage("service/edit/"+r.data.id)},r=>{console.log(r),this.loading=!1,this.errors=r.error.errors,this.service.toast("error","Registro fallido")})}};i.\u0275fac=function(o){return new(o||i)(C(w))},i.\u0275cmp=b({type:i,selectors:[["app-service-create"]],decls:27,vars:5,consts:[[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6","md:grid-cols-2"],[1,"label-form"],[1,"relative"],[1,"input-icon"],[1,"fa-solid","fa-signature","text-gray-500"],["name","name","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["class","error"],["name","ticket","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],[1,"flex"],[1,"btn-save",3,"click"],[1,"fa-solid","fa-floppy-disk"],[1,"btn-list",3,"click"],[1,"fa-solid","fa-table"],[1,"error"]],template:function(o,l){o&1&&(u(0,Ce,2,0,"app-load"),n(1,"app-title"),c(2,"Registrar Servicio"),t(),n(3,"form",0)(4,"div",1)(5,"div",2)(6,"div")(7,"label",3),c(8,"Servicio"),t(),n(9,"div",4)(10,"div",5),m(11,"i",6),t(),n(12,"input",7),d("ngModelChange",function(v){return l.item.name=v}),t()(),u(13,Se,2,1,"span",8),t(),n(14,"div")(15,"label",3),c(16,"Boleta"),t(),n(17,"div",4)(18,"div",5),m(19,"i",6),t(),n(20,"input",9),d("ngModelChange",function(v){return l.item.ticket=v}),t()(),u(21,be,2,1,"span",8),t()(),n(22,"div",10)(23,"button",11),d("click",function(){return l.save()}),m(24,"i",12),t(),n(25,"a",13),d("click",function(){return l.service.goPage("service/index")}),m(26,"i",14),t()()()()),o&2&&(f(0,l.loading?0:-1),s(12),g("ngModel",l.item.name),s(),f(13,l.errors?13:-1),s(7),g("ngModel",l.item.ticket),s(),f(21,l.errors?21:-1))},dependencies:[M,T,j,N,V,D,F,A]});let e=i;return e})();function ye(e,i){e&1&&(n(0,"app-load"),c(1,"Cargando ..."),t())}function ke(e,i){if(e&1&&(n(0,"span",17),c(1),t()),e&2){let a=p();s(),y(a.errors.name)}}function Ee(e,i){if(e&1&&(n(0,"span",17),c(1),t()),e&2){let a=p();s(),y(a.errors.ticket)}}function we(e,i){if(e&1){let a=S();n(0,"a",18),d("nzOnConfirm",function(){x(a);let o=p();return _(o.delete())})("nzOnCancel",function(){return""}),m(1,"i",19),t()}if(e&2){let a=p();g("nzPopconfirmTitle","Eliminar el Servicio: "+a.item.name)}}function Te(e,i){if(e&1){let a=S();n(0,"a",20),d("click",function(){x(a);let o=p();return _(o.service.goPage("service/index"))}),m(1,"i",21),t()}}function Me(e,i){if(e&1&&(n(0,"div",22),m(1,"img",23),t()),e&2){let a=p();s(),g("src",a.service.apiUrl+"/"+a.item.storage,B)}}var Pe=()=>["service.destroy"],Ie=()=>["service.index"],se=(()=>{let i=class i{constructor(r,o){this.service=r,this.route=o,this.id=null,this.loading=!1,this.item={},this.errors=null,o.params.subscribe(l=>{this.id=l.id,this.getData()})}getData(){this.service.api(`mec/getService/${this.id}`,"post").subscribe(r=>{this.item=r.data})}save(){this.loading=!0,this.errors=null,this.service.api(`mec/updateService/${this.id}`,"post",this.item).subscribe(r=>{this.loading=!1,this.service.toast("success","Servicio Actualizado"),this.service.goPage("service/edit/"+r.data.id)},r=>{console.log(r),this.loading=!1,this.errors=r.error.errors,this.service.toast("error","Registro fallido")})}delete(){this.service.api(`mec/deleteService/${this.id}`,"delete").subscribe(r=>{this.service.toast("success","Servicio Eliminado"),this.service.goPage("service/index")},r=>{console.log(r),this.service.toast("error","No se puede Eliminar")})}};i.\u0275fac=function(o){return new(o||i)(C(w),C(J))},i.\u0275cmp=b({type:i,selectors:[["app-service-edit"]],decls:29,vars:11,consts:[[1,"overflow-x-scroll"],[1,"px-2","py-3"],[1,"grid","gap-2","mb-6","md:grid-cols-2"],[1,"label-form"],[1,"relative"],[1,"input-icon"],[1,"fa-solid","fa-signature","text-gray-500"],["name","name","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],["class","error"],["name","ticket","type","text","autocomplete","off",1,"input",3,"ngModel","ngModelChange"],[1,"flex"],[1,"btn-save",3,"click"],[1,"fa-solid","fa-pen-to-square"],["nz-popconfirm","","nzPopconfirmPlacement","top","nzOkText","ELIMINAR","nzCancelText","CANCELAR","class","btn-delete",3,"nzPopconfirmTitle","nzOnConfirm","nzOnCancel",4,"setPermission"],["class","btn-list",3,"click",4,"setPermission"],["model","Service","storage","services",3,"id","message"],["class","w-full flex items-center justify-center"],[1,"error"],["nz-popconfirm","","nzPopconfirmPlacement","top","nzOkText","ELIMINAR","nzCancelText","CANCELAR",1,"btn-delete",3,"nzPopconfirmTitle","nzOnConfirm","nzOnCancel"],[1,"fa-solid","fa-trash"],[1,"btn-list",3,"click"],[1,"fa-solid","fa-table"],[1,"w-full","flex","items-center","justify-center"],["alt","",1,"rounded-md","h-44","md:h-72",3,"src"]],template:function(o,l){o&1&&(u(0,ye,2,0,"app-load"),n(1,"app-title"),c(2,"Actualizar Servicio"),t(),n(3,"form",0)(4,"div",1)(5,"div",2)(6,"div")(7,"label",3),c(8,"Servicio"),t(),n(9,"div",4)(10,"div",5),m(11,"i",6),t(),n(12,"input",7),d("ngModelChange",function(v){return l.item.name=v}),t()(),u(13,ke,2,1,"span",8),t(),n(14,"div")(15,"label",3),c(16,"Boleta"),t(),n(17,"div",4)(18,"div",5),m(19,"i",6),t(),n(20,"input",9),d("ngModelChange",function(v){return l.item.ticket=v}),t()(),u(21,Ee,2,1,"span",8),t()(),n(22,"div",10)(23,"button",11),d("click",function(){return l.save()}),m(24,"i",12),t(),u(25,we,2,1,"a",13)(26,Te,2,0,"a",14),n(27,"app-file",15),d("message",function(){return l.getData()}),t()()()(),u(28,Me,2,1,"div",16)),o&2&&(f(0,l.loading?0:-1),s(12),g("ngModel",l.item.name),s(),f(13,l.errors?13:-1),s(7),g("ngModel",l.item.ticket),s(),f(21,l.errors?21:-1),s(4),g("setPermission",E(9,Pe)),s(),g("setPermission",E(10,Ie)),s(),g("id",l.id),s(),f(28,l.item.storage?28:-1))},dependencies:[M,T,K,j,N,V,D,F,A,Z,z]});let e=i;return e})();var ze=[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:ae,canActivate:[L],data:{access:["service.index"]}},{path:"create",component:le,canActivate:[L],data:{access:["service.create"]}},{path:"edit/:id",component:se,canActivate:[L],data:{access:["service.edit"]}}],ce=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=I({type:i}),i.\u0275inj=P({imports:[G.forChild(ze),G]});let e=i;return e})();var ot=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=I({type:i}),i.\u0275inj=P({imports:[q,ce,Y,Q,ee,ie,X]});let e=i;return e})();export{ot as ServiceModule};
